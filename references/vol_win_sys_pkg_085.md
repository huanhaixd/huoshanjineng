
## 火山"视窗项目"系统类库模块: 远程服务支持

### 包: 火山.网络.远程服务

---

#### 火山.网络.远程服务.远程服务端处理类

* **类型:** `类`
* **名称:** `远程服务端处理类`
* **描述:** 提供网络远程服务器支持功能
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.收到消息

* **类型:** `事件定义方法`
* **名称:** `收到消息`
* **返回值数据类型:** `整数`
* **参数:**
	* `消息地址` (`变整数`): 提供客户端发送过来消息的地址,本类中的其它方法可以通过该地址得到消息的完整内容.
* **描述:** 当服务器端接收到客户请求消息或客户端连接或断开与本服务器的链接时会自动发送本事件. 注意: 本事件被处理时位于多线程环境中,所以在事件处理方法代码中需要考虑避免产生多线程冲突.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.启动

* **类型:** `方法`
* **名称:** `启动`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `端口号` (`整数`): 服务所监听的端口号
	* `采用串行处理方式` (`逻辑型`, 默认值: `真`): 指定是否可以并行处理每一个客户端的请求. 参数值为真代表"收到消息"事件处理方法将串行处理每个客户端的请求. 这种方式下,服务器的性能受到一定的限制,优点是不会发生由于客户端对服务器的并发访问而引起的并发冲突. 参数值为假代表"收到消息"事件处理方法可以并行处理多个客户端的请求. 这种方式下,服务器的性能可以最好的发挥出来. 最大可能的支持更多的客户端访问和最快速的响应,但是必须处理好可能出现的并发访问冲突.
* **描述:** 启动服务程序. 服务启动后,就可以接收客户端发出的信息,并且可以向客户端发送回复信息.
* **返回值描述:** 成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.停止

* **类型:** `方法`
* **名称:** `停止`
* **描述:** 停止正在工作的服务程序. 由于要释放大量的系统资源,该方法执行过程中会有一点延时,应尽量避免在该方法执行过程中强制关闭主程序. 为了正确使用该方法,建议把该方法放在程序的主线程中执行.

##### 火山.网络.远程服务.远程服务端处理类.置线程池大小

* **类型:** `方法`
* **名称:** `置线程池大小`
* **参数:**
	* `最小线程数` (`整数`): 线程池内的线程数量的最小值
	* `最大线程数` (`整数`): 线程池内的线程数量的最大值
* **描述:** 设置每一个线程池内的线程数量的最大值和最小值,该项设置必须在服务器启动之前设置. 服务系统拥有四个线程池,一个接收线程池一个发送线程池还有两个处理线程池,该方法设置每一个线程池内的允许线程数量. 由于线程池内的线程数量是可以随环境的变化而增加或减少的,所以该方法也就是设置线程池内的线程数量的变化区间,系统会根据该设置取最优化的值. 如果不进行该项设置,系统将采用默认的设置: 最小线程数量为5,最大线程数量为20.

##### 火山.网络.远程服务.远程服务端处理类.取请求文本

* **类型:** `方法`
* **名称:** `取请求文本`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
	* `请求代码` (`文本型(需求:可写入变量)`): 用作返回服务器所接收到的请求信息来源,该代码唯一标识客户端的一次请求.
	* `请求消息` (`文本型(需求:可写入变量)`): 用作返回服务器所接收到的请求信息的详细内容
	* `请求消息文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 用作提供客户端消息文本的字符集编码类型,必须与其实际编码类型一致,否则将解码出错.
* **描述:** 取得客户发出的请求信息文本. 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 如果正确得到客户的请求信息,该方法返回真,否则返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.取请求字节集

* **类型:** `方法`
* **名称:** `取请求字节集`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
	* `请求代码` (`文本型(需求:可写入变量)`): 用作返回服务器所接收到的请求信息来源,该代码唯一标识客户端的一次请求.
	* `请求消息` (`字节集类(需求:可写入变量)`): 用作返回服务器所接收到的请求信息数据
* **描述:** 取得客户发出的请求信息字节集. 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 如果正确得到客户的请求信息,该方法返回真,否则返回假.

##### 火山.网络.远程服务.远程服务端处理类.发送文本

* **类型:** `方法`
* **名称:** `发送文本`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户端请求代码` (`文本型`): 提供所欲发送到的客户端的请求代码(由"取请求文本"或"取请求字节集"的 "请求代码"参数返回),为空文本表示使用后面的"客户端句柄"参数. 注意: 回复来自客户端的同步消息时必须使用其请求代码.
	* `客户端句柄` (`变整数`, 默认值: `-1`): 提供所欲发送到的客户端的句柄,-1表示无效. 仅当"客户端请求代码"参数值为空文本时有效.
	* `所欲发送消息` (`文本型`): 提供所欲发送到指定客户端的文本消息内容,不能为空文本.
	* `发送用文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 指定在发送时将"所欲发送消息"参数值内容转换为何种字符集编码,此编码类型必须与接收客户端保持一致.
* **描述:** 发送文本数据到客户端
* **返回值描述:** 发送成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.发送字节集

* **类型:** `方法`
* **名称:** `发送字节集`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户端请求代码` (`文本型`): 提供所欲发送到的客户端的请求代码(由"取请求文本"或"取请求字节集"的 "请求代码"参数返回),为空文本表示使用后面的"客户端句柄"参数. 注意: 回复来自客户端的同步消息时必须使用其请求代码.
	* `客户端句柄` (`变整数`, 默认值: `-1`): 提供所欲发送到的客户端的句柄,-1表示无效. 仅当"客户端请求代码"参数值为空文本时有效.
	* `所欲发送消息` (`字节集类`): 提供所欲发送到指定客户端的消息数据,不能为空.
* **描述:** 发送字节集数据到客户端
* **返回值描述:** 发送成功返回真,失败返回假.

##### 火山.网络.远程服务.远程服务端处理类.发送文本到所有客户

* **类型:** `方法`
* **名称:** `发送文本到所有客户`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `所欲发送消息` (`文本型`): 提供所欲发送到指定客户端的文本消息内容,不能为空文本.
	* `发送用文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 指定在发送时将"所欲发送消息"参数值内容转换为何种字符集编码,此编码类型必须与接收客户端保持一致.
	* `被排除客户端句柄` (`变整数`, 默认值: `-1`): 提供被排除不发送的客户端句柄,-1表示无.
* **描述:** 发送文本数据到所有客户端. 注意: 本方法不能用来回复来自客户端的同步消息.
* **返回值描述:** 发送成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.发送字节集到所有客户

* **类型:** `方法`
* **名称:** `发送字节集到所有客户`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `所欲发送消息` (`字节集类`): 提供所欲发送到指定客户端的消息数据,不能为空.
	* `被排除客户端句柄` (`变整数`, 默认值: `-1`): 提供被排除不发送的客户端句柄,-1表示无.
* **描述:** 发送字节集数据到所有客户端. 注意: 本方法不能用来回复来自客户端的同步消息.
* **返回值描述:** 发送成功返回真,失败返回假.

##### 火山.网络.远程服务.远程服务端处理类.取客户句柄

* **类型:** `方法`
* **名称:** `取客户句柄`
* **返回值数据类型:** `变整数`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
* **描述:** 根据客户的请求信息地址取得客户的句柄. 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 成功返回所取得的客户句柄,如果客户已经不可用或其他意外情况发生,返回-1..
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.取客户IP

* **类型:** `方法`
* **名称:** `取客户IP`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户句柄` (`变整数`): 客户端的句柄值
	* `客户IP地址` (`文本型(需求:可写入变量)`): 用作返回所取得的客户端IP地址
* **描述:** 根据客户的句柄值取得客户的IP地址
* **返回值描述:** 成功取得客户的IP地址返回真,如果客户已经不可用或其他意外情况发生,返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.取客户自定义值

* **类型:** `方法`
* **名称:** `取客户自定义值`
* **返回值数据类型:** `变整数`
* **参数:**
	* `客户句柄` (`变整数`): 客户端的句柄值
* **描述:** 返回所指定客户的用户自定义数值(由"置客户自定义值"方法置入)

##### 火山.网络.远程服务.远程服务端处理类.置客户自定义值

* **类型:** `方法`
* **名称:** `置客户自定义值`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户句柄` (`变整数`): 客户端的句柄值
	* `用户自定义数值` (`变整数`): 提供所欲设置的自定义数值
* **描述:** 设置所指定客户的用户自定义数值
* **返回值描述:** 成功返回真,失败返回假.

##### 火山.网络.远程服务.远程服务端处理类.取客户数

* **类型:** `方法`
* **名称:** `取客户数`
* **返回值数据类型:** `整数`
* **描述:** 取得当前连接到服务器的客户端数量
* **返回值描述:** 成功返回大于等于0的整数值,如果发生错误返回-1.

##### 火山.网络.远程服务.远程服务端处理类.取客户数组

* **类型:** `方法`
* **名称:** `取客户数组`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户句柄数组` (`变整数数组类(需求:可写入变量)`): 用作返回连接到当前服务程序的所有客户端的句柄数组
* **描述:** 取得当前连接到服务器的所有客户端的句柄
* **返回值描述:** 成功返回真,失败返回假.

##### 火山.网络.远程服务.远程服务端处理类.断开连接

* **类型:** `方法`
* **名称:** `断开连接`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `客户句柄` (`变整数`): 所欲断开客户端的句柄值
* **描述:** 断开与一个客户的连接
* **返回值描述:** 成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

##### 火山.网络.远程服务.远程服务端处理类.断开所有客户连接

* **类型:** `方法`
* **名称:** `断开所有客户连接`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `被排除客户端句柄` (`变整数`, 默认值: `-1`): 提供被排除不断开的客户端句柄,-1表示无.
* **描述:** 断开与所有客户的连接
* **返回值描述:** 成功返回真,失败返回假.

##### 火山.网络.远程服务.远程服务端处理类.取消息类型

* **类型:** `方法`
* **名称:** `取消息类型`
* **返回值数据类型:** `整数`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
* **描述:** 取得客户端消息的类型. 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 客户连接到服务端返回0,客户主动或意外断开与服务端的连接返回1,客户端发送字节流到服务器返回2,出错返回-1.
* **相关例程:** [vol-远程服务聊天室服务器-rpc_chat_server-main](#vol-远程服务聊天室服务器-rpc_chat_server-main)

---

#### 火山.网络.远程服务.远程客户端处理类

* **类型:** `类`
* **名称:** `远程客户端处理类`
* **描述:** 提供网络远程客户端支持功能
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.收到消息

* **类型:** `事件定义方法`
* **名称:** `收到消息`
* **返回值数据类型:** `整数`
* **参数:**
	* `消息地址` (`变整数`): 提供服务器端发送过来消息的地址,本类中的其它方法可以通过该地址得到消息的完整内容.
* **描述:** 异步请求模式下如果客户端接收到数据或者与服务器的连接被断开,本事件就会被触发. 注意: 本事件被处理时位于多线程环境中,所以在事件处理方法代码中需要考虑避免产生多线程冲突.
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.连接

* **类型:** `方法`
* **名称:** `连接`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `端口号` (`整数`): 为欲连接的服务器的端口号,该值的取值范围在0到65535之间.
	* `服务器地址` (`文本型`): 为欲连接的服务器的IP地址,也可以是服务器的域名或者是内网的计算机名.
	* `是否同步请求` (`逻辑型`): 指定客户端的请求方式,该值为真代表客户端采用同步的请求方式,这时忽略该方法的最后一个参数,为假代表客户端采用异步的请求方式. 同步方式不能发送异步请求,同样异步方式不能发送同步请求.
* **描述:** 连接到指定地址和端口号的服务器
* **返回值描述:** 成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.断开

* **类型:** `方法`
* **名称:** `断开`
* **描述:** 断开与服务器的连接
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.同步发送文本

* **类型:** `方法`
* **名称:** `同步发送文本`
* **返回值数据类型:** `整数`
* **参数:**
	* `请求文本` (`文本型`): 发送到服务器的请求文本的内容
	* `结果文本` (`文本型`): 用作存储服务器返回的结果数据内容. 如果参数值提供"空对象",则表明服务器端对本消息不会发送返回消息,本方法发送完毕消息后,不会去等待服务器端返回消息.
	* `最大等待时间` (`整数`, 默认值: `5000`): 发送消息及等待服务器发送回结果文本时的最大等待时间,单位为毫秒.
	* `发送用文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 指定将"请求文本"内容转换为何种字符集编码后发送,此编码类型必须与服务器端接收时保持一致.
	* `接收用文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 指定服务器端所返回的结果文本为何种字符集编码格式,此编码类型必须与服务器端发送回的结果文本保持一致.
* **描述:** 在客户端发送同步请求文本到服务器,当收到服务器返回的结果后,本方法才返回,否则为阻塞状态直到超时.
* **返回值描述:** 如果正确执行并接收到服务器返回的结果,该方法返回1; 如果在超时时间内没能接收到服务器的返回结果,该方法返回0; 如果出现其他错误没能接收到服务器的返回结果,返回-1.

##### 火山.网络.远程服务.远程客户端处理类.同步发送字节集

* **类型:** `方法`
* **名称:** `同步发送字节集`
* **返回值数据类型:** `整数`
* **参数:**
	* `请求字节集` (`字节集类`): 发送到服务器的请求数据的内容
	* `结果字节集` (`字节集类`): 用作存储服务器返回的结果数据内容. 如果参数值提供"空对象",则表明服务器端对本消息不会发送返回消息,本方法发送完毕消息后,不会去等待服务器端返回消息.
	* `最大等待时间` (`整数`, 默认值: `5000`): 发送消息及等待服务器发送回结果文本时的最大等待时间,单位为毫秒.
* **描述:** 在客户端发送同步请求数据到服务器,当收到服务器返回的结果后,本方法才返回,否则为阻塞状态直到超时.
* **返回值描述:** 如果正确执行并接收到服务器返回的结果,该方法返回1; 如果在超时时间内没能接收到服务器的返回结果,该方法返回0; 如果出现其他错误没能接收到服务器的返回结果,返回-1.

##### 火山.网络.远程服务.远程客户端处理类.异步发送文本

* **类型:** `方法`
* **名称:** `异步发送文本`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `请求文本` (`文本型`): 发送到服务器的请求文本的内容
	* `发送用文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 指定将"请求文本"内容转换为何种字符集编码后发送,此编码类型必须与服务器端接收时保持一致.
* **描述:** 在客户端异步发送请求文本到服务器
* **返回值描述:** 成功返回真,失败返回假.
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.异步发送字节集

* **类型:** `方法`
* **名称:** `异步发送字节集`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `请求数据` (`字节集类`): 发送到服务器的请求数据的内容
* **描述:** 在客户端异步发送请求数据到服务器
* **返回值描述:** 成功返回真,失败返回假.

##### 火山.网络.远程服务.远程客户端处理类.取返回文本

* **类型:** `方法`
* **名称:** `取返回文本`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
	* `结果信息` (`文本型(需求:可写入变量)`): 用作返回服务器所接收到的结果信息文本
	* `结果信息文本编码` (`文本编码类型`, 默认值: `文本编码类型.多字节`): 用作提供服务器端结果信息的字符集编码类型,必须与其实际编码类型一致,否则将解码出错.
* **描述:** 在异步的请求方式下,取得服务器返回的结果文本. 注意: 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 如果正确取得服务器的返回结果,返回真,否则返回假.
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.取返回字节集

* **类型:** `方法`
* **名称:** `取返回字节集`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
	* `结果数据` (`字节集类(需求:可写入变量)`): 用作返回服务器所接收到的结果信息数据
* **描述:** 在异步的请求方式下,取得服务器返回的结果数据. 注意: 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 如果正确取得服务器的返回结果,返回真,否则返回假.

##### 火山.网络.远程服务.远程客户端处理类.取消息类型

* **类型:** `方法`
* **名称:** `取消息类型`
* **返回值数据类型:** `整数`
* **参数:**
	* `消息地址` (`变整数`): 为"收到消息"事件的"消息地址"参数值
* **描述:** 取得触发客户端处理函数的消息类型. 注意: 本方法必须在"收到消息"事件的处理方法中调用.
* **返回值描述:** 如果服务器关闭或者与客户的连接意外断开返回0,如果客户端接收到数据返回1,出错返回-1.
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)

##### 火山.网络.远程服务.远程客户端处理类.是否已连接

* **类型:** `方法`
* **名称:** `是否已连接`
* **返回值数据类型:** `逻辑型`
* **描述:** 返回当前是否已经连接上服务器
* **相关例程:** [vol-远程服务聊天室客户端-rpc_chat_client-main](#vol-远程服务聊天室客户端-rpc_chat_client-main)
