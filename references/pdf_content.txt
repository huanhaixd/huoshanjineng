
================================================================================
文件: 火山平台封装语法手册_火山软件开发平台.pdf
================================================================================

--- 第 1 页 ---
火山平台语法手册
（封装用户版）
注意: 本手册内容普通用户无需掌握,示例如非明确说明均为基于安卓平台.
一. 相关概念、约定和资源:
1. 火山平台基于面向对象的编程理念构造,支持类的封装、继承、多态,但是在此基础上进行了一些精简,以便能更好地学习和使用.
2. 火山平台将用户分为普通和封装用户两种.
普通用户为正常使用火山平台开发应用软件的用户;
封装用户则是可以自行使用火山程序扩展火山平台类库的用户.
为了屏蔽火山程序对特定目标环境的依赖，火山软件开发平台对每个目标环境提供了对应的封装类库，这种类库是使用火山程序
本身进行封装的。
绝大多数情况下，用户不涉及到类库封装方面的工作，随系统附带的类库已经足够完成通常的应用开发需求。但如果用户觉得不
够用或者有其它特别的要求，可以使用火山程序自行修改或扩展类库，此类用户被称为封装用户，所需要掌握的知识在本手册中
讲述。学习类库封装的最好实际例子在系统类库，可以查看应用程序项目建立后自动添加进去的"模块"过滤器中的内容。
二. 相关术语:
1. 名称:
火山平台中的名称分为以下这些:
1. 单名称:
单名称必须以英文字母/下划线字符/汉字字符开头,后面跟随英文字母/下划线字符/数字/汉字字符.如未特殊标注,本文档中所提
出的所有"名称"均为单名称.
2. 全名称:
以句点字符组合在一起的单名称 称为全名称,如"火山.程序". 单名称可以被认为是全名称的一种(只包括一个单名称的全名称).
实际上,目前只有包名才使用到由多个单名称组成的全名称.
3. 标识符名称: :
必须由两个或多个单词文本组成,首单词必须以英文字母/下划线字符开头,后续单词可以以英文字母/数字/下划线字符开头,单词
之间使用句点字符分隔,单词中间的字符只能为英文字母/数字/下划线字符,最后一个单词固定为此标识符的当前版本号数值.
两个标识符,如果其名称部分相同且第一个标识符的版本号大于等于第二个标识符的版本号,则说明第一个标识符能够匹配第二个
标识符.
如标识符"cplus.win32.console.1",说明其名称为"cplus.win32.console",版本号为1.
注意: 火山中的名称对英文字母的大小写敏感,譬如"abc","ABC"所指定的不是同一名称.
　
2. 立即数
立即数用作表达一个直接的字面数据值,有以下几类:
1. 数值立即数:
A. 十进制整数或小数,小数支持使用科学计数法.
B. 十六进制整数: "0x"后跟数字0-9或字母A-B(大小写无关). 如: 0x12AC3F
C. 字符整数值: 使用单引号括住的字符,如'A'.
如果欲强行指定数值的数据类型,可以使用"强制类型转换"操作符,譬如"(长整数)1",提供了一个数据类型为长整数的数值立即数.
如果某整数的数值超出了整数的最大有效范围,将自动被设定为长整数数据类型. 如: 0x123456789A 将被自动认为是长整数数
据类型.
2. 逻辑型立即数: 为真/假.
3. 字符串立即数:
为用双引号括住的一段文本,文本内支持使用以下转义符:
转义符 解释
\b 退格符
\f 换页符
\r 回车符
\n 换行符
\t 水平制表符
\' 单引号2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 1/68

--- 第 2 页 ---
\" 双引号
\\ 反斜杠
\u 后跟1-4个十六进制字符,为所对应字符的Unicode代码值.
\ 后跟1-3个八进制字符,为所对应字符的代码字节值.
\x 后跟1-2个十六进制字符,为所对应字符的代码字节值.
如: "您好!\n祖国" 在"您好!"和"祖国"之间通过使用转义符插入了一个换行符.
注意: 在火山视窗平台里面,如果欲达到换行效果,需要插入"\r\n"回车和换行两个字符.
4. 数组立即数(只能在提供数组常量/变量初始值时使用):
为使用花括号括住的立即数的组合,如: { 1, 2 }, 多维数组可以嵌套,如: { { 1, 2 }, { 3, 4 } }
注意: 多维数组的各维成员数目必须相等,譬如如下格式的数组立即数是不允许的: { { 1, 2 }, { 3 } } ,因为其两个维的成员数目不相
等.
　
3. 数据类型:
数据类型可以为以下两种:
A. 基本数据类型;
B. 用户程序中定义的类,称为类数据类型;
C. 数组数据类型
数组数据类型为基本或类数据类型后面跟随一个或多个数组维定义组成.
每个数组维定义由左右中括号("[]")组成,如果应用在变量定义上,可以同时在中括号内部加入具体成员数目,表示生成对应的数
组变量实例. 如:
单维文本数组数据类型: 文本 []
多维整数数组数据类型: 整数 [] []
定义具有指定成员数目的整数数组变量: 整数 [3], 整数 [3][3]
 
三. 火山程序结构:
一个火山程序的构成结构如下:
1. 包定义
1. 文档嵌入行
2. 文档注释行
3. 类定义
1. 类嵌入行
2. 类注释行
3. 类成员常量
4. 类成员变量
5. 类成员方法
1. 方法参数
2. 方法局部常量
3. 方法局部变量
4. 语句注释行
5. 语句嵌入行
6. 火山语句行
下面是一个火山程序的基本样图(天蓝色文字为说明):2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 2/68

--- 第 3 页 ---
　
1. 包定义:
包名为全名称,一个包内可以包含多个文档注释行/文档嵌入行/类定义.
包定义成员始终位于源文件的首部而且只能存在一个.
多个程序文件可以具有相同的包名,此时其中的内容被认为处于同一个包中.
　
2. 注释
可以使用以下方式定义火山程序中的注释:
A. 任何定义型成员其名称如果以连续两个'/'字符引导,说明其处于被注释状态,其以及其中的所有内容(包括直接/间接子成员)在
编译时都将被忽略;
B. 在类外部的程序行,被称为文档注释行; 在类内部但是在类方法外部的程序行,被称为类注释行;
C. 在类方法内部可以使用连续两个'/'字符引导一段一直到行尾的语句注释文本.
文档注释行/类注释行/从行首开始的语句注释文本,其尾部如果以一个或多个减号/等号字符结束,IDE将自动在其后绘制对应长度的
单/双分隔线.可以在IDE设置选项中将此机制关闭.
　2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 3/68

--- 第 4 页 ---
3. 嵌入行
文档或者方法程序行行首如果以一个独立的'@ '字符开头(与后面的内容必须用空白字符隔开),则被称为嵌入行,该嵌入行在编译时
将被直接发送到目的平台编译器,由用户自身保证该行的语法正确性.
文档中可以使用"@begin"和"@end"关键字行括住一批程序行(注意 此方法不支持在类/方法中使用),这些程序行都将被视作嵌入
行.
嵌入行中可以使用以下替换符引用外部火山名称:
格式 解释 样例
@<成员名称>引用所指定的成员/参数名称.
注意: 为了避免重复替换产生错误,所有参数仅允许在嵌入
行中引用一次,但是需求类型为"数据类型"的参数除外.@<对象变量1>.test, @<对象变量1.成员1>
@n<成员名称>引用所指定的成员名称,与前面格式文本不同的是:
1. 本格式文本仅加入最后一个成员名称. 譬如"@n<对
象变量1.成员1>"仅会加入最后的"成员1"的名称,而不
会加入前面的所有中间名称;
2. 本格式文本引用成员时,不受静态成员访问格式限
制. 譬如"@n<类1.成员1>",即使"成员1"不是常量/静
态成员也可以被引用到;
3. 本格式文本引用成员时,不受访问权限的限制(譬如
所访问成员是否公开等).
由于去除了这些限制,开发者必须谨慎使用此替换符,必须
能够保证该替换符获得的名称在任何场合下均能正常工
作.@n<对象变量1.成员1>
@dt<数据类型名称>引用所指定的数据类型名称,包括: 基本数据类型/模板数
据类型/类.
注意:
1. 不支持数组数据类型;
2. 类数据类型是否使用全名称自动根据当前实际位置
需要,可以通过在前方明确加上包名来强制组成全名称;
3. 如果本替换符后跟随的不是对象成员访问字符(譬如
句点),别名类将使用其所封装的本地类名,常量类将使
用其所对应的基本数据类型.@dt<整数>, @dt<模板类型1>, @dt<类1>,
@dt<包1.类1>.静态变量1
@fdt<数据类型名称>与"@dt"基本相同,除了类数据类型始终使用全名称.  
@dtat_vcls<数据类型名
称, 附加文本>如果所指定类型名称为火山类/本地火山类数据类型,则在
当前位置加入所指定的附加文本.
数据类型名称可以使用"@pdt"替换符引用指定参数数据
的数据类型,附加文本中可以使用其它嵌入替换符,编译器
会自动删除由于未满足条件加入附加文本而生成的空白
嵌入行. 下同. 
@dtat_ncls<数据类型名
称, 附加文本>如果所指定类型名称为本地类/本地结构数据类型,则在当
前位置加入所指定的附加文本. 
@dtat_cls<数据类型名
称, 附加文本>如果所指定类型名称为所有类数据类型(火山类/本地火山
类/本地类/本地结构),则在当前位置加入所指定的附加文
本. 
@dtat_not_cls<数据类
型名称, 附加文本>如果所指定类型名称不为类数据类型(基本数据类型/本地
整数基本类型/本地值类型/本地参考类型),则在当前位置
加入所指定的附加文本. 
@pvpt<参数名称>引用为指定参数所提供实际调用立即数或常量文本值的
对应字面文本(去除两侧双引号) 
@pvpn<参数名称>与"@pvpt"相同,只是要求所提供的字面文本为有效的英
文名称文本. 
@pdt<参数名称> 引用为所指定参数提供的实际调用值数据类型,包括: 基本
数据类型/类.
注意:
1. 所获取名称文本不包括数组数据类型的维定义部分;
2. 如果本替换符后跟随的不是对象成员访问字符(譬如
句点),别名类将使用其所封装的本地类名,常量类将使
用其所对应的基本数据类型;
3. 类数据类型始终使用全名称; 2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 4/68

--- 第 5 页 ---
4. 方法名称参数值使用统一的"vmethod".
@pdt2<参数名称>同"@pdt"唯一的不同是,以下类数据类型始终使用统一
的名称:
火山类
数据类
型:"vcls"
本地类
(由别
名类型
指定,下
同):"ncls"
本地结
构:"nstruct"
本地整
数基本
类型:"nnum"
本地值
类型:"nvalue"
本地参
考类型:"nref" 
@pad<参数名称>所指定名称数组参数的数组维数文本,如果不为数组,则
为"0". 
@pdt_ch<参数名称>引用为所指定参数提供的实际调用值数据类型的标识字
符,包括: 基本数据类型/类.
数据类型的数组部分被忽略,常量类数据类型被转换到所
对应的基本数据类型.
数据类型与标识字符的对应表(区分大小写):
字节: b
短整数: s
字符: c
整数: n
变整数: p
长整数: l
小数: f
逻辑值: B
文本型: S
火山类: C
方法名: M
本地类(由别名
类型指定,下同):w
本地结构: W
本地整数基本
类型:N
本地值类型:v
本地参考类型:r 
@pdt_list<参数名称>引用从所指定参数开始到调用参数值表尾部所有参数值
的实际数据类型列表(各数据类型之间使用逗号分隔),包
括: 基本数据类型/类.
注意:
1. 所获取名称文本不包括数组数据类型的维定义部分;
2. 如果本替换符后跟随的不是对象成员访问字符(譬如
句点),别名类将使用其所封装的本地类名,常量类将使
用其所对应的基本数据类型;
3. 类数据类型始终使用全名称;
4. 方法名称参数值使用统一的"func()"(本地目标语言
为GO时)或"VOID_FUNC". 
@pkg<包名称> 引用所指定的包名称 @pkg<火山.用户.程序>2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 5/68

--- 第 6 页 ---
@an<约定名称>引用所指定的全局/项目插件约定名称,其中全局约定名称
由火山系统本身定义,插件约定名称由所使用的插件定义.@an<onInitAndroidActivity>
@sn<特定名称> 引用所指定的特定名称,具体列表如下:
1. "current_class": 嵌入行当前调用位置所处类名(是
否使用全名称自动根据当前实际位置需要,可以通过在
前方明确加上包名来强制组成全名称). 所谓调用位置,
为当调用该嵌入行所处嵌入式方法时,方法调用语句的
所处位置;
2. "current_package": 嵌入行当前调用位置所处包
名;
3. "current_method": 嵌入行当前调用位置所处方法
名;
4. "base_class": 嵌入行当前调用位置所处类的基础类
名(是否使用全名称自动根据当前实际位置需要,可以通
过在前方明确加上包名来强制组成全名称);
5. "current_class_def": 嵌入行定义位置所处类名(是
否使用全名称自动根据当前实际位置需要,可以通过在
前方明确加上包名来强制组成全名称). 所谓定义位置,
即定义该嵌入行的具体位置;
6. "current_package_def": 嵌入行定义位置所处包
名;
7. "base_class_def": 嵌入行定义位置所处类的基础类
名(是否使用全名称自动根据当前实际位置需要,可以通
过在前方明确加上包名来强制组成全名称);
8. "startup_method": 程序启动方法名(启动方法必须
位于启动类中)
9. "startup_class": 程序启动类名(是否使用全名称自
动根据当前实际位置需要,可以通过在前方明确加上包
名来强制组成全名称);
10. "startup_package": 程序启动类所处包的包名;
11. "this": 只能在非静态嵌入式方法中的嵌入行里使
用,将被替换为调用该嵌入式方法时提供的调用对象;
12. "quot": 双引号字符;
13. "apos": 单引号字符;
14. "lt": 左尖括号字符;
15. "gt": 右尖括号字符;
16. "nbsp": 空格字符;
17. "pm_types": 为调用该嵌入式方法时所提供的全
部参数的实际调用值数据类型的标识字符串.字符串两
侧使用双引号括住,数据类型的数组部分被忽略,常量类
数据类型被转换到所对应的基本数据类型,每个参数调
用值数据类型对应一个标识字符(区分大小写),具体数
据类型与标识字符的对应表见"@pdt_ch"处:
如果参数调用值数据类型为类,可以通过其运行时类
型信息来进行进一步判定其具体是什么类.
18. "rand_name0" 到 "rand_name9": 随机生成的程
序内唯一性名称.
注意在同一条嵌入语句行或同一个嵌入式方法体中
所有的嵌入语句行内,同一随机名称("rand_name0"
到 "rand_name9")将为同一名称文本.
譬如假设在一个嵌入式方法的方法体内存在以下语
句内容:
for (int @sn<rand_name5> = 0;
@sn<rand_name5> < 3;
@sn<rand_name5>++)
其中"@sn<rand_name5>"所生成的随机名称在整
个程序内为唯一性名称,但是在该嵌入式方法体内这
三个位置处将为同一个名称文本.@sn<current_class>
@sn<current_package>
@sn<base_class>
@sn<startup_method>
@sn<startup_class>
@sn<startup_package>
@sn<this>
@sn<quot>
@sn<apos>
@sn<pm_types>
@sn<rand_name>2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 6/68

--- 第 7 页 ---
19. "current_statment": 当前语句的位置字符串,格
式: "<所处源文件名>, 所处源文件行号, 所处包名.所
处类名, 所处方法名".
20. "current_source_file": 当前语句所处源文件名
21. "current_source_line": 当前语句在所处源文件中
的行号位置
22. "current_source_package": 当前语句所处包名
23. "current_source_class": 当前语句所处类名
24. "current_source_method": 当前语句所处方法名
@def_macro 定义可以在嵌入行中使用的宏,目前不支持在方法中定义. 语法格式为:
1. 不携带参数表方式:
@def_macro 宏名称 宏内容
在使用该宏时将直接使用宏内容对该宏进行替换.
如: @def_macro TEST wutao
使用该宏时,如 @m<TEST>,该宏替换后的实际内容将为 wutao .
　
2. 携带参数表方式:
@def_macro 宏名称(宏参数名称, ...)  宏内容
注意事项:
A. 参数表的左括号必须紧跟在宏名称后面,中间不能存在空白字符,不然就会被认为是宏内容的一
部分;
如: @def_macro TEST(param1) param1
该宏的名称为TEST,具有一个名为param1的宏参数,宏内容是直接使用该参数.
如果左括号与TEST之间存在空白字符的话,如: @def_macro TEST  (param1) param1
那么该宏就是一个名为TEST,没有参数,宏内容为"(param1) param1".
B. 参数表中可以包括一个或多个宏参数名称,多个参数名称之间使用逗号进行分隔;
如: @def_macro MY_ADD(param1, param2) param1 + param2
C. 宏内容中可以使用参数表内定义的宏参数名称,在使用该宏时将使用对应的实际参数内容进行替
换;
D. 在宏内容中所使用的宏参数名称,如果其前方为1个'#'字符,该"#宏参数名"在进行宏替换时将被
替换为字符串格式,即自动在两侧加上双引号;
如: @def_macro TEST(param1) #param1
使用该宏时,如 @m<TEST> (abc) ,该宏替换后的实际内容将为 "abc" ,注意abc两侧双引号也
是替换后内容的一部分.
E. 在宏内容中所使用的宏参数名称,如果其前/后方为2个'#'字符,该宏参数名在进行宏替换时将自
动与其前/后方内容连接起来.
如: @def_macro TEST(param1,param2) wutao_##param1##param2##_var
使用该宏时,如 @m<TEST> (abc,bcd) ,该宏替换后的实际内容将为 wutao_abcbcd_var ,前后
文本将连接在一起.
F. 如果使用宏时所提供的实际参数数目超出当前所定义宏参数数目,则所有多余参数内容将被统一
视为最后一个宏参数的替换内容.
如: @def_macro TEST(param1) param1
使用该宏时如果提供了多余的参数,如 @m<TEST> (abc, bcd) ,则最终得到的替换结果就是
abc, bcd ,而不会报错.
此特性是为了支持将目标语言的复杂代码文本指定为宏的最后一个参数的内容,如:
@m<TEST> (myObject.myMethod (1, 2, 3)) ,最终得到的替换结果就是
myObject.myMethod (1, 2, 3) .
　
3. 多行宏内容:
如果宏内容包括多行,可以在当前行的尾部使用'\'字符标记其紧接着的下一嵌入行也属于本宏的内
容.如果当前行的尾部为双引号,而且下一行的首部也为双引号,则这两个字符串将合并到一起.
如:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 7/68

--- 第 8 页 ---
@def_macro TEST wutao  \
volcano  \
dev
使用该宏时所最后得到的替换结果为:
wutao
volcano
dev
再如:
@def_macro TEST "wutao "  \
"volcano"
使用该宏时所最后得到的替换结果为:
"wutao volcano"
4. 宏内容中可以使用本表中列出的除开宏定义本身以外的所有其它替换符,包括使用其它宏.
@m<宏名称> (参数表)使用所指定名称的宏,可以在后方跟随一个参数表(注意此处不再限制左括号与其前方不能留空白字符),
参数表中的所有参数用作替换对应的宏参数.
注意:
1. 如果所欲使用的宏在类中定义,并且当前使用位置不位于该类中,则必须在宏名称前加上类名前缀;
2. 如果所使用宏未指定类名前缀,且其当前使用位置所处类及程序全局中均定义有该名称的宏,则将使
用类中定义的宏;
3. 可以跨越多行提供宏参数表. 如:
@m<TEST> ("wutao",
        "volcano")
使用格式:
1. 不携带参数表方式:
如: @m<TEST>
2. 携带参数表方式:
如: @m<TEST> ("wutao", "volcano")
注意如前所述,如果所提供的实际参数数目大于所使用宏中定义的宏参数数目,则所有多余部分将被
视为宏的最后一个参数的内容.
 
替换符中可以提供一个使用逗号分隔的选项参数字符集合,其格式为: @xx<替换名称, 选项参数字符集文本>
目前有效的选项字符有:
选项字符 说明
n指定使用相关
成员的纯粹名
称.
1. 当本地语
言为GO时,火
山编译器会将
所有类对应的
数据类型编译
为GO的参考
格式,即"类
1"所对应的
GO数据类型
为星号字符
加"类1"的实
际输出名,此
即为类
似"@dt<类
1>"替换符的
替换文本. 当
在某种情况下
不需要这个星
号时,就可以
通过"@dt<
类1, n>"格式2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 8/68

--- 第 9 页 ---
来去掉此星
号;
2. 当本地语
言为C++时,
如果数据类型
尾部以星号
('*')字符结束,
则将其去除;
首部以"P" /
"P_" / "LP" /
"LP_"文本开
头,亦将其去
除. 前者优先.
4. 类定义
类用作定义一个可以具有子成员的数据类型.
类可以单根继承一个基础类,引用类名时可以直接使用类名称,或者使用"包名.类名"进行全名引用.
注意: 名称为"启动类"的类被用作特定定义用户程序的启动类
基本属性表:
名称 解释
基础类指定本类的基础类名称,可以是单名称/全名称,也可以是空文本(表示无基础类).
如果定义了非空基础类,当前类将自动继承所有来自该基础类的内容,如果该基础类还有基础类,将一
并继承过来,此时本类称为这些类的"继承类".
继承类访问其直接/间接基础类中的成员不需要其为公开状态.
如果本类为模板基础类,则可以使用模板数据类型来动态提供其基础类.
公开 指定本类是否对外公开. 公开类可以在所处包外部被访问,而非公开类只能在所处包内部被访问.
　
5. 类成员常量或局部常量定义
常量用作定义一个不允许在程序中进行修改的恒定值.
类的成员常量在其外部应该通过"类名.常量名"的方式来引用.
基本属性表:
名称 解释
类型 提供常量的数据类型,只能是基本数据类型或常量类.
公开指定本常量是否公开.公开常量可以在所处类外部被访问,而非公开常量只能在本类或者其继承类中访
问.
局部常量没有本属性.
初始值提供常量的初始值立即数,必须对应常量的数据类型. 注意:
1. 在设置常量初始值时,只能提供立即数,不能提供其它常量;
2. 可以使用'@'字符引导的文本来指定常量的本地初始化值文本(用户自行保证其有效性,火山编
译器不会检查). 如:
　
6. 类成员变量或局部变量定义
变量的内容允许在程序中被动态修改.
基本属性表:
名称 解释
类型 提供变量的数据类型
静态 指定是否为静态变量.静态变量在所处类载入后即保持始终存在.
由于静态变量初始化时不存在所处类实例,静态成员变量不支持自动挂接其事件到其所处类,在需要时
必须通过"挂接事件"命令手动挂接.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 9/68

--- 第 10 页 ---
类的静态成员变量在外部应该通过"类名.变量名"的方式来引用.
非静态的类成员变量,如果其数据类型为类且其中定义有事件,将被自动挂接到当前类实例对象.
参考指定是否为参考变量.
注意:
变量的参考属性如果为假,将自动创建一个对应数据类型的实例对象;
如果为真,则仅为用作指向另外一个已有实例对象的引用,本身并不创建实例对象.
公开指定本变量是否公开.公开变量可以在所处类外部被访问,而非公开变量只能在本类或者其继承类中访
问.
局部变量没有本属性.
初始值提供变量的初始值,必须对应变量的数据类型.
在设置变量初始值时,可以提供立即数,也可以提供常量.
设置参考变量的初始值时,可以提供空对象.
如果未提供初始值,数值型变量的初始值为0,逻辑型变量的初始值为假,文本型变量的初始值为空文
本,参考变量("参考"属性为真的变量)的初始值为空对象.
　
7. 类方法定义
定义类的方法
名称为"类_初始化"的方法为类的初始化方法(在类对象被创建时自动调用),该方法不携带任何参数并且不返回值,对是否公开没有要
求.
名称为"类_清理"的方法为类的清理方法(在类对象被销毁时自动调用),该方法不携带任何参数并且不返回值,对是否公开没有要求.
注意:在某些目标语言平台(如Java)上,类清理方法不会被支持.
基本属性表:
名称 解释
返回值类型 提供方法执行完毕后所返回数据的数据类型
静态指定是否为静态方法. 注意:
1. 类的静态方法需要通过"类名.方法名"的方式来引用;
2. 在静态方法内部，只能访问其所处类或者其所处类的基础类中的成员常量或者静态成员变量;
3. 如果静态方法所定义第一个参数的数据类型为方法所处类本身而且没有指定参数匹配和需求类
型,那么可以基于该类对象以动态格式来调用该静态方法,编译器将自动进行转换.
如: 假设"类1"中定义了"方法1",而"方法1"的第一个参数数据类型为"类1",类似这样的静态调用
格式"类1.方法1 (类1对象, ...)"可以以"类1对象.方法1 (...)"的动态调用格式进行书写.
类别 指定方法的具体类别,可以为以下几种之一:
1. 通常: 表明本方法为通常方法
　
2. 属性读: 表明本方法为属性读取方法. 该属性可以在程序语句中被读取.
如果属性读方法为静态方法,所要求的定义格式:
A. 必须定义且只能定义一个参数,该参数的数据类型必须为属性读方法所处类本身;
B. 必须定义有返回值,该返回值的数据类型不能为数组,该数据类型即为本属性被读取时的数
据类型.
如果属性读方法不为静态方法,所要求的定义格式:
A. 不能定义参数;
B. 必须定义有返回值,该返回值的数据类型不能为数组,该数据类型即为本属性被读取时的数
据类型.
注意:
A. 在程序中,必须以与变量相同的引用方式来访问属性读方法. 如: "类对象1.属性1";
B. 如果存在同名属性写方法,则两者的数据类型必须一致;
C. 在全局类中不能定义属性读方法.
　
3. 属性写: 表明本方法为属性写入方法. 该属性除了可以在程序语句中被赋值,还可以在该类对象
变量的扩展属性表的"属性"列中被赋予初始值.
如果属性写方法为静态方法,所要求的定义格式:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 10/68

--- 第 11 页 ---
A. 必须未定义返回值;
B. 必须定义且只能定义两个参数,第一个参数的数据类型必须为属性写方法所处类本身,第二
个参数的数据类型不能为数组,该数据类型即为本属性被写入时 所需要的数据类型.
如果属性写方法不为静态方法,所要求的定义格式:
A. 必须未定义返回值;
B. 必须定义且只能定义一个参数,该参数的数据类型不能为数组,该数据类型即为本属性被写
入时所需要的数据类型.
注意:
A. 在程序中,必须以与变量相同的引用方式来访问属性写方法. 如: "类对象1.属性1 = 1";
B. 如果存在同名属性读方法,则两者的数据类型必须一致;
C. 在全局类中不能定义属性写方法.
　
4. 定义事件: 定义本类对象将会发送事件的名称及格式,此种方法必须满足以下格式要求:
A. 方法体必须为空;
B. 返回值数据类型必须为整数(安卓和服务器子平台无此限制);
C. 不能为静态方法.
　
5. 接收事件: 定义本类对象将会接收本类中成员变量对象所发送的事件,此种方法且必须满足以下
要求:
A. 返回值数据类型必须为整数(安卓和服务器子平台无此限制);
B. 不能为静态方法;
C. 方法名称格式必须为: 事件对象类名 + "_" + 欲接收事件名;
D. 方法的第1个参数的数据类型必须为欲接收其事件的事件对象类名;
E. 方法的第2个参数的数据类型必须为整数,用作接收"挂接事件"关键字调用所提供的"标记
值"参数值(非该方式挂接事件则此参数值固定为0);
F. 方法其余参数的数目及数据类型必须与欲接收事件的定义方法一致.
公开指定本方法是否公开.公开方法可以在所处类外部被访问,而非公开方法只能在本类或者其继承类中访
问.
参数表 定义本方法的所有参数
　
8. 程序语句
提供具体的方法实现语句代码.
A. 语法格式描述文本的规则:
语法格式描述文本为由以下运算符组合的一个或多个语法项构成,这些运算符的优先级按顺序从小到大递增:
| : 备选项(在多个项目中选择其中任意一个).
() : 分组项(提供一组备选项).
[] : 可选存在项(可以存在也可以不存在).
{} : 重复存在项(可以重复存在0到n次).
语法项分为字面文本项(用双引号括住)和语法替换项两种.
B. 语句行的语法格式描述文本:
语句: 赋值表达式 | 调用表达式
表达式: 一元表达式 | 表达式 二元操作符 表达式
一元表达式: 基本表达式 | 一元操作符 一元表达式
基本表达式: 操作数 | 类型强转表达式 | 对象成员访问表达式 | 数组成员访问表达式 | 调用表达式
操作数: 立即数 | 名称 | "(" 表达式 ")"
赋值表达式: (局部变量名称 | 所处方法参数名称 | 对象成员访问表达式 | 数组成员访问表达式) "=" 表达式
类型强转表达式: "(" 类型名称 ")" 一元表达式
对象成员访问表达式: 类成员名称 | 类访问名称 "." 类成员名称 | 基本表达式 "." 类成员名称 | "父对象" "." 父类成员名称 | 本对
象
数组成员访问表达式: 基本表达式 "[" 表达式 "]" { "[" 表达式 "]" }
调用表达式: 对象成员访问表达式 调用参数表 | 命令关键字名称 调用参数表
一元操作符: "-"
二元操作符: "&&" | "||" | "==" | "!=" | "<" | "<=" | ">" | ">=" | "属于" | "*" | "/" | "%" | "+" | "-"
调用参数表: "(" [ 表达式 { "," 表达式 } ] ")"
类型名称: 基本类型名称 | 类访问名称2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 11/68

--- 第 12 页 ---
基本类型名称: 字节 | 短整数 | 字符 | 整数 | 变整数 | 长整数 | 单精度小数 | 小数 | 逻辑型 | 文本型
类访问名称: 类的定义名称 | 类所处包名 "." 类的定义名称
　
9. 编译相关
1. 按需编译:
火山编译器实行的是按需编译模式,也就是说,凡是不可能被执行到的代码,一概不进行编译. 具体为:
从程序的启动位置开始,所有未在程序执行流程中的代码都将不会被编译.
2. 命令行编译:
火山系统(非免费版)支持以命令行格式进行编译,具体命令行格式为:
voldev_xxx.exe @compile 欲编译火山项目解决方案文件名 [/r] [/c] [/d]
参数说明:
/r: 是否强制重新编译
/c: 是否仅生成目标代码而不进行本地编译
/d: 是否生成调试版(不设置本选项则生成发布版)
编译成功进程返回值为0,否则返回-1.
 
10. 部件程序
在某些情况下,可能希望程序的功能实现源代码不公开但是又不影响最终编译,此时可以使用部件程序.
部件程序与普通程序的区别在于,部件程序可以将普通程序分为两个部分,一个是其公开接口部分,如被公开的类/方法等(可以通
过"@输出到部件"属性调节).,另一个是其功能实现部分,公开接口部分在系统程序编辑器中可以被阅读(不能修改),仅在编辑项目时
使用,功能实现部分则在编辑器中被隐藏不可见,仅在编译项目时使用,两者互不影响.
当根据普通程序生成其部件程序时,其中如存在名为"启动类"的类,将被自动忽略跳过(可以通过"@输出到部件"属性调节).
除了以上区别之外,部件程序与普通程序没有任何差异,所有可以使用普通程序的场合均可使用部件程序.
 
11. 火山".wsv"文本格式源程序
火山平台现在支持将源程序以Unicode文本格式保存(后缀为".wsv"),该文本源程序与通常的火山源程序(".v")相比有以下不同:
1. 保存格式为Unicode文本形式,可以直接使用文本编辑器查看;
2. 载入及编译速度比".v"格式较慢,且无法保存书签/调试断点之类信息.
文本程序数据分为完整程序数据和剪切程序数据两种,前者用作保存一个完整的火山程序数据,后者用作保存复制到剪贴板中的火山
程序数据片段.
 
火山文本格式源程序语法规则见下.
规则描述格式:
A. 规则描述中的名称如果以 xxx/xxx 格式提供,则分别为其中文和英文名称;
B. 规则描述中,中括号括住的名称表示该部分可以被省略.
 
1. 首非空行必须为文档格式和版本定义行(无论是完整程序数据还是剪切程序数据):
<火山程序/volprg 类型/type = 类型名称 版本/version = 版本号 />
类型名称: 提供当前火山程序文档的格式类型文本,目前支持的有: "通常" / "normal"
版本号: 目前最新版本号为 1
 
2. 各种类型成员的定义格式:
成员名称格式要求: 成员名称如果不为有效的单/全名称文本,就必须使用以双引号括住的转义字符串格式.
所有以花括号括住的代码块如果其中内容为空,则整个花括号代码块可以全部被省略.
类型 语法格式所支持系统
属性注释
包包/package
包名称 [属性
表]注释
折叠2必须为第一个成员定义而且只
能存在一个.
类 类/class 类
名称 [属性
表]公开
基础类必须位于文档顶层2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 12/68

--- 第 13 页 ---
{
    类定义体
}注释
折叠
折叠2
方法方
法/method
方法名称 [属
性表]
[参数表]
...
{
    子语句体
}公开
静态
定义事件
接收事件
属性读
属性写
类型
注释
返回值注释
折叠
折叠21. 参数表为所有参数的定义行
集合,如果存在必须顺序排列在
方法定义行的下面.
2. 必须位于类定义体中,剪切程
序数据中可以位于文档顶层.
参数参数/param
参数名称 [属
性表]类型
注释
折叠(仅限首
参数)
折叠2必须跟随在方法定义行后面,剪
切程序数据中可以位于文档顶
层.
常量常量/const
常量名称 [属
性表]公开(仅限类
成员常量)
类型
值
注释
折叠(仅限多
个连续常量
中的首常量)
折叠2必须位于类定义体(成员常量)
或方法子语句体(局部常量)中,
剪切程序数据中可以位于文档
顶层.
变量变量/var 变
量名称 [属性
表]公开(仅限类
成员常量)
静态
参考
类型
值
注释
折叠(仅限多
个连续变量
中的首变量)
折叠2必须位于类定义体(成员变量)
或方法子语句体(局部变量)中,
剪切程序数据中可以位于文档
顶层.
文档或类
注释/嵌
入行# [属性表]
注释/嵌入行
内容 必须位于文档顶层或类定义体
中.
注意:
如果注释/嵌入行内容以 '<'
字符开头,则无论该行是否具
有属性,都必须在内容前方添
加一个空属性表. 如: #
<abc 就必须使用 # <>
<abc 表达.
语句行 [属性表] 语
句行内容
{
    子语句体折叠 必须位于方法或另一语句的子
语句体中,剪切程序数据中可以
位于文档顶层.
注意,在以下几种情况下,无论该
行是否具有属性,都必须在内容2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 13/68

--- 第 14 页 ---
} 前方添加一个空属性表:
1. 语句行内容以 '<' 字符开
头;
2. 语句行内容以以下单词
(以空白字符和后方内容隔
开)开头: 包, package, 类,
class, 方法, method, 参数,
param, 常量, const, 变量,
var ;
3. 语句行内容为单个的 '{'
或 '}' 字符.
如: const int i 语句行必须
以 <> const int i 表达,
<123 语句行必须以 <>
<123 表达.
 
3. 属性表的定义格式:
<属性名称 [ = 属性值] ......>
属性表内容以一个或多个以空白字符分隔的名称和值对组成,其中可以使用换行符在多行中进行描述.
 
属性名称格式要求:
属性名称如果不为有效的单/全名称文本(可以以'@'字符引导),或者为与已有系统属性(见下面系统属性表)的中/英文名称相同
的非系统属性,必须使用以双引号括住的转义字符串格式.
 
属性值格式要求:
A. 如果当前属性为除开"值"以外的系统属性,则可以为以下几种格式:
1. 单/全名称文本;
2. 以下数据类型的有效值:
逻辑值. 如: 真 / 假
数值. 如: 123, 1.23, 0x123, -123, 1.23e3
3. 以双引号括住的转义字符串. 当属性值无法以前面几项描述时,必须以此格式描述,系统将取用该字符串转义后的字面文
本作为属性值. 譬如, 属性值 123a ,就必须以 "123a" 进行描述;
4. 如果没有提供属性值,则该属性的值默认为逻辑值真.
 
B. 如果当前属性为"值"系统属性或非系统属性,则可以为以下几种格式:
1. 单/全名称文本;
2. 以下数据类型的有效值:
数组. 如: { 1, 2, 3 }
逻辑值. 如: 真 / 假
文本. 如: "abc"
字符. 如: 'a'
数值. 如: 123, 1.23, 0x123, -123, 1.23e3
3. 以'@'字符开头的单/全名称文本(火山程序中用作引用本地名称值);
4. 以'@'字符开头的以双引号括住的转义字符串. 当属性值无法以前面几项描述时,必须以此格式描述,系统将取用该字符串
转义后的字面文本作为属性值. 譬如, 属性值 123a ,就必须以 @"123a" 进行描述.
5. 如果没有提供属性值,则该属性的值默认为无.
 
4. 系统属性表:
名称数据类
型可应用到成员 注释
类型 / type 文本型常量, 变量, 参数, 方法 提供
成员
的数2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 14/68

--- 第 15 页 ---
据类
型
公开 / public 逻辑型类, 方法, 成员常量, 成员变
量指定
成员
是否
被公
开
静态 / static 逻辑型方法, 变量指定
成员
是否
具
有"静
态"属
性
参考 / ref 逻辑型变量指定
成员
是否
具
有"参
考"属
性
定义事件 / event 逻辑型方法指定
方法
的类
别是
否
为"定
义事
件"
接收事件 / receiver 逻辑型方法指定
方法
的类
别是
否
为"接
收事
件"
属性读 / getter 逻辑型方法指定
方法
的类
别是
否
为"属
性读"
属性写 / setter 逻辑型方法指定
方法
的类
别是
否
为"属
性写"
基础类 / base_class 文本型类提供
类的
基础
类名
称
值 / value 文本型常量, 变量提供
常量
或变
量的
初始
值
注释 / explain 文本型包, 类, 常量, 变量, 参数,
方法提供
成员
的注
释.
如果2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 15/68

--- 第 16 页 ---
属性
表内
具有
多个
本属
性,将
会分
行组
合在
一起.
返回值注释 /
res_explain文本型方法提供
方法
的返
回值
注释.
如果
属性
表内
具有
多个
本属
性,将
会分
行组
合在
一起.
折叠 / collapsed 逻辑型类, 方法, 语句(有子语句
体), 常量/变量/参数表的
首成员指定
类或
方法
体,语
句的
子语
句体,
常量/
变量/
参数
表是
否被
折叠.
折叠2 / collapsed2 逻辑型包, 类, 常量, 变量, 参数,
方法.
以上成员要求存在多行属
性表或多行注释.指定
多行
属性
表或
多行
注释
是否
被折
叠
编辑时信息 / edit_info文本型包, 类, 常量, 变量, 参数,
方法.十六
进制
值列
表,用
作保
存成
员在
编辑
时的
相关
信息,
如被
调节
列宽
度等.
隐藏值属性 /
hidden_value_attr文本型包, 类, 常量, 变量, 参数,
方法.整数
值列
表,用
作保
存所2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 16/68

--- 第 17 页 ---
有值
被隐
藏的
用户
属性
索引
位置
 
5. 样例:
文本程序内容:
<火山程序 类型 = "通常" 版本 = 1 />
包 火山.程序 <@视窗.外部文件 = "c:\\abc.cpp" "测试属性>" = @"123a">
# 注释行1
# @ 嵌入行
# <> <abc
类 测试类1 <"公开" 公开 基础类 = 我的基础类 "位 置" = 1 "#属性1" = 2
        注释 = "注释行1"
        注释 = "注释行2\n注释行3">
{
    变量 变量1
    变量 变量2 <值 = { "a", { "b", "c" }, "d" } 属性1 = ' ' 属性2 = "abc\t" 类型 = "文本型 []">
    变量 变量3 <值 = ' ' 类型 = 字符>
    方法 "// 方法1"
    方法 方法2 <折叠2 静态 方法属性 = "abc" 类型 = 整数
            返回值注释 = "注释1"
            返回值注释 = "注释2\n注释3">
    参数 参数1 <类型 = "整数 []" 参数属性1 = 1 注释 = "这是我的参数">
    参数 参数2 <类型 = 字节集 参数属性2 = 2>
    {
        @ 嵌入语句行
        参数1.信息框 ("abc") // 注释信息
        变量 局部变量1 <参考 注释="这是我的\n变量">
        常量 局部常量 <类型 = 文本型 值 = @"123 程序">
        <> 包 ...
        <> 类 ...
        <> 变量 ...
        <> 常量 ...
        <> 参数 ...
        <> 方法 ...
        <> {
        我的函数 ()
        <> }
        <> <...
        <> #...
        如果 (局部变量1 == 1)
        {
            我的函数 ()
        }
        <折叠> 循环 ()
        {
            参数1.信息框 ("abc") // 注释信息
        }
    }
}
 
对应的火山程序内容:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 17/68

--- 第 18 页 ---
2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 18/68

--- 第 19 页 ---
 
四. 火山平台关键字表:
1. 基本数据类型关键字:
名称输入字
1解释
字节 sbyte字节(有符号)基本数据类型,有效值范围从-128到127,占用1个字节空间.
特例: 在服务器子平台中,本数据类型无符号,即有效值范围从0到255.
短整数 short短整数基本数据类型,有效值范围从-32768到32767,占用2个字节空间.
字符 wchar宽字符基本数据类型,有效值范围从0到65535,占用2个字节空间.
特例: 在服务器子平台中,本数据类型等同于32位整数,占用4个字节空间,有效值范围从-2147483648到
2147483647.
整数 int整数基本数据类型,有效值范围从-2147483648到2147483647,占用4个字节空间.
特例: 在编译64位服务器子平台程序时,有效值范围等同于长整数,占用8个字节空间. 在服务器子平台中如欲限
定使用32位整数请使用"字符"数据类型等同替代.
变整数 vint变整数基本数据类型,在编译64位视窗子平台程序时等同于长整数类型,编译32位视窗子平台程序时等同于整数
类型,在其它情况下均等同于整数类型.
由于变整数的数据尺寸等于当前目的cpu的位数,因此常用作表达c/c++目的程序里面的指针值.
长整数 long长整数基本数据类型,有效值范围从-9223372036854774808到9223372036854774807,占用8个字节空间.
单精度小数 float单精度小数基本数据类型,有效值范围从-3.40E+38到3.40E+38,占用4个字节空间.
小数 double双精度小数基本数据类型,有效值范围从-1.7E+308到1.7E+308,占用8个字节空间.
逻辑型 bool逻辑型基本数据类型,有效值为真/假.
文本型 string文本型基本数据类型,用作记录一段字符串文本.
模板类型1 ->
模板类型8　 模板数据类型,只能在模板基础类中使用,其所对应的真实数据类型需要由模板实现类来提供.
　
各种数值数据类型的容量从小到大排列:
字节 < 短整数 < 字符 < 整数 < 长整数 < 小数
 
数值计算表达式的最终数据类型确定方法:
为数值计算表达式中具有最大容量的数值数据类型
 
2. 名称关键字:
名称输入字
1解释
对象名称关键字:
本对象 this 用作在类成员方法中代表所处类的对象本身
父对象 super用作在类成员方法中代表所处类的父对象,注意本关键字只能在句点操作符的第一个参数位置处使用.
立即数名称关键字:
真 true用作代表逻辑值真
假 false用作代表逻辑值假
空对象 null用作代表空对象,可以匹配所有非常量类的类数据类型以及文本型.
　
3. 操作符关键字:
名称 特性优先
级输入字1首/左侧参数 右侧参数 解释
.[可扩
展]1 　欲访问类/类对
象名称欲访问类成员
名称句点分隔操作符,用作分隔类/类对象与其成员名称.
[] [只能
为参
数]1 　 欲访问数组数
据[整数] 欲访问
数组成员索引
值数组成员访问操作符,用作访问所指定索引位置处的数组成员.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 19/68

--- 第 20 页 ---
[可扩
展]数组成员访问索引值从0开始,有效范围为从0到数组成员数-1,分
别对应数组的第一个和最后一个成员.
-[只能
为参
数]
[右结
合]2 　[数值] 欲取反
的数值　 算术取反操作符,用作返回将指定数值进行符号翻转后的结果值.
强制类型转
换[只能
为参
数]
[右结
合]2 　欲转换到数据
类型名称欲转换数据类
型的数据类型强转操作符,用作将数据转换到所指定的数据类型.
调用格式为: (欲强行转换到的数据类型)欲转换类型的数据
允许以下数据类型之间进行强制转换:
1. "空对象"可以强制转换到任何非常量类的类数据类型或文本
型;
2. 数值数据类型之间可以强行转换;
3. 常量类可以强制转换到其所对应的基本数据类型,非立即数
基本数据类型数据可以强制转换到对应的常量类;
4. 类数据类型只能强制转换到其直接/间接基础类或继承类.
*[只能
为参
数]
[可扩
展]3 　 [数值] 被乘数[数值] 乘数 算术相乘操作符,用作计算两个数值的相乘结果.
/[只能
为参
数]
[可扩
展]3 　
[数值] 被除数[数值] 除数算术相除操作符,用作计算两个数值的相除结果.
%[只能
为参
数]3 　 算术模除操作符,用作计算两个整数的相除后的余数.
+[只能
为参
数]
[可扩
展]4 　[数值/文本] 被
加数[数值/文本] 加
数相加操作符,用作计算两个数值/文本的相加结果.
-[只能
为参
数]
[可扩
展]4 　 [数值] 被减数[数值] 减数 算术相减操作符,用作计算两个数值的相减结果.
<=[只能
为参
数]5 　
[数值] 被比较
数值[数值] 比较数
值小于等于逻辑比较操作符,当左侧参数小于等于右侧参数时返回
真.
>=[只能
为参
数]5 　大于等于逻辑比较操作符,当左侧参数大于等于右侧参数时返回
真.
<[只能
为参
数]5 　 小于逻辑比较操作符,当左侧参数小于右侧参数时返回真.
>[只能
为参
数]5 　 大于逻辑比较操作符,当左侧参数大于等于右侧参数时返回真.
属于[只能
为参
数]5 instanceof[对象] 被检查
对象用作检查的类
名返回左侧对象是否为右侧类或者其直接/间接继承类的实例对象,
即左侧对象能否被安全转换到右侧类数据类型.
注意: 左侧对象的数据类型必须为类,而且必须与右侧类之间存在
继承/被继承关系或者等于右侧类.
== [只能
为参
数]6 　 [数值/逻辑型/
文本/数组/对
象] 被比较值[数值/逻辑型/
文本/数组/对
象]  比较值等于/不等于逻辑比较操作符,当左侧参数等于/不等于右侧参数时
返回真.
注意:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 20/68

--- 第 21 页 ---
1. 对于数组对象,唯一能够与其进行比较的是"空对象";
2. 对于文本数据,将比较两者实际文本内容是否相同(区分字母
大小写),也可以将文本数据与"空对象"进行比较;
3. 类对象比较仅比较两者是否指向同一个对象实例,而不会去
对比两者所指向对象实例中存放的数据内容是否相同(火山安
卓平台比较两个对象是否参考到同一对象实例,火山视窗平台
比较两个对象的所处地址是否相同).
注意,在火山视窗平台中:
A. 如欲比较两个对象的数据内容是否相同,可以使用系统类
库中所提供的"对象内容是否相同"全局方法;
B. "字节集类"是一个特例,该类的对象之间进行比较将比较
两者的实际数据内容是否相同.!=[只能
为参
数]6 　
&&[只能
为参
数]
[可扩
展]7 且
[逻辑型] 逻辑
值一[逻辑型] 逻辑
值二并且逻辑操作符,当左侧参数和右侧参数均为逻辑值真时返回真.
||[只能
为参
数]8 或或者逻辑操作符,当左侧参数和右侧参数其中任意一个为逻辑值真
时返回真.
=[右结
合]9 　赋值到的变量/
可写属性用作提供赋值
用数据赋值操作符,将右侧参数的值赋予给左侧参数所指定的变量/可写
属性.
注释:
1. 表格中的优先级值越小表明该操作符优先级越高;
2. "特性"列中的"[只能为参数]"表示该操作符只能位于语句参数中; "[右结合]"表示 操作符参数为右结合,"[可扩展]"表明右侧参数可
以被扩展多个.
　
4. 命令关键字:
名称 特性 输入字1参数
类型参数名称 参数解释 返回值 解释
循环类关键字:
判断循环[需求语
句体]while逻辑
型判断值当此参数值为真时进入循环体,
为假时将跳过循环体.　本命令根据提供的逻辑参数的值,来决定是
否进入循环体.如果提供的逻辑参数值为真,
程序顺序执行下一条语句进入循环体,否则
跳转到本命令循环体的下一条语句处.
循环 [需求语
句体]
[隐藏空
参数表]for
整数[可省略] 变量
起始值定义循环变量的起始数值.
如果被省略,默认值为0.　 本命令将利用变量对循环体内的命令进行循
环执行.第一次执行此命令时将使用"变量起
始值"参数初始化"循环变量"参数所指定的
变量.每次(包括第一次)执行到此命令处都将
判断循环变量内的值是否已经到达"变量目
标值"参数所指定的值,如已等于或超过,则跳
转到循环体的下一条语句处,否则进入循环
体.整数[可省略] 变量
目标值定义循环变量的目标数值,在循
环首部如果发现循环变量值已
到达此目标值时(递增值小于0时
小于等于目标值,递增值大于0时
大于等于目标值)将跳出循环 而
不再进入循环体.
如果被省略,默认值为1.
整数[可省略][需求
可写变量] 循
环变量本整数型变量将用作控制循环
执行次数,在循环尾部将自动递
增或递减该变量内的数值(由变
量递增值参数决定).循环体中的
用户程序可以直接取用此变量
中的值.
如果被省略,将自动使用内部临
时变量.
整数[可省略][需求
立即数] 变量
递增值每次执行到循环尾部时都将把
此值加入到循环变量中去,此值
可为正数或负数,如为正数则递
增,为负数则递减.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 21/68

--- 第 22 页 ---
注意: 必须为本参数提供非0整
数立即值,以便编译器建立循环
结束条件.
如果被省略,则默认值为1.
流程控制类关键字:
如果[需求语
句体]if逻辑
型判断条件本条件值的结果决定下一步程
序执行位置　本命令根据所提供逻辑参数的值,来决定是
否改变程序的执行位置.如果提供的逻辑参
数值为真,程序继续顺序向下执行进入本命
令的子语句体,然后跳过本命令后续所有
的"否则"命令,为假则将跳过本命令的子语
句体.
否则[需求语
句体]
[隐藏空
参数表]elseif逻辑
型判断条件本条件值的结果决定下一步程
序执行位置. 注意: 本参数可忽
略以不提供,但是此时不能再后
续跟随其它的"否则"语句.　本命令只能放在"如果"或其它"否则"命令的
后面,根据所提供逻辑参数的值,来决定是否
改变程序的执行位置.如果提供的逻辑参数
值为真,程序继续顺序向下执行进入本命令
的子语句体,然后跳过本命令后续所有的"否
则"命令,为假则将跳过本命令的子语句体.
到循环尾[隐藏空
参数表]continue　 　 　 　本命令转移当前程序执行位置到当前所处循
环体的尾部
跳出循环[隐藏空
参数表]break 　 　 　 　本命令转移当前程序执行位置到当前所处循
环体尾部的下一条语句处
返回[隐藏空
参数表]return　[可省略] 返回
值当所处方法定义有非空返回值
数据类型时,必须提供返回到调
用方的具体值,否则必须省略掉
本参数,即两者必须对应.　本命令转移当前程序执行位置到调用本语句
所处方法的下一条语句处,并可根据需要返
回一个值到调用语句处.
运算类关键字:
取反 　 　逻辑
型待取反逻辑值提供将其反转的逻辑值 逻辑型将所指定逻辑值进行反转,返回反转后的结
果.
位取反 　 　所有
整数
型待取反整数值提供将其所有位反转的整数值对应整
数型将所指定整数值的每一位进行反转,返回反
转后的结果.
位与 　 　所有
整数
型整数参数一提供用作位操作的整数参数值
一对应整
数型将参数1的每一位与参数2的对应位进行与
操作,返回运算后的结果. 所有
整数
型整数参数二提供用作位操作的整数参数值
二
位或 　 　
同"位与"将参数1的每一位与参数2的对应位进行或
操作,返回运算后的结果.
位异或 　 　将参数1的每一位与参数2的对应位进行异
或操作,返回运算后的结果.
位左移 　 　所有
整数
型待位移整数值提供被位移的整数值
对应整
数型　将参数1的每一位向左无符号移动参数2所
指定的数目,返回运算后的结果. 所有
整数
型位移数目 提供进行位移的位数
位右移 　 　 同"位左移"将参数1的每一位向右无符号移动参数2所
指定的数目,返回运算后的结果.
编译时处理关键字:
编译出错　 cerror　 　 　 　仅在编译程序时起作用,用作告知编译器发
现了编译错误并停止编译.
调试类关键字:
调试检查　 assert逻辑
型检查值在调试版中,当此参数值为假时,
程序将中断执行并报错.
　本命令的调用语句仅在程序所编译的调试版
本中存在,在程序所编译的发布版中将被忽
略不编译.
在调试版中,当所提供的参数值为假时,程序
将在此处中断执行并报错.文本
型[可省略] 检查
失败信息指定当检查失败时(检查值参数
为假)所输出的信息.如果被省略,
则默认为空文本.
为调试版　 　 　 　 　 逻辑型返回当前所编译程序是否为调试版本
其它:
挂接事件　 　
对象欲挂接其事件
的对象提供欲将其所定义事件挂接到
当前类对应事件接收方法的对
象　 将指定对象所支持的事件挂接到当前类对象
中的对应事件接收方法上. 本命令仅用作动
态挂接对象事件,类及类中定义的成员对象2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 22/68

--- 第 23 页 ---
变量除非明确指定不自动挂接,均会自动挂
接事件.
整数标记值用作提供欲挂接其事件的对象
所对应的标记值,由用户自行定
义.该值将被原值发送给事件接
收方法,用作区分具体的事件来
源.如果被省略,则默认为0.
取消事件
挂接　 　 对象欲取消其事件
挂接的对象提供欲取消将其所定义事件挂
接到当前类对应事件接收方法
的对象　不再将指定对象所支持的事件挂接到当前类
对象中的对应事件接收方法上.
无论是自动挂接事件还是手动调用挂接事件
关键字挂接的对象,均可以调用本关键字取
消其事件挂接. 事件挂接一旦取消,该对象的
事件将不会再被接收到.
注释:
1. "特性"列中的"[需求语句体]"表示该命令需要携带一个子语句体,"[隐藏空参数表]"表示当该命令的参数表为空时将被省略掉不显示;
2. "参数表"列中的"[可省略]"表示该参数可以被省略不提供;"[需求可写变量]"表示必须为该参数提供一个可写入变量或参数;"[需求立
即数]"表示必须为该参数提供一个立即数.
　
五. 扩展属性表:
1. 程序成员的所有属性由基本属性和扩展属性两部分组成;
　
2. 扩展属性有以下几种:
A. 类中定义的"属性变量"扩展属性值为真的成员变量;
B. 类中定义的所有属性写方法;
C. 所设置扩展属性可以是属性的子属性,如"可读属性1.可读属性2.可写属性3",前面的父属性必须均为可读取属性,最后一个属性必
须为可写入属性;
D. 火山系统定义的全局扩展属性(属性名以'@'开头);
E. 项目插件定义的项目扩展属性(属性名以'@'开头).
　
3. 属性值可以引用程序中定义的常量或者提供对应数据类型的立即数. 注意:
A. 属性数据类型为常量类时也可以直接提供对应数据类型的立即 数(下面C条例外). 譬如,假设属性A的数据类型为"可绘制资源"(安
卓平台项目下提供),那么属性值除了可以为其提供一个同样数据类型的常量以外,还可以直接为其提供一个可绘制资源文件名字符
串;
B. 如果属性指定只能从其提供的选择列表中选择属性值(譬如下面的"@列表选择项"),则属性值只能从这些列表项中选择;
C. 如果属性数据类型为常量类且该类中定义有常量成员,则属性值只能从这些常量成员中选择.
　
4. 火山系统定义的全局扩展属性表:
名称 数据类型 相关特性 应用场合 解释
@输出名 文本型 　任何定义
型程序成
员本属性可以应用于任何定义型成员,用作指定其编译后的输出名称(不使用本属
性进行指定则编译器会自动为它生成一个输出名称),编译器会保证其它所自动
生成的输出名称不会与此指定名发生冲突.
所提供输出名称如果以"@sn<startup_package>"开头(仅限包定义成员),表明
为引用启动包的名称; 以'@'字符开头,表明为引用全局/项目约定名称.
在视窗平台中,如果本属性用在DLL项目的被输出方法上,且属性值的格式为"名
称_整数值_"或"名称_整数值n_",则下划线中的整数值用作指定方法输出序号,如
果为第二种格式(附加了字符'n'),则表示指定了"NONAME"输出标志.
@输出到部件逻辑型  任何非包
定义型程
序成员本属性可以应用于类/方法/成员常量/成员变量上,用作指定在生成其所处文档
的部件接口程序时是否将其强制输出或不输出.
如果不指定本属性,则系统将仅输出所有公开或默认公开(属性或事件定义方法)
的定义型成员(不包含启动类).
如果在系统模块类(其所处源文件位于系统模块安装目录下)上设置值为假的本
属性,表示该类不支持直接在部件接口中使用,如确需使用请自行定义一个新类
来继承它,然后覆写(转接调用原方法)所欲使用的相关方法后改为使用该新继承
类即可.
@自动挂接事
件逻辑型 　类或者类
的非静态
成员变量本属性可以应用于类或数据类型为类的非静态成员变量上,用作指定是否自动将
该类或该类对象支持的所有事件挂接到本类上.如果没有指定本属性,默认值为
真.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 23/68

--- 第 24 页 ---
@属性变量 逻辑型 　非静态类
成员变量本属性可以应用于非静态的类成员变量(数据类型只能是基本数据类型或常量类
数据类型)上,用作指定该成员变量是否为其所处类的属性型成员.
@接口 逻辑型  非静态类
成员变量本属性可以应用于类(包括别名类)的非静态成员变量上,用作指定该变量的数据
类型为其所处类已实现接口的数据类型,该接口数据类型必须为"本地类"火山类
或"本地类"别名类或"本地参考类型"别名类(如java或go本地语言的interface),
变量所处类在本地语言层面必须能直接转换到此接口本地数据类型.
应用了本属性的成员变量为"假变量",编译时不会为其生成对应本地变量的定义
代码,因此只能以只读方式访问. 在编译生成所处类的本地定义代码时,会自动加
上相关接口的引用代码.
@允许未初始
化访问逻辑型  局部变量本属性可以应用于局部参考变量上,用作指定编译时如果发现其在访问前未被初
始化是否提示警告信息.
@值细节类型整数 　类或者类
的属性写
成员(属性
型成员变
量或属性
写方法)当应用于类时,指定该类数据类型值的细节类型; 当应用于类的属性型成员时,指
定该属性值的细节类型.
当属性数据类型为整数时,可以为以下选择项之一:
1. 颜色: 为RGB十六进制颜色数值;
2. 颜色支持透明: 为RGB十六进制颜色数值.支持设置为透明颜色值(RGB值
为0xFFFFFF,Alpha值根据目标本地语言不同而不同,譬如java为0,c++为
0xFF);
3. 颜色支持默认: 为RGB十六进制颜色数值.支持设置为默认颜色值(RGB值
为0,Alpha值根据目标本地语言不同而不同,譬如java为0,c++为0xFF).
当属性数据类型为文本型时,可以为以下选择项之一:
1. 文件名: 为欲打开的文件名(可以通过"@附加文本"属性提供其过滤器文
本);
2. 保存用文件名: 为欲保存到的文件名(可以通过"@附加文本"属性提供其过
滤器文本);
3. 字体: 为字体信息,格式为: "字体名, 字体尺寸, 是否为粗体, 是否为斜体",
其中"是否"字段,用1代表真,0代表假;
4. 定宽字体: 与"字体"类型不同的是仅限定宽字体;
5. 自定义: 允许通过调用外部DLL中的输出函数来建立属性值文本,此时需要
通过"@附加文本"属性提供当用户单击值列右侧按钮时所调用的外部dll文件
及其中的输出函数名;
6. 自定义整数: 允许通过调用外部DLL中的输出函数来建立属性值整数文本,
此时需要通过"@附加文本"属性提供当用户单击值列右侧按钮时所调用的外
部dll文件及其中的输出函数名.
@列表选择项文本型 　类的属性
写成员(属
性型成员
变量或属
性写方法)本属性提供一系列备选列表文本,各个备选文本之间使用换行符分隔,用作在输
入类的初始值/类属性成员的属性值时直接选择输入.
本属性的有效条件如下:
1. 所对应成员必须未指定细节类型;
2. 所对应成员如果为类的属性型成员,仅当该成员的数据类型是整数/文本型
或整数/文本型的常量类时有效.
当成员的数据类型为整数时,属性值在编译时将被自动转换为以0开始的整数索
引值.
@附加文本 文本型 　 类的属性
写成员(属
性型成员
变量或属
性写方法)本属性用作提供附加文本信息:
1. 当所对应成员细节类型为"文件名"或"保存用文件名"时,用作提供具体文
件名过滤器文本: 该文本必须以'|'分隔和结束,类似以下格式: "JPG文件
(*.jpg;*.jpeg)|*.jpg;*.jpeg|GIF动画(*.gif)|*.gif|",尾部会自动加上能匹配所有
文件的过滤器;
2. 当所对应成员细节类型为"自定义"或"自定义整数"时,用作顺序提供所需
调用的64位外部DLL文件名 + 32位外部DLL文件名 + 该DLL中的输出函数
名 + 相关用户自定义数值,DLL文件名均相对当前源文件所处目录,四者之间
使用换行符分隔,其中用户自定义数值部分可以省略(默认为0).
当用户单击值列右侧的按钮时,IDE即自动调用该输出函数以获得最新的值
文本.
该输出函数的原型为:
const TCHAR* (WINAPI *PA_PROP_BTN_CLICKED) (const TCHAR*
szPropertyCurrentValue, const HWND hParentWnd, const
UINT_P upUserData);
该函数用作处理值列右侧按钮单击事件,各参数及返回值的意义为:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 24/68

--- 第 25 页 ---
szPropertyCurrentValue: 提供当前属性文本内容
hParentWnd: 父窗口句柄,必定不为NULL.
upUserData: 本属性值中所提供的用户自定义数值.
返回NULL表示当前属性文本内容未被修改,否则返回修改后的属性文本内
容(调用方必须立即将其复制保存,其可能会在后续操作中被改变或无效).
如果细节类型为"自定义整数",所返回的文本内容必须为有效的十进制或
十六进制(以"0x"开头)整数文本.
@设计时隐藏逻辑型  类的属性
成员(属性
型成员变
量或属性
读/写方法)指定对应的类属性在相关设计器中是否隐藏.类的属性读/写方法只要有任一个
被隐藏,则两者同时被隐藏.
@外部包 文本型[允许多设置
项]包本属性只能应用于包定义成员上,用作指定一个或多个在本包定义成员所处源文
件内优先查询的外部包名称(多个包名之间使用逗号或换行符分隔).
当程序中引用到某个未明确指定其所处包的类名时(即该类名不为全名称),将按
照如下规则进行顺序搜寻匹配:
1. 首先查找该类名引用程序位置所处的包中是否存在该名称的类,如找到则
使用该类;
2. 然后找到该类名引用程序位置所处源文件首的包定义成员,检查该成员中
是否定义有本属性,如有则读出属性值中指定的所有外部包名列表,在此包名
列表中查找所有该名称的类.如果只找到一个,则使用该类,找到多个则报错;
3. 最后查找所有剩余的包,未找到该名称的类则报错,找到多个也报错.如果只
找到一个,则使用该类.
@允许包名不
同逻辑型  包本属性仅当目标本地语言为GO时有作用,其它情况下将被忽略. 本属性只能应用
于包定义成员上.
由于GO禁止包与包之间存在交叉引用,火山编译器规定同一模块中的包名必须
相同,但是在某些情况下可能希望存在不同的包名,此时可以使用本属性跳过此
限制.
使用本属性务必小心,不要导致和其它不同名称的包之间形成交叉引用,否则GO
本地编译器会报错.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 25/68

--- 第 26 页 ---
@常量类 整数 　 类本属性只能应用于类,用作指定该类是否为常量类及其所对应的基本数据类型.
可以为以下选择项之一,用作指定其所对应的基本数据类型:
1. 字节;
2. 短整数;
3. 字符;
4. 整数;
5. 变整数
6. 长整数;
7. 单精度小数;
8. 小数;
9. 逻辑型;
10. 文本型;
11. 文本到ID(常量初始值所对应的数据类型是文本型,但其它场合所对应的
数据类型为整数型,由编译器进行特定处理,相关实例请参见安卓开发平台的
系统类"资源"的说明)
常量类特点及注意事项:
1. 常量类用作建立对应某基本数据类型数据的特定类,该类中只允许定义数
据类型为该类的常量成员.如果类中所定义常量成员的数据类型为空,则其数
据类型会自动默认为所处常量类;
2. 如果存在类的继承,常量类的基础类只能是常量类(两者所对应的基本数据
类型必须一致),非常量类的基础类只能是非常量类,两者不能混用;
3. 数据类型为常量类的局部变量在访问前必须首先明确赋值;
4. 数据类型为常量类的常量/变量的初始值可以为常量类所对应的基本数据
类型立即数;
5. 常量类数据类型不能与其所对应的基本数据类型匹配,但是可以强制转换
到所对应的基本数据类型.
@类用途 整数  类本属性只能应用于类定义成员上,用作指定该类所允许的具体用途. 可以为以下
选择项之一:
1. 通常: 作为通常的数据类型使用,支持数据类型的所有用途. 此为类的默认
用途;
2. 禁止创建对象: 本类型等同于定义了值为真的"@禁止创建对象"属性,不允
许定义常量/变量("参考"属性为真的变量/数组变量不在限制之内)的数据类
型. 本用途一般在不能直接定义而需要通过调用方法间接创建其实例的类上
使用;
3. 定义嵌入参数类型: 不允许定义除嵌入式方法参数之外成员的数据类型.
本用途一般在"假"别名类(即其别名没有对应或没有正确对应相应的本地类)
上使用."假"别名类一般用作其它别名类的"假"基础类,用作约束数据类型为
此类的方法参数只能接收其继承类对象;
4. 访问静态成员: 只能在语句中用作访问类中的静态/常量成员,不允许用作
定义任何成员的数据类型,不允许用作其它类的基础类,不允许具有基础类,类
中只能存在静态/常量成员. 本用途用作实现类似"命名空间"的作用,以分类归
纳一系列的静态/常量成员,并不作为数据类型使用.
@别名 文本型 　 类本属性只能应用于类定义成员上,表明该类为别名类.
别名类用作直接封装所指定的目标语言本地类,在程序中使用别名类等于直接使
用所对应的本地类,其特性如下:
1. 别名类如存在基础类,必须也是别名类,且用户必须自行保证该基础别名类
所封装的本地类为本别名类所封装本地类的基础类;
2. 别名类中只允许定义常量/变量/静态方法成员;
3. 所定义别名类中的成员变量如果不为接口声明假变量,则必须指定有输出
名,该输出名与目标语言本地类中对应成员变量的名称相同,仅用作访问时使
用,编译器不会生成该变量的定义和初始化代码,因此该变量也被称为"假变
量". 需要注意的是: 在服务器子平台中,由于GO语言的特点,访问别名类中的
静态假变量时,会自动改用该别名类的包名而不是其全名;
4. 如果允许该别名类创建对象,所封装的本地类必须提供有默认无参数构造
方法(仅火山安卓平台需要);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 26/68

--- 第 27 页 ---
5. 别名类可以为其它非别名类的基础类,支持使用类似"ArrayList<E>"这样
的本地模板类名,如果当前类同时为模板基础类,支持在其中使用火山模板数
据类型;
6. 支持在名称首部使用如下嵌入替换符: @pkg<包名称>、@an<约定名称
>、@sn<current_package>、@sn<startup_package>;
7. 如果用在模板基础类中,可以在别名中使用"@dt"内嵌文本引用模板类型,
如: "@dt<模板类型1>", "@dt<模板类型1, n>"等.
@别名类型 整数  类本属性只能应用于类定义成员上,用作与"@别名"属性共同使用来进一步表明别
名类的具体类型,可以为以下选择项之一:
1. 火山类: 表明所指定别名类为实现了火山对象接口要求的本地类(java目标
语言本地类均符合此要求,go目标语言本地类需要实现IVolObject接
口,C++目标语言本地类需要从CVolObject类继承),可以视作火山对象类等
同使用,如果别名类未定义本属性,此为其默认类型;
2. 本地类: 表明所指定别名类对应目标语言的未实现火山对象接口要求的复
合数据类型(如java和c++的class,go的struct等),且该数据类型对象有自行
初始化构造的能力. 此种本地类称为"别名本地类";
3. 本地结构: 表明所指定别名类对应目标语言的未实现火山对象接口要求的
复合数据类型(如c++的struct),且该数据类型对象没有自行初始化构造的能
力;
4. 本地整数基本类型: 表明所指定别名类对应目标语言的整数基本数据类型
(如无符号整数之类). 如果为此类型,必须同时提供"有效值范围"属性以指定
该类型整数值的有效值范围. 本类型与火山基本整数数据类型(如整数/短整
数/长整数等)等同方式使用;
5. 本地值类型: 表明所指定别名类对应目标语言的值数据类型. "火山类"/"本
地类"/"本地结构"在目标本地语言中实现时均优先以参考或指针的方式定义
和传递数据,而本类型必定不以参考或指针方式定义或传递数据. 本类型可以
定义具有本地初始化值的常量;
6. 本地参考类型: 表明所指定别名类对应目标语言的参考或指针型数据类型,
如java的数组,c++的指针(注意不支持c++的参考),go的指针和interface等.
凡是以此别名类作为数据类型的变量,自动具有"参考"属性.
@有效值范围文本型  类本属性只能应用于类定义成员上,该类上必须定义了属性值为"本地整数基本类
型"的"@别名类型"属性,用作辅助说明该类型整数值的有效值范围.
属性值为使用逗号分隔的两个整数值文本,分别代表该整数值类型允许的最小和
最大有效值(支持使用以"0x"开头的十六进制值),如果其中某个未提供,则说明没
有限制.
如: "0, 65535"表示最小值为0,最大值为65535; ", 0xFFFF"表示最小值不限制,
最大值为65535; "0"表示最小值为0,最大值不限制; ""表示最小和最大值均不限
制.
@全局类 逻辑型 　 类本属性只能应用于类定义成员上,用作为指定当前类为全局类.
全局类中的所有静态公开方法在外部访问时都可以省略其类名指定(嵌入行语句
中除外),此类方法被称为"全局方法".
@本地类 文本型  类本属性只能应用于类定义成员上,用作指定当前类为本地类. 该类编译到目的代
码时将不附加任何火山对象类的额外信息,可以用作和本地API交互时使用.
定义了本属性的类称为"火山程序本地类",其具有以下特点和要求:
1. 不能是别名类或常量类,不能具有基础类,亦无默认基础类;
2. 类中不能定义数据类型为通常火山程序类的非参考成员变量,不能定义事
件定义/事件接收/虚拟方法;
3. 在服务器子平台中类中所有对象成员变量的数据将使用实例而不是参考
(除非明确指定了"参考"属性),不支持定义类初始化方法,不能在类定义表上使
用属性. 非静态成员变量仅支持单维数组数据类型,且不支持设置 其初始值.
@模板基础类逻辑型 　 类 本属性只能应用于类定义成员上,用作指定当前类为模板基础类.
模板基础类不能同时为常量类或模板实现类,模板基础类的基础类可以也为其它
模板基础类.
模板基础类只能用作模板实现类或其它模板基础类的基础类,或者在该类内部使
用,除此之外不能在其它任何场合使用,只有在模板基础类中才能使用模板数据
类型.
在模板基础类中,在以下位置可以使用模板数据类型:
1. 所有可以使用数据类型的位置;2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 27/68

--- 第 28 页 ---
2. 模板基础类的"@外部基础类"属性值;
3. 模板基础类的"@别名"属性值;
4. 模板基础类的基础类属性.
需要注意的是:
1. 由于模板基础类中的内容会被整体复制到模板实现类中然后进行模板数
据类型替换,所以模板基础类中的代码不要去访问其所在包中的非公开类,因
为其实际编译位置是位于模板实现类内,而模板实现类不见得会与模板基础
类位于同一个包中;
2. 同样的原因,在模板基础类中引用外部本地类名(譬如Java类)时,需要使用
具有多个单名称的全名称.
@模板实现类文本型 　 类本属性只能应用于类定义成员上,用作指定当前类为模板实现类.
模板实现类不能同时为常量类或模板基础类,模板实现类的基础类必须为模板基
础类.
本属性值用作为模板基础类中所使用到的所有模板数据类型顺序提供对应的实
际替换数据类型(从模板类型1开始),多个替换数据类型之间用逗号或换行符分
隔.
模板实现类实现模板基础类的具体算法为:
1. 首先将模板基础类中的所有内容添加到模板实现类的内容尾部,然后将其
中所有使用了模板数据类型的位置用本属性值中提供的对应替换数据类型进
行替换,所有使用了模板基础类本身的位置使用模板实现类替换;
2. 然后将模板基础类的基础类设置为本模板实现类的基础类,将模板基础类
的所有属性添加到本模板实现类的属性表中(跳过所有当前在模板实现类中
已经存在的);
3. 如果模板基础类的基础类仍然为模板基础类,则跳到步骤1重复执行;
4. 对所有从模板基础类中添加进来的"类_初始化"和"类_清理"方法进行处理,
确保其能够被自动执行且执行顺序正确.
@默认基础类逻辑型 　 类本属性只能应用于类定义成员上,当其它类(不包括常量类)没有指定基础类时,将
使用该类作为其它类的默认基础类.
注意:
1. 整个应用程序中只允许一个类被定义为默认基础类;
2. 被定义为默认基础类的类不允许定义有基础类;
3. 被定义为默认基础类的类不允许为常量类;
4. 必须确保所定义的默认基础类也为所有外部本地类的实际基础类;
5. 必须确保所定义的默认基础类定义有无参数构造方法.
@禁止创建对
象逻辑型 　 类本属性只能应用于类定义成员上,用作指定本类不允许用作定义常量/变量("参
考"属性为真的变量/数组变量不在限制之内)的数据类型.
注: 建议改用属性值为"禁止创建对象"的"类用途"属性,两者效果一致.
@禁止静态 逻辑型 　 类本属性只能应用于类,用作指定是否允许在程序中定义该类及其所有继承类的静
态或静态参考变量.
@禁止继承 逻辑型 　 类本属性只能应用于类定义成员上,用作指定是否不允许本类作为其它类的基础
类.
注意有以下特例:
1. 在一个别名类上设置此属性并不能阻止它成为其它别名类的基础类;
2. 在一个模板基础类上设置此属性并不能阻止它成为其它模板基础类/模板
实现类的基础类.
@强制输出 逻辑型 　 类/方法本属性只能应用于类/方法定义成员上,用作指定该类/方法将被强制编译输出.
正常情况下,编译器会仅编译并输出被程序启动类或启动方法直接或间接访问的
类/方法,此属性仅用作强制编译输出未被程序启动类或启动方法直接或间接访
问的类/方法,一般用作自动加入一些被目标平台默认使用的类,譬如登记到安卓
程序清单文件中的"应用程序类"/"服务类"/"广播接收器类"等.
@强制依赖 文本型[允许多设置
项]类/方法本属性只能应用于类/方法定义成员上,用作强制指定一个或多个类作为本类/方
法的依赖类(多个依赖类名之间使用逗号或换行符分隔),一旦本类/方法被用户程
序使用,则其所有在此处指定的依赖类均认为被使用.
正常情况下,类之间的依赖关系会被编译器自动判别,此属性仅用作当本类/方法
中未曾实际使用到某类时强制指定其为本类/方法的依赖类.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 28/68

--- 第 29 页 ---
@废弃 整数  类/方法本属性只能应用于类/方法定义成员上,用作标志该类或方法已经被废弃.
属性值可以为以下选项值之一:
1. 警告: 建议用户不要在外部包中使用该类/方法,否则编译器将提示警告;
2. 错误: 用户不能在外部包中使用该类/方法,否则编译器将提示出错.
@外部基础类文本型 　类的基础
类属性本属性用作指定一个本地类名作为当前类的基础类名称,编译器将不进行任何检
查. 注意:
1. 此时当前类应该没有定义基础类;
2. 不能将本属性值指向一个火山类名,因为系统不会对其进行引用检查,因而
该火山类可能会因为没有被引用而在代码优化时被删除;
3. 如果定义了非空外部基础类,则编译器编译本类时将不会再自动生成本类
的无参数空白构造方法(仅限安卓);
4. 支持使用类似"ArrayList<E>"这样的本地模板类名,如果当前类为模板基
础类,支持在其中使用火山模板数据类型;
5. 支持在名称首部使用如下嵌入替换符: @pkg<包名称>、@an<约定名称
>、@sn<current_package>、@sn<startup_package>
@虚拟方法 整数 　 方法本属性只能应用于普通类型的非静态方法定义成员上,用作指定该方法为虚拟方
法(类的多态).
虚拟方法可以在其继承类中被覆盖,继承类中用作覆盖的虚拟方法必须与其基础
类中对应虚拟方法的名称/公开状态/返回值/参数表完全相同.
属性值可以为以下选项值之一:
1. 可覆盖: 为可覆盖虚拟方法,继承类可以通过定义与本方法同名同返回值同
参数表的虚拟方法来覆盖本方法;
2. 不可覆盖: 为不可覆盖虚拟方法,继承类不能覆盖本方法.
@嵌入式方法文本型 　 方法 本属性只能应用于方法定义成员上,用作为指定当前方法为嵌入式方法.
本属性的值文本为属性表格式,该属性表可以具有以下属性:
1. name: 文本型,定义本嵌入式方法的标记名称,仅在所处类中使用并有效;
2. has_body: 逻辑型,默认值为假,指定本嵌入式方法的调用语句是否携带一
个子语句体;
3. has_loop_body: 逻辑型,默认值为假. 指定本嵌入式方法的调用语句是否
携带一个循环体类型的子语句体,在该子语句体中可以支持调用"到循环
尾"和"跳出循环"关键字语句 而不会编译报错;
4. body_header: 文本型,仅当"has_body"或"has_loop_body"属性值为
真时有效,如果不为空文本,用作指定编译时在子语句体首部加入的本地代码
行,如果未定义本属性或者本属性值为空文本,则编译器自动使用对应目标编
程语言的默认子语句体起始代码,对于java/c/c++来说,就是"{". 如果属性值
为"@none"表示无;
5. body_tail: 文本型,仅当"has_body"或"has_loop_body"属性值为真时
有效,如果不为空文本,用作指定编译时在子语句体尾部加入的本地代码行,如
果未定义本属性或者本属性值为空文本,则编译器自动使用对应目标编程语
言的默认子语句体结束代码,对于java/c/c++来说,就是"}". 如果属性值
为"@none"表示无;
6. prev: 文本型,如果不为空文本,指定 一个位于相同类中嵌入式方法的标记
名称列表(多个标记名称之间使用逗号分隔). 本嵌入式方法的调用语句前方
必须存在任何一个 在该名称列表中指定的嵌入式方法调用语句. 在标记名称
列表中,可以使用特殊标记名称"@none"来匹配当前调用语句位于所处语句
体首部的情况;
7. next: 文本型,如果不为空文本,指定一个标记名称列表(格式同上). 本嵌入
式方法的调用语句后方必须存在 任何一个在该名称列表中指定的嵌入式方
法调用语句. 在标记名称列表中,可以使用特殊标记名称"@none"来匹配当
前调用语句位于所处语句体尾部的情况;
8. parent: 文本型,如果不为空文本,指定一个标记名称列表(格式同上). 本嵌
入式方法的调用语句必须直接或间接(由"lineal_parent"属性决定)位于任何
一个 在该名称列表中指定的嵌入式方法调用语句的子语句体中. 在标记名称
列表中,可以使用特殊标记名称"@none"来匹配当前调用语句位于所处方法
顶层语句体内(即不位于任何语句的子语句体中)的情况;
9. child: 文本型,如果不为空文本,指定一个标记名称列表(格式同上). 本嵌入
式方法调用语句 的子语句体中只能存在在该名称列表中指定的嵌入式方法
调用语句. 在标记名称列表中,可以使用特殊标记名称"@none"来匹配当前2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 29/68

--- 第 30 页 ---
调用语句的子语句体为空的情况,如果未指定"@none",则必须至少存在一个
符合要求的子嵌入式方法调用语句;
10. lineal_parent: 逻辑型,默认值为假. 用作和"parent"属性配合使用. 属
性值如为真,则本嵌入式方法的调用语句必须直接位于任何一个
在"parent"名称列表中指定的嵌入式方法调用语句的子语句体中(即必须为
紧接着的上一层父语句),否则可以间接位于(即可以为上层或更上层);
11. req_obj_param_pointer: 逻辑型,默认值为假. 仅在视窗版中使用,用作
指定是否将本方法的所有文本型和对象型调用参数转换为其对象地址指针
(如: "字节集"对象转换为"CVolMem*",文本型数据转换为"CVolString*");
12. req_str_param_text_pointer: 逻辑型,默认值为假. 仅在视窗版中使用,
用作指定是否将本方法的所有文本型调用参数转换为其文本数据指针(const
TCHAR*).本属性的优先级高于"req_obj_param_pointer",也就是说如果同
时定义了"req_obj_param_pointer",文本型调用参数会被转换为"const
TCHAR*"而不是"CVolString*";
13. req_str_param_text_pointer_u8: 逻辑型,默认值为假. 仅在视窗版中
使用,同"req_str_param_text_pointer",只不过为提供UTF8编码的文本指
针;
14. no_end_sem: 逻辑型,默认值为假. 指定在嵌入式方法的调用语句尾部
是否不自动加入分号;
15. req_cpp_bool: 逻辑型,默认值为假. 仅在视窗版中使用,指定逻辑型参数
需要使用c++的boolean数据类型表达.
嵌入式方法具有以下特点和需要注意的地方:
1. 嵌入式方法自动禁止流程检查;
2. 如果设置有"has_body"或"has_loop_body"属性项或者提供了非空
的"prev"/"next"属性值,则所应用到的嵌入式方法不能定义返回值;
3. 类_初始化 / 类_清理 / 属性写 / 事件定义或接收方法 / 类虚拟方法均不
能设置为嵌入式方法;
4. 嵌入式方法内只能存在嵌入行语句,这些语句将与调用参数组合起来用作
替换调用语句本身;
5. 方法的嵌入行语句内访问除开嵌入式方法参数以外的其它任何成员时,必
须明确指定类名前缀,且该类必须为公开类;
6. 方法的嵌入行语句内始终只允许访问公开成员,哪怕该成员位于嵌入式方
法本身所处的类/基础类中;
7. 方法的嵌入行语句内
的"sn<current_class>"、"sn<base_class>"、"sn<current_package>"将
基于调用该嵌入式方法的实际语句所处位置获取;
8. 方法的嵌入行语句内对所处方法的参数只允许最多引用一次;
9. 对嵌入式方法的调用将直接替换调用语句本身,编译器会根据需要自动在
所生成的替换文本两侧加上左右小括号.
@禁止流程检
查逻辑型 　 方法本属性只能应用于方法定义成员上,用作关闭编译器在该方法上的流程检查机
制,主要包括以下内容:
1. 当方法定义有返回值时是否所有退出流程分支均返回了值
@默认值 　 　 参数本属性只能应用于方法的参数定义成员上,用作为参数提供调用方未提供对应数
据时的默认值,所设置数据必须与参数数据类型匹配.
当本属性应用到数据类型为数组/类/文本型的参数时,可以将属性值设置为"空
对象".
@常量参数 逻辑型 　 参数本属性只能应用于非嵌入式方法的参数定义成员上,设置为真说明该参数的内容
在方法内部不可被修改.
@匹配类型 整数 　 参数 本属性只能应用于嵌入式方法的参数定义成员上,用作为参数匹配提供增强通配
模式.
可以为以下选择项之一,用作指定其所对应的增强通配模式(注意此时不能为参
数设置数据类型):
1. 通用整数型: 匹配所有非数组整数数据类型,如: 字节、短整数、字符、整
数、长整数.
2. 通用数值型: 匹配所有非数组数值型数据类型,如: 字节、短整数、字符、
整数、长整数、小数.
3. 通用非文本基本型: 匹配所有非数组非文本的基本数据类型,如: 字节、短
整数、字符、整数、长整数、小数、逻辑型.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 30/68

--- 第 31 页 ---
4. 通用基本型: 匹配所有非数组基本数据类型
5. 本地类: 匹配所有非数组本地类(火山程序本地类 / 别名本地类)数据类型
6. 通用类: 匹配所有非数组类定义数据类型
7. 通用型: 匹配所有非数组数据类型
8. 通用整数型数组: 匹配所有整数数据类型数组,如: 字节、短整数、字符、
整数、长整数.
9. 通用数值型数组: 匹配所有数值型数据类型数组,如: 字节、短整数、字
符、整数、长整数、小数.
10. 通用非文本基本型数组: 匹配所有非文本的基本数据类型数组,如: 字节、
短整数、字符、整数、长整数、小数、逻辑型.
11. 通用基本型数组: 匹配所有基本数据类型数组
12. 本地类数组: 匹配所有本地类(火山程序本地类 / 别名本地类)数据类型数
组
13. 通用类数组: 匹配所有类定义数据类型数组
14. 通用型数组: 匹配所有数据类型数组
15. 所有类型: 匹配所有数组和非数组数据类型
16. 等于前参数值类型: 所提供参数值数据类型必须与为前方参数所提供的
参数值数据类型一致,不能用在第一个参数上.此类型不支持同时定义参数默
认值
17. 匹配前参数值类型: 前方参数值数据类型必须能够正常转换到当前参数
值数据类型,不能用在第一个参数上.此类型不支持同时定义参数默认值.
18. 等于前参数值模板类型: 此时前方参数值的数据类型必须为"模板实现
类",本参数所提供参数值数据类型必须与该模板实现类的"模板类型1"数据类
型一致,不能用在第一个参数上.此类型不支持同时定义参数默认值.
@匹配方法 文本型  参数本属性只能应用于嵌入式方法的参数定义成员上,用作指定需要为该参数提供一
个指定格式的类方法(如果不是服务器子平台,与所指定模板方法的静态属性也
必须匹配).
属性值为一个任意类方法的访问名称(不检查是否对其具有访问权限),用作指定
本参数所能接收类方法的定义格式,为空文本表示可以接收任何格式的类方法
(如果不是 服务器子平台,必须是静态方法),以'@'字符开始表示本参数可以接
收"空对象"立即数作为参数值.
在服务器子平台中,可以通过提供一个特定属性值"@call"来指定需要为该参数
提供一个任意格式的方法调用语句.
注意本属性不能与"@匹配类型"/"@需求类型"/"@返回值类型"属性同时使用.
@需求类型 整数 　 参数本属性只能应用于方法参数定义成员上,用作为参数匹配提供参数数据需求类
型.
可以为以下选择项之一:
1. 可写入变量: 调用方需要提供可以修改其内容(即排除掉类似常量参数等)
的参数/变量作为参数值,某些子平台(如服务器子平台)将以参考方式传递此
类参数的值变量,以通过该变量向方法外部返回数据. 在嵌入和非嵌入式方法
中,都可以使用此类型的参数,需要注意的是,方法内代码欲赋值到该参数时,两
种方法的方式不同.以服务器子平台为例: 在嵌入式方法中,该参数被直接替换
为对应的变量名,因此以"@<参数名> = xxx"赋值即可,而非嵌入式方法中,该
参数以指针数据的方式传递进来,因此必须以"*@<参数名> = xxx"的方式赋
值;
2. 立即数或常量: 调用方需要提供立即数或常量作为参数值. 只能在嵌入式
方法中使用;
3. 数据类型: 调用方需要提供数据类型名称作为参数值. 只能在嵌入式方法
中使用.
@可扩展 文本型 　 参数本属性只能应用于嵌入式方法的最后一个参数定义成员上,用作说明该参数在调
用时可以被扩展.
属性值为一个属性表文本,该属性表中可以具有以下属性:
1. d_text: 文本型,用作指定各个扩展参数之间的分隔文本,未指定或为空默
认为", ".
@返回值类型整数 　 参数 本属性只能应用于嵌入式方法的参数定义成员上,用作说明该方法的返回值数据
类型为调用方法时所提供的本参数数据的当前实际数据类型.
注意:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 31/68

--- 第 32 页 ---
1. 如果属性值等于-1,表示方法的返回值数据类型等于参数数据的当前实际
数据类型;
2. 如果属性值大于等于0,从参数数据所获得的数据类型被去除了数组定义部
分,而代替由属性值来直接指定数组定义部分的维数;
3. 所处方法本身必须没有定义返回值数据类型;
4. 所处方法只能有一个参数定义有此属性.
@文档 文本型 　任何定义
型程序成
员本属性用作为相关成员提供文档信息,以便系统自动建立其帮助信息.
属性值为一个文本属性表,具体所支持的属性表格式如下:
category = "xxx"
以上属性中,被中括号括住属性的为可选属性,否则为必须提供的属性.
名称数据
类型解释
category文本
型用作提供本成员所对应的文档类别名称,可以应用于包或类定
义成员上.
注意: 当应用在包定义成员上时,仅对该包定义成员自身所处
源文件中定义的 所有类有效,不包括程序内其它源文件中定义
的同名包. 如果某个类自身及其所处包均定义了本属性,则将
使用其自身的.
@设计器 文本型 [不允许常
量]类 本属性只能应用于其直接/间接基础类为可设计类(定义有输出名
为"gVolGetDesignContent"的虚拟方法)的类定义成员上,用作提供该类对应
外部设计器的相关信息.
属性值为一个文本属性表,具体所支持的属性表格式如下:
[name] = "xxx"
dll_file_name.x64 = "xxx"
dll_file_name.win32 = "xxx"
[func_name] = "xxx"
[user_param] = xxx
[auto_generate_mark] = "xxx"
以上属性中,被中括号括住属性的为可选属性,否则为必须提供的属性.
名称数据
类型解释
name文本
型提供本设计器的显示用名称,被省略表示无.
dll_file_name.x64
dll_file_name.win32文本
型用作提供设计器启动函数所处的DLL文件名,相
对当前源文件所处目录.
子属性名"x64"和"win32"分别用作提供该DLL
文件的对应目标平台版本,对应平台的IDE会自动
使用对应平台的DLL.
func_name 文本
型用作提供设计器启动函数在其所处DLL中的输出
名称,必须为有效的英文名称.如果被省略,则默认
为"designer". 其原型为:
typedef const TCHAR* (WINAPI
*FN_EXTERN_DESIGNER_STARTUP) (const
TCHAR* szCurrentClassName, const
TCHAR* szCurrentDesignContent, const
HWND hParentWnd, const INT_P
npUserParam, const TCHAR**
ppsAutoGeneratedElements);
函数返回NULL表示所提供当前设计内容未被修
改,否则返回修改后的设计内容(为字面文本,调用
方必须立即将其处理完毕或复制保存,其可能会
在后续操作中被改变或无效).
参数说明:
szCurrentClassName: 当前设计内容文本所
处类的名称,必定不为空文本.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 32/68

--- 第 33 页 ---
szCurrentDesignContent: 当前设计内容文
本,必定不为NULL.
hParentWnd: 父窗口句柄,必定为有效窗口句
柄.
npUserParam: 本属性表内"user_param"属
性值中所提供的用户自定义整数参数值
ppsAutoGeneratedElements: 必定不为
NULL,用作在其中返回外部设计器自动生成到
被设计类中的成员信息表,仅当函数返回非
NULL指针值时有效.文本格式为'\0'字符分隔
的文本字段,每5个字段分别提供成员类型(0:
常量/1:变量) + 成员名称 + 数据类型(为空文
本表示为整数) + 值(字面文本) + 注释文本,
最后以一个单独的'\0'字符结束. 调用方必须
立即将其处理完毕或复制保存,其可能会在后
续操作中被改变或无效. 填入NULL指针表示
不需要加入任何成员.
user_param 整数传递到设计器启动函数的自定义整数参数值,如
果省略则为0.
auto_generate_mark文本
型如果设计器启动函数通
过"ppsAutoGeneratedConsts"参数返回了欲
插入到被设计类中的常量成员,那么这些常量成
员会被自动添加属性值为此文本的"@自动生
成"属性,用作标注其为该设计器所生成.
如果被省略,则默认为空文本.
@设计内容 文本型[不允许常
量]本属性值内容由外部设计器所生成,只能应用于其直接/间接基础类为可设计类
(定义有输出名为"gVolGetDesignContent"的虚拟方法)的类定义成员上,用作
提供外部设计器为该类所设计生成的文本内容
(FN_EXTERN_DESIGNER_STARTUP方法所返回).该内容文本在运行时可以调
用本类的"gVolGetDesignContent"虚拟方法返回.
@可插入程序
类文本型 [不允许常
量]本属性只能应用于类定义成员上,用作支持用户在火山程序编辑器的"插入特定
内容"功能中插入所指定类型的特定内容到程序中.
属性值为一个文本属性表,具体所支持的属性表格式如下:
[type] = "xxx"
[prefix] = "xxx"
[shown_name] = "xxx"
[icon] = "xxx"
[explain] = "xxx"
[dll_file_name.x64] = "xxx"
[dll_file_name.win32] = "xxx"
[func_name] = "xxx"
[user_param] = xxx
以上属性中,被中括号括住属性的为可选属性,否则为必须提供的属性.
名称数据
类型解释
type 文本
型指定可插入特定内容的类型,
为"class"、"const"、"var"三种类型文本之一或
其组合(多个类型中间使用逗号分隔),其意义分别
为:
1. "class": 在程序中当前位置插入本可插入程
序类的继承类;
2. "embeddable_class": 用作在程序内当前位
置插入本可插入程序类中的所有内容,被插入内
容中所有为本可插入程序类的数据类型将被自
动转换为插入位置所处的类,所有空白名称方法
(即方法未填写名称)中的内容将被插入到当前
语句位置. 注意: 具有此类型的可插入程序类将
不参与编译,因此也不会进行语法检查;2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 33/68

--- 第 34 页 ---
2. "const": 在程序中当前位置插入数据类型为
本可插入程序类的常量;
3. "var": 在程序中当前位置插入数据类型为本
可插入程序类的变量.
其中,在处理"const"和"var"类型的时候,系统会
同时解释处理本可插入程序类的属性值为"文
件名"、"保存用文件名"、"自定义"、"自定义
整数"的"@值细节类型"属性,处理后所获得的
文本将会作为所插入常量/变量的初始值文本.
属性值被省略表示使用默认值"class".
prefix文本
型提供插入到火山程序中的新类的前缀名称,被省略
表示使用默认前缀名称.
shown_name文本
型提供在程序类插入对话框中使用的显示用名称,被
省略表示等同于前缀名称.
icon文本
型提供在程序类插入对话框中使用的显示用图片文
件名,相对该类所处火山源文件位于的目录,被省略
表示使用默认图标.
图片文件要求如下: 格式为BMP,尺寸32x32像素,
颜色深度32位,透明背景色为洋红(RGB颜色分量:
255, 0, 255).
如果所提供图片文件名为以'@'字符引导的一个
整数值,则该整数值为引用内置图片集中所指定图
片的索引值.
explain文本
型提供对应的解释信息,被省略表示无.
dll_file_name.x64
dll_file_name.win32文本
型用作提供插入操作执行函数所处的DLL文件名,相
对当前源文件所处目录. 被省略表示无.
子属性名"x64"和"win32"分别用作提供该DLL文
件的对应目标平台版本,对应平台的IDE会自动使
用对应平台的DLL.
func_name文本
型用作提供插入操作执行函数在其所处DLL中的输
出名称,必须为有效的英文名称.如果被省略,则默
认为"content_inserter".如果"dll_file_name"属
性被省略,则本属性无效. 其原型为:
typedef void (WINAPI
*FN_APP_CLASS_INSERTER) (const TCHAR*
szAppClassName, const TCHAR*
szRecommendedNewName, const HWND
hParentWnd, const INT_P npUserParam);
参数说明:
szAppClassName: 当前相关已有程序类的名
称,必定为有效名称文本.
szRecommendedNewName: 所推荐的当前
所欲插入新成员的名称,必定为有效名称文本.
hParentWnd: 父窗口句柄,必定为有效窗口句
柄.
npUserParam: 本属性表内"user_param"属
性值中所提供的用户自定义整数参数值
user_param 整数传递到插入操作执行函数的自定义整数参数值,如
果省略则为0.
@自动生成 文本型[不允许常
量]任何定义
型程序成
员本属性可以应用在任何成员上,表明其不为用户所输入而为外部插件自动加入,
属性值可以为任意标记文本,用作标志加入本属性所处成员的外部插件类型.
@编译条件 文本型 [不允许常
量]
[允许多设置
项]任何定义
型程序成
员本属性的内容为条件宏表达式,其格式为一系列以逗号或换行符分隔的条件宏名
称(必须为有效的英文名称,在所处项目的"编译时预定义宏"选项中定义),只要任
何一个条件宏被定义,或未被定义(其前方存在一个"!"感叹号字符时),则整个表达
式值为真,否则为假.
一个成员可以同时定义多个本属性,只有在所有属性的条件宏表达式值均为真时
该成员及下属子成员才会被编译,否则将被跳过.
如果本属性应用在包定义成员上,则用作指定该包定义成员所处整个源文件是否
编译.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 34/68

--- 第 35 页 ---
条件宏表达式的首部可以选择以一个'@'字符开头,用作指定即使后续条件表达
式值为假,在IDE的程序编辑器中也不对成员进行特殊着色显示.此方式可以在所
基于条件宏不为在项目的"编译时预定义宏"选项中定义时使用,避免进行错误的
着色操作.
注释:
1. 属性表特性列中凡是未标注"[允许多设置项]"的说明其在属性表中只能存在一个设置项;
2. 未标注"[允许后缀]"的说明其不允许使用后缀方式;
3. 未标注"[不允许常量]"的支持用外部常量对本属性进行赋值(否则只能使用立即数).
　
六. 安卓项目插件相关:
1.安卓项目插件定义的项目扩展属性表:
名称数据
类型相关特
性应用场合 解释
@java.同步逻辑
型　 方法 用作指定该方法支持在多线程中同步
@java.前缀文本文本
型　 类或方法本属性可以应用在类或方法定义成员上,用作在转换到Java代码后在其成员定义首部
添加一段指定文本,譬如可以为方法定义成员添加"@JavascriptInterface"前缀文本
以定义可以在JaveScript中调用的方法等.
@java.后缀文本文本
型　 类或方法本属性可以应用在类或方法定义成员上,用作在转换到Java代码后在成员名后添加一
段指定文本,譬如可以为类定义成员添加类似"implements my_interface"文本以实
现指定Java接口,为方法定义成员添加类似"throws"文本指定异常抛出列表等.
@java.导入文本
型[允许多
设置项]包/类/方法
　
注意: 当应用
在包定义成
员上时,仅对
该包定义成
员自身有效,
不包括程序
内其它源文
件中定义的
同名包定义
成员.本属性用作声明所处包/类/方法编译时需要加入的相关java命名空间import导入语
句,多个导入名称之间使用逗号或换行符分隔.
@java.外部源文
件文本
型[允许多
设置项]本属性用作提供所处包/类/方法正常执行所需求的外部java源文件名.
注意:
1. 所提供java源文件的内容必须为UTF8文本格式;
2. 所提供java源文件如果使用了java的package语句指定所处包,编译器将自动创
建该包所对应的目录并将此源文件拷贝进去,然后递交给java编译器一并编译;
3. 所提供java源文件如果没有使用package语句指定所处包,编译器将自动使用本
属性应用位置所处火山源程序的包名;
4. 所提供java源文件名如果为相对路径,为相对于本属性应用位置所处火山源文件
的目录位置;
5. 所提供java源文件名如果以'*'星号字符开头,表明相对当前安卓插件的数据目录,
具体就是系统安装目录下的"plugins\vprj_android"子目录.
@java.系统需求小数 本属性用作声明所处包/类/方法编译时所需求的最小Java SDK版本(如"1.8").
@安卓.权限需求文本
型[允许多
设置项]本属性用作声明所处包/类/方法正常执行所需求的安卓权限,多个权限之间使用逗号
或者换行符分隔.如果权限名称未给定前缀,默认为"android.permission".
@安卓.系统需求整数　本属性用作声明所处包/类/方法正常编译及执行时所需求的最小安卓系统API级别.
注意本属性与"@安卓.编译时系统需求"相比同时设置了编译及运行时的系统需求.
@安卓.编译时系
统需求整数 本属性用作声明所处包/类/方法正常编译所需求的最小安卓系统API级别. 注意本属
性与"@安卓.系统需求"相比仅设置了编译时的系统需求.
@安卓.使用D8生
成DEX逻辑
型 本属性用作声明所处包/类/方法编译时是否需要使用安卓的D8工具来生成DEX.
系统默认使用安卓的"DX"工具生成DEX,但是如果程序中使用了一些高级Java8中的
特性,譬如"Lambda表达式",则必须使用D8工具才能正常生成安卓的DEX.
由于D8必须在Java8下运行,所以如果本属性值设置为真,将自动把当前所需要的最小
Java SDK版本设置为1.8版.
@安卓.附加清单文本
型[允许多
设置项]本属性用作声明所处包/类/方法正常执行所要加入到安卓程
序"AndroidManifest.xml"清单文件中的XML数据.
属性值为具体的欲加入XML数据文本,其中的XML结点分为两种: 独有结点和非独有
结点. 独有结点在同层次结点中只能存在一个,而非独有结点则可以存在多个. 独有结
点的名称必须以"@"字符开头,而非独有结点则不以此字符开头. 在输出最终XML结
果文本时,独有结点名称前的"@"字符将被自动去除.
譬如,"manifest"/"application"结点均应该为独有结点,应该分别
以"@manifest"/"@application"来表达,而"activity"/"service"则为非独有结点,首
部不用加上此字符.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 35/68

--- 第 36 页 ---
如果所提供XML文本中的独有结点在已有XML清单内容中已经存在,将不再新建结点
而直接将其属性表合并进已有结点的属性表,否则将新建结点.
在进行结点的属性表合并时,不允许覆盖已有属性值,除开以下例外:
1. 继承类上所应用的XML内容可以覆盖其基础类上应用的XML内容;
2. 方法中所应用的XML内容可以覆盖其所处类上应用的XML内容;
3. 编译器建立的所有安卓程序部件(应用程序/窗口/服务/广播接收器)的XML内容
可以被用户所覆盖.
所提供XML文本中所有根结点的名称可以为以下几种方式之一,用作定位其下属XML
数据在清单中的具体插入位置:
1. 绝对结点路径: 以"\"字符开始和分隔的多个结点名称,表示为从根结点开始的结
点路径;
2. 相对结点路径: 与绝对结点路径相比,它不以"\"字符开始,为相对当前结点的路
径;
3. 当前结点特定名称: 为固定的"."文本,用作代表当前结点.
注意:
1. 除开尾结点,路径中的所有结点必须均为独有结点,以保证路径的唯一性;
2. 路径中的结点如果尚不存在,将自动创建;
3. "应用程序"/"窗口"/"服务"/"广播接收器"4个类及其所有继承类被称为安卓程
序部件类,其对应到相应的安卓程序部件: 应用程序/窗口/服务/广播接收器.只有本
属性所应用到成员的所处类(应用在类上则为该类,应用在方法上则为其所处类)为
安卓程序部件类时,才会存在当前结点,此时当前结点即为对应的安卓程序部件在清
单文件中的输出结点;
4. 在所有安卓程序部件类及其内部被使用方法上应用的本属性内容将被一并添加
到该安卓程序部件在清单文件中的输出结点上;
5. 所有非根结点只能使用纯粹的名称,即不能包括路径,也不能使用当前结点特定
名称;
6. XML属性值两侧如果没有双引号将被自动添加;
7. 清单文本中可以使用"@sn<current_class>"引用本属性当前所处火山类对应
的数据类型,使用"@sn<startup_package>"引用程序启动包的名称.
举例:
添加manifest属性: <\@manifest android:installLocation="internalOnly" />
添加application属性和子结点: <\@manifest\@application
android:uiOptions="none"> <meta-data android:name="zoo"
android:value="abc" /> </@application>
添加当前结点的子结点: <meta-data android:name="zoo"
android:value="abc" />
添加当前结点的属性: <. android:enabled="true" />
添加当前结点的属性和子结点: <. android:enabled="true"> <meta-data
android:name="zoo" android:value="abc" /> </.>
@安卓.Gradle依
赖文本
型[允许多
设置项]本属性用作声明所处包/类/方法编译时是否需要使用Gradle,并提交对应的Gradle依
赖项,多个依赖项之间使用换行符分隔,如果属性值为空文本,仅表示需要使用Gradle
进行编译.
依赖项值必须是完整的语句文本,如: implementation 'com.example:library:1.0.0',
compileOnly 'com.example:library:1.0.0' 等,其将会被加入到项
目"build.gradle"文件的"dependencies"节中.
如果所提供依赖项的值为"@androidx"特定文本,表示依赖androidx,此时编译器会
自动加入"android.useAndroidX"等属性到"gradle.properties"文件中.
@安卓.Gradle附
加脚本文本
型[允许多
设置项]本属性用作提供所处包/类/方法使用Gradle进行编译时需要加入的附加Gradle脚本
内容,属性值由以逗号分隔的三个字段构成:
字段1: 为位于"plugins\vprj_android\gradle"目录内的Gradle脚本或属性文件名
(相对该目录),主要有以下这些:
"app\build.gradle"(项目构建脚本), "app\proguard-rules.pro"(项目混淆规
则,需要在项目选项中开启Gradle混淆才会被使用), "gradle.properties"
(Gradle全局选项), "settings.gradle"(项目全局选项).
字段2: 为在所指定Gradle脚本或属性文件中的位置标签名称,该标签所处行
以"@vol_line:"文本开头,其后方即为位置标签名称;2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 36/68

--- 第 37 页 ---
字段3: 提供欲加入的内容文本,该内容将被添加到指定Gradle脚本或属性文件中的
指定位置标签处.
@安卓.外部库文本
型[允许多
设置项]
[允许后
缀]本属性用作提供所处包/类/方法正常执行所需求的外部aar/jar/so库文件名,多个文件
名之间使用逗号或者换行符分隔.
文件名如果为相对路径,为相对于当前成员所处火山源文件的目录位置.
文件名如果以'*'星号字符开头,表明相对当前安卓插件的数据目录,具体就是系统安装
目录下的"plugins\vprj_android"子目录.
如果本属性提供了属性名后缀"安卓X忽略"(即"@安卓.外部库.安卓X忽略")且当前程
序使用了androidx,则本属性将被忽略.
如果本属性同时提供了多个属性名后缀,则之间使用下划线'_'字符分隔(如"@安卓.外
部库.安卓X忽略_不打包").
系统对外部aar/jar/so库文件按照不同的算法进行处理:
1. 如果是aar外部库且未启用Gradle编译模式,则将该库文件处理后的各类数据分
别加入到对应的项目数据存放目录,并自动合并其清单内容,创建其R类;
2. 如果是jar外部库或aar外部库(启用了Gradle编译模式),则直接将该库文件加入
到项目外部库存放目录.如果同时提供了属性名后缀"不打包"(即"@安卓.外部库.不
打包"),则该 库将仅只在编译时使用,在打包到APK的时候将被忽略;
3. 如果是so外部库,系统将按照以下算法(也是系统所使用的标准安卓资源搜寻算
法)寻找并加入该so库的其它CPU架构版本:
A. 如果该文件携带修饰符,则将在同一目录中搜寻加入具有其余种类修饰符的
同名so文件. 修饰符文本必须放在文件后缀名的前面,与文件名之间使用减号分
隔,如"test-armeabi-v7a.so".所允许的修饰符为"arm64-
v8a"/"armeabi"/"armeabi-v7a"/"mips"/"mips64"/"x86"/"x86_64"之一,用
作提供其所支持的CPU架构);
B. 如果该文件位于以以上修饰符作为名称的子目录中,则自动在上一层目录中
名称为其余种类修饰符的子目录内搜寻加入同名so文件(这一算法与安卓系统
本身的一致);
C. 如果以上条件都不满足,则仅将该so文件加入到项目外部库目录
的"armeabi-v7a"子目录内.
@安卓.外部资产文本
型[允许多
设置项]本属性用作提供所处包/类/方法正常执行所需求的外部安卓资产文件.
注意:
1. 所提供的属性值如果为文件名,则将该文件拷贝到安卓项目的"assets"目录内;
2. 所提供的属性值如果为目录名,则将该目录内及其下属所有直接/间接子目录中
的文件均拷贝到安卓项目的"assets"目录内,并保持其原有目录结构;
3. 目录或文件名如果为相对路径,均相对于当前成员所处火山源文件的目录位置;
4. 目录或文件名如果以'*'星号字符开头,表明相对当前安卓插件的数据目录,具体
就是系统安装目录下的"plugins\vprj_android"子目录.
@安卓.外部资源文本
型[允许多
设置项]本属性用作提供所处包/类/方法正常执行所需求的外部安卓资源目录名,该目录及其
子目录内的所有文件和目录结构将均被原样复制到安卓项目的"res"目录内,用户必须
确保其中的文件和目录格式符合安卓系统的要求,不然将导致资源编译失败.
目录名如果为相对路径,为相对于当前成员所处火山源文件的目录位置.
目录名如果以'*'星号字符开头,表明相对当前安卓插件的数据目录,具体就是系统安装
目录下的"plugins\vprj_android"子目录.
@安卓.外部资源.
属性动画
@安卓.外部资源.
居间动画
@安卓.外部资源.
颜色表
@安卓.外部资源.
可绘制
@安卓.外部资源.
菜单
@安卓.外部资源.
原始数据
@安卓.外部资
源.XML数据文本
型[允许多
设置项]这些属性用作提供所处包/类/方法正常执行所需求的各类外部资源文件名,分别对应
以下类型的安卓资源:
"animator"、"anim"、"color"、"drawable"、"menu"、"raw"、"xml"、"values".
多个文件名之间使用逗号或者换行符分隔,这些文件将被自动整合到当前程序的对应
资源目录位置.
文件名如果为相对路径,为相对于当前成员所处火山源文件的目录位置.
文件名如果以'*'星号字符开头,表明相对当前安卓插件的数据目录,具体就是系统安装
目录下的"plugins\vprj_android"子目录.
编译器会自动搜寻加入所有具有不同安卓修饰符的同名资源文件,具体算法为:
1. 如果该资源文件名携带修饰符,则将在同一目录中搜寻加入具有其余种类修饰符
的同名文件.
修饰符文本必须放在文件后缀名的前面,与文件名之间使用减号分隔,如"test-
hdpi.9.png"或
"test-zh-hdpi.9.png"(组合修饰符),具体所允许的修饰符与安卓系统的规定相同;2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 37/68

--- 第 38 页 ---
@安卓.外部资源.
值2. 如果该资源文件位于以"资源类型+修饰符"作为名称的子目录中,则自动在上一
层目录中名称
为其余种类修饰符的子目录内搜寻加入同名资源文件. 如: 假设资源文件位
于"drawable-hdpi"
子目录中,而上一层目录中还存在"drawable-mdpi"子目录,则自动到该目录内搜
寻. 这一搜寻机制
与安卓系统本身的一致;
3. 如果以上条件都不满足,则仅将该单一资源文件加入到项目的对应资源目录中.
编译器目前支持安卓4.2提供的所有各种修饰符及其组合(组合顺序随意,编译器会自
动调整),可用修饰符可以使用随开发环境附带的工具获取.
@安卓.值资源文本
型[允许后
缀]类定义成员本属性可以应用在数据类型为"可设置值资源"或其继承类的常量/变量上,用作提供该
常量/变量在不同修饰符下的对应初始资源值.
本属性必须同时提供一个安卓组合修饰符作为属性名后缀,如:"@安卓.值资源.en",即
指定本属性值为所处值资源常量在英文设备上的对应值.
@安卓.窗口.布局文本
型[允许后
缀]
[不允许
常量]类定义成员
或成员变量本属性可以应用在直接/间接基础类为"窗口"的类定义成员或者窗口类中类型为"窗口
组件"的成员变量上(属性名后可以选择附加一个安卓修饰符文本后缀),用作记录相关
的布局参数.
本属性可以携带一个安卓组合修饰符作为后缀,用作指定本布局应用到所指定的设备
环境上.如:"@安卓.窗口.布局.en-sw720-hdpi",即指定本布局应用到最小宽度为
720dp,高dpi的英文设备上.
属性值中提供的布局属性可以以一个'@'字符开头,表明该布局属性及其值将强制通
过编译器的检查(用户此时将自行保证该布局属性及其值的正确性).
@安卓.窗口组件.
布局配置文本
型[不允许
常量]窗口组件类本属性只能在直接/间接基础类为"窗口组件"的类定义成员上使用,用作提供其在安卓
布局文件中的相关配置信息.
具体所支持的属性表格式如下:
native_class = xxx
[helper] = xxx
[hidden]
[one_child_enabled]
[add_child_disabled]
[category] = xxx
[icon] = xxx
[default_event] = xxx
[self] / [child]
{
    attr
    {
        [hidden]
        [discard]
        name = xxx
        shown_name = xxx
        [desc] = xxx
        data_type = xxx
        [detail_type] = xxx
        [default_value] = xxx
        [min_value] = xxx
        [max_value] = xxx
        [item]
        {
            name = xxx
            shown_name = xxx
            [desc] = xxx
        }
        [item ...]
    }
    [attr ...]
}
以上属性中,被中括号括住属性的为可选属性,否则为必须提供的属性. 另外,"attr"属
性必须定义在"self"或"child"属性内.
名称数据
类型解释
native_class 文本
型用作提供本组件所对应的本地java类名,必须为有效英文
全名称.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 38/68

--- 第 39 页 ---
注意: 也可以使用在火山程序中定义的类,用作支持使用火
山程序自定义安卓组件,具体方法是在名称前面加上'@'字
符,如:
native_class = "@我的火山组件类"
helper文本
型如果不为空文本,标记需要匹配该标识符的已登记到系统
的辅助功能插件来支持本组件的设计/编译.
hidden (顶层)逻辑
型标记本组件设计时为隐藏状态,仅设计器使用.
one_child_enabled逻辑
型如果本组件为容器类型组件,标记是否仅允许在其中加入
一个子组件.
add_child_enabled逻辑
型某些容器组件类(譬如"native_class"属性值以'@'字符开
头的火山本地窗口容器组件类)默认是不允许加入子组件
的,如果确需加入,需要显式设置本属性值为真.
add_child_disabled逻辑
型标记本组件即使为容器类型组件,也不允许在其中加入子
组件. 本属性可以用在类似列表框这样的组件上.
category文本
型提供本组件所处的分类,仅设计器使用.
icon文本
型提供本组件图标的图片文件名,相对本配置信息所处火山
源文件位于的目录,为空表示 使用默认图标.
图片文件要求如下: 格式为BMP,尺寸24x24像素,颜色深度
32位,背景色为白色.
default_event文本
型设置本组件的默认事件定义方法(可以位于组件基础类中)
的名称,当在窗口设计器中双击本组件时,会自动添加该事
件的接收方法.
self 　 标记其中属性为组件自身使用的属性
child 　 标记其中属性为组件的直接子组件使用的属性
attr 　 标记一个新属性的定义开始
hidden (attr节中)逻辑
型标记本属性设计时为隐藏状态,仅设计器使用.
discard逻辑
型标记本属性已经被抛弃,被抛弃属性自动被隐藏,且在设计
器/编译器输出时被自动去除.
name文本
型本属性的名称,必须为有效英文全名称.
属性名中可以使用句点字符分隔命令空间与名称本身,如
果未指定命名空间,则默认命名空间为"android"
("style"/"class"/"id"名称除外).一个特例命令空间名称
为"global",该命名空间表示为全局命名空间.
举例说明:
指定命名空间: "my_app.attr_name" ->
"my_app:attr_name";
指定全局命名空间: "global.attr_name"->
"attr_name"
使用默认命名空间: "attr_name" ->
"android:attr_name"
特例: "style" -> "style", "class" -> "class", "id" ->
"id"
如果以'@'字符开头,表示后续名称文本为在辅助功能插件
中有约定的名称,此时如果本组件指定了不需要辅助功能
插件("need_helper"属性为假)或者在对应辅助功能插件
中未定义此约定名称,将解析出错.注意实际所使用的名称
将不包括首部的'@'字符.
shown_name文本
型本属性的显示名称,仅设计器使用.
desc文本
型本属性的描述文本,仅设计器使用.
data_type 可选
项可选项名称数据
类型解释定义本
属性的
数据类
型boolean逻辑
型　
int整数
型　2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 39/68

--- 第 40 页 ---
double小数
型　
string文本
型　
detail_type可选
项可选项名称适用
数据
类型解释
定义本
属性的
细节类
型,细节
类型必
须与属
性的数
据类型
对应.dim
小数
型位置/尺寸.单位DP.
font_size 字体尺寸.单位SP.
frac 百分比
color
文本
型颜色,格式为'#'字符后
跟数个十六进制字符,
所支持的格式如下:
1. #RGB;
2. #ARGB;
3. #RRGGBB
4. #AARRGGBB
其中'#'后的每个字母
代表一个十六进制字符
位置,'A'代表透明
色;'R'代表红色;'G'代表
绿色;'B'代表蓝色.
enum枚举型,表示属性值为
一系列可选文本项中的
一项.
必须使用"item"为此类
属性提供可选文本项列
表.
flags标记集,表示属性值为
一系列可选文本项中一
或多项的集合,多项标
记文本之间使用'|'字符
分隔.
必须使用"item"为此类
属性提供可选文本项列
表
drawable_res_file可绘制资源文件名(可
以是图片或对应类型
xml文件名)
default_value文本
型指定本属性在设计/编译时所使用的默认值
min_value数值
型 仅适用于整数型/小数型的属性,用作提供数值的最小和最
大许可值,默认为无限制.max_value数值
型
item 　用作为本属性提供一个可选择文本项.
注: 可以为任何格式文本,系统不进行要求.
@安卓.强制分配
到主包逻辑
型 类本属性可以应用在类定义成员上,用作在当前项目的"启用APK分包机制"选项被启用
后,强制指定将本类分配到APK中所分出来的主DEX中.
在APK被分包后,安卓操作系统载入该APK后会首先载入其中的主DEX,然后建立所需
要的对应应用程序/窗口/服务/广播监听器等安卓对象,然后再载入后续所有分出来的
次DEX,在建立上述安卓对象时,如果有某些需要访问的类被分包到了次DEX中而此时
次DEX又尚未载入,将导致APK启动失败报无法找到相关类错误,此时的解决方案就是
使用本属性将这些相关类强制分配到主DEX中即可.
注意:
1. 编译器会自动将"应用程序"和"启动类"及这两个类使用和关联到的所有其它类
放入主DEX中(绝大多数情况下此机制就能够满足需要),其它类如需放入主DEX需
要通过本属性指定;
2. 如果未启用当前项目的"启用APK分包机制"选项,就不需要使用本属性.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 40/68

--- 第 41 页 ---
注释:
1. 属性表特性列中凡是未标注"[允许多设置项]"的说明其在属性表中只能存在一个设置项;
2. 未标注"[允许后缀]"的说明其不允许使用后缀方式;
3. 未标注"[不允许常量]"的支持用外部常量对本属性进行赋值(否则只能使用立即数).
　
2. 其它:
A. 当前类如果为窗口类/组件布局类/窗口组件或其继承类,则系统自动为其导入以下本地类:
import android.app.Activity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;
 
七. 视窗项目插件相关:
在进行视窗项目类库封装工作之前,建议先仔细阅读一下系统目录"plugins\vprj_win\classlib\sys\base\libs\win_base"内的所有
C++源码,这些源码(以下简称核心源码)提供了封装的基础和核心代码,通过"视窗基本类"模块引入到用户的火山程序中,同时建议将"视
窗基本类"模块中的火山程序及其编译后的结果C++程序内容也阅读对比一下,里面对各种封装方法基本上都有演示.
一. 嵌入行 内容分区:
嵌入行内容分区用作指定某段嵌入行内容的所处区域类型,分区内容中间不能存在非嵌入行内容,仅支持文档和类嵌入行内容分区,语句
嵌入行内容不支持.
1. 头文件内容分区
在"<include>"和"</include>"中定义的嵌入行内容被认为位于编译后的对应头文件中,否则被认为位于编译后的cpp源文件中.
A. 文档嵌入行内的头文件内容分区:
所有文档嵌入行中的头文件内容均会被组织到一起后放入其所处火山源文件编译后的对应头文件中.
譬如"视窗基本类"模块中"w_startup.v"内的以下嵌入行内容:
其中的内容在编译时将被组织到"w_startup.v"对应的"vpkg_w_startup.h"头文件中:
由于火山程序编译后,所有包对应的头文件会放在所有类对应的头文件前面,因此在类嵌入行中可以使用所有在文档嵌入行中
定义的内容.
B. 类嵌入行内的头文件内容分区:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 41/68

--- 第 42 页 ---
所有类嵌入行中的头文件内容均会被组织到一起后放入其所处火山类编译后的对应头文件中.
譬如"MFC界面基本类"模块中"w_mfc_ui_base.v"的"窗口组件"类内的以下嵌入行内容:
其中的内容在编译时将被组织到"窗口组件"类对应的"vcls_CVolWinControl.h"头文件中:
2. 全局命令空间内容分区
在"<glob al>"和"</glob al>"中定义的嵌入行内容被认为位于全局命名空间中,否则被认为是位于当前包的局部命名空间内.
譬如下面这段代码:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 42/68

--- 第 43 页 ---
编译后的结果内容为:
其中"my_global_func"函数由于位于全局命名空间分区中,编译后被放置在全局命名空间内,而"my_local_func"函数则被放在了
当前包"火山.测试"编译后的局部命名空间"rg_HuoShan_CeShi"中.
全局命名空间内容分区可以与头文件内容分区嵌套使用,此时则是指定在头文件中的全局命名空间内容.
 
二. 类中的额外处理嵌入方法
在类嵌入行中定义的一些具有特定名称和格式的嵌入方法具有特殊意义,列表如下:
额外处理嵌入方法定义格式 解释
static void @an<_sOnBeforeAppInit> ()如果存在,在初始化用户程序数据并启动用户程序前被自动调用,
在该方法中不能访问任何用户程序数据,因为其尚未被初始化.
可以在本方法中初始化所处火山类所需要的相关C++运行时环
境.如果基础类和其继承类同时定义有本方法,则基础类的始终在
前面被调用.
注意: 本方法在类中的C++访问权限必须为public.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 43/68

--- 第 44 页 ---
static void @an<_sOnAfterAppExit> ()如果存在,在清理用户程序数据并退出用户程序后被自动调用,在
该方法中不能访问任何用户程序数据,因为其已经被清理.
可以在本方法中清理所处火山类所需要的相关C++运行时环境.
如果基础类和其继承类同时定义有本方法,则继承类的始终在前
面被调用.
注意: 本方法在类中的C++访问权限必须为public.
static void @an<_sOnStaticInitExtra> ()如果存在,在初始化用户程序静态数据时被自动调用,用作初始化
所处火山类中的额外静态成员变量(额外成员变量的说明见注解).
如果基础类和其继承类同时定义有本方法,则基础类的始终在前
面被调用.
void @an<_OnInitExtra> ()如果存在,在所处火山类的对象构造时被自动调用,用作初始化所
处火山类中的额外动态成员变量.
void @an<_OnCleanupExtra> ()如果存在,在所处火山类的对象析构时被自动调用,用作清理所处
火山类中的额外动态成员变量.
void @an<_OnBeforeCleanup> ()如果存在,在所处火山类及其所有直接/间接基础类的清理代码(自
动取消事件挂接/"类_清理"方法/"_OnCleanupExtra"额外清理
方法/类对象析构代码等等)之前被调用
BOOL @an<_IsSelfEqualExtra> (const
@sn<current_class>& objCompare) const如果存在,在进行火山类对象进行实际内容比较时被自动调用,用
作对类额外成员变量进行比较,返回是否相等.
void @an<_CopySelfFromExtra> (const
@sn<current_class>& objCopyFrom)如果存在,在进行火山类对象赋值操作时被自动调用,用作复制类
中的额外成员变量内容.
void @an<_OnAfterEventAttached> (BOOL blAttach)如果存在,当所处火山类对象被挂接/取消事件挂接时自动调用,用
作进行额外的相关处理.
blAttach参数为真表示事件挂接,为假表示取消事件挂接
virtual void @an<LoadFromStream>
(CVolBaseInputStream& stream)如果存在,用作从所指定输入流中读入本对象的内容. 如果定义了
本方法,则必须同时定义"SaveIntoStream"方法.
virtual void @an<SaveIntoStream>
(CVolBaseOutputStream& stream)如果存在,用作将本对象的内容写出到所指定的输出流中. 如果定
义了本方法,则必须同时定义"LoadFromStream"方法.
注明:
1. 以上所说的额外成员变量,是指火山类中使用类嵌入行定义的C++成员变量,以火山程序方式定义的成员变量会自动得到处理;
2. 在以上额外处理嵌入方法中,均不用考虑所处类的基础类,基础类需要此类处理需要自行定义,编译器亦会自动一一调用;
3. 上面嵌入方法定义格式中的"@an"和"@sn<current_class>"参见前面的嵌入行说明内容;
4. 以上方法的使用实例请参见"视窗基本类"模块中的"w_base.v"或"MFC界面基本类"模块中的"w_mfc_ui_base.v"火山源程序.
 
三. 视窗项目插件定义的项目扩展属性表:
名称 数据类型 相关特性 应用场合 解释
@视窗.前缀文本 文本型 　类/方法/方法参数/常
量/变量本属性可以应用在类/方法/方法参数/常量/变量定义
成员上,用作在转换到C++代码后在头文件中其成员
定义前方添加一段指定文本.
1. 当应用在类上时,用作在"class"关键字前添加一段
文本;
2. 当应用在方法上时,用作在方法定义语句首部添加
一段文本,但如果所提供文本以'@'字符开头(譬
如"@CDECL"),则将后续文本放置在方法名称的前面
(可以用作加入类似CDECL这样的 调用协议声明);
3. 当应用在方法参数/常量/变量上时,用作在其数据
类型前添加一段文本.
注意火山静态方法默认具有CALLBACK调用协议,但
如果在本属性中指定了其它调用协议,可以将其覆盖.
@视窗.后缀文本 文本型 　 类/方法/方法参数/常
量/变量本属性可以应用在类/方法/方法参数/常量/变量定义
成员上,用作在转换到C++代码后在头文件中其成员
定义后方添加一段指定文本.
1. 当应用在类上且后缀文本首部不为'@'字符时,表
明该文本位于类名后方,仅用作为该类添加其它的基
础类列表;
2. 当应用在类上且后缀文本首部为'@'字符时,表明
后续文本位于类的默认构造方法后,仅用作为该构造2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 44/68

--- 第 45 页 ---
方法添加其它的构造代码,其中可以使
用"@sn<current_class>"代表当前类名;
3. 当应用在方法上时,用作在方法参数表后添加一段
文本;
4. 当应用在方法参数/常量/变量上时,用作在其数据
类型后添加一段文本.
@视窗.预定义宏 文本型[允许多设置项]
[允许后缀]包/类/方法
　
注意: 当应用在包定义成
员上时,仅对该包定义成
员自身有效,不包括程序
内其它源文件中定义的
同名包定义成员.
 本属性用作提供所处包/类/方法正常编译时所需要使
用的预定义宏,多个宏之间使用逗号或换行符分隔,可
以通过"宏名=宏值"表达式同时提供宏值.
注意:
1. 本属性会被提前处理以支持在其它属性中引用
或检查其中定义的宏;
2. 只有当应用了本属性的包/类/方法在用户程序
实际执行流程中任意位置处被使用到时,本属性中
提供的宏才会被定义;
3. 由于上述第2点,不支持在"@编译条件"中检测
本属性内定义的宏.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前宏所具体应用到的编译环境,所支持的修饰
符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.附加编译参数 文本型 本属性用作指定所处包/类/方法正常编译时所需要提
供到C++编译/链接器等工具软件的附加操作参数文
本.
参数文本必须以一个工具软件类型指定标识符开始,
后跟一个冒号分隔符,再后跟具体的参数文本.
所支持的工具软件类型及定义格式如下:
1. "cpp": 提供到C++编译器的附加参数文本;
2. "asm": 提供到汇编编译器的附加参数文本;
3. "link": 提供到C++链接器的附加参数文本.
各类编译参数的优先级从高到低顺序为: 在项目选项
中设置的编译参数 -> 通过本属性设置的编译参数 -
> 系统默认建立的编译参数
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前参数所具体应用到的编译环境,所支持的修
饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 45/68

--- 第 46 页 ---
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
例子: @视窗.附加编译参数.debug = "cpp: /MDd"
@视窗.外部头文件 文本型 本属性用作提供所处包/类/方法正常执行所需求的外
部头文件名(.h),多个文件名之间使用逗号或换行符分
隔.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库 或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时);
8. "全局": 指定该头文件为全局外部头文件,全局
外部头文件始终排列在非全局外部头文件的前面.
每个引入的全局外部头文件均有一个排序用整数
值,所有全局外部头文件都将按照这个整数值的从
小到大进行排序.此值默认为1000,可以通过在本
后缀后附加一个减号字符及一个整数值来指定,譬2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 46/68

--- 第 47 页 ---
如: "@视窗.外部头文件.全局-100"即指定了排序
值为100.
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
注意:
1. 所提供头文件的内容必须为ANSI字符集格式;
2. 所提供头文件名如果为相对路径,则将顺序在以
下目录内查找:
A. 本属性应用位置所处火山源文件的目录路径
(如欲跳过此目录位置,请使用尖括号将其括住
(如: <stdio.h> / <iostream> 等);
B. 本插件附属数据目录的"classlib"子目录;
C. 项目选项中设置的附加头文件搜寻路径;
D. "@视窗.头文件搜寻目录"属性中设置的头文
件搜寻路径;
E. "INCLUDE"系统环境变量中设置的头文件搜
寻路径.
3. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.外部源文件 文本型 本属性用作提供所处包/类/方法正常执行所需求的外
部源文件名,多个文件名之间使用逗号或换行符分隔.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前源文件所具体应用到的编译环境,所支持的
修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 47/68

--- 第 48 页 ---
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
注意:
1. 所提供源文件的内容必须为ANSI字符集格式;
2. 所提供源文件名如果为相对路径,为相对于本属
性应用位置所处火山源文件的目录位置;
3. 所提供源文件可以是 ".cpp" / ".c" / ".cc" /
".cxx" / ".asm" 源代码文件;
4. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.外部资源文件 文本型 本属性用作提供所处包/类/方法正常执行所需求的外
部资源文件名(.rc),多个文件名之间使用逗号或换行
符分隔.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 48/68

--- 第 49 页 ---
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
注意:
1. 所提供资源文件的内容必须为ANSI字符集格
式;
2. 所提供资源文件名如果为相对路径,为相对于本
属性应用位置所处火山源文件的目录位置;
3. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.外部清单文件 文本型 本属性用作提供所处包/类/方法正常执行所需求的外
部清单文件名(.manifest),多个文件名之间使用逗号
或换行符分隔.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前清单文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 49/68

--- 第 50 页 ---
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
注意:
1. 所提供清单文件的内容必须为ANSI字符集格
式;
2. 所提供清单文件名如果为相对路径,为相对于本
属性应用位置所处火山源文件的目录位置;
3. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.外部库 文本型 本属性用作提供所处包/类/方法正常编译所需求的外
部lib/obj库文件名,多个文件名之间使用逗号或换行
符分隔.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前库文件所具体应用到的编译环境,所支持的
修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 50/68

--- 第 51 页 ---
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
所提供库文件名如果为相对路径,则将顺序在以下目
录内查找:
1. 本属性应用位置所处火山源文件的目录路径;
2. 项目选项中设置的附加库文件搜寻路径;
3. "@视窗.库文件搜寻目录"属性中设置的库文件
搜寻路径;
4. "LIB"系统环境变量中设置的库文件搜寻路径.
以下系统库已经在编译时自动加入,无需指定:
kernel32.lib user32.lib gdi32.lib winspool.lib
comdlg32.lib advapi32.lib shell32.lib ole32.lib
oleaut32.lib uuid.lib odbc32.lib odbccp32.lib
comctl32.lib
在文件名中可以使用"$(环境变量名)"引用已有的计
算机系统或编译器内嵌环境变量值,编译器内嵌支持
的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点使
用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.附属文件 文本型本属性用作提供所处包/类/方法运行时所需求外部附
属文件或目录的名称,多个文件或目录名之间使用逗
号或换行符分隔.
当成功编译完毕后,这些文件或目录(包括其中的所有
文件及子目录)将被复制到编译结果文件所处的目录
中,以供其运行时访问.
可以在所提供的附属文件或目录名称后加一个右尖
括号'>'字符,再后跟随一个相对目录路径,该路径相对
编译结果文件所处目录,会被自动创建,用作指定附属
文件或目录的最终拷贝到目录位置.
譬如: "c:\abc.txt > data\txt",系统将会
把"c:\abc.txt"复制到编译结果文件所处目录
的"data\txt"子目录内.
可以通过在属性名后缀中提供对应的修饰符组合来
指定这些文件所具体应用到的编译环境,所支持的修
饰符有以下几组:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 51/68

--- 第 52 页 ---
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
所提供文件/目录名如果为相对路径,则将在本属性应
用位置所处火山源文件的目录路径内查找.
在文件/目录名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内嵌
支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点使
用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.编译信息 文本型 本属性用作提供在编译所处包/类/方法时输出到开发
环境输出窗口的错误/警告/提示信息.
属性值为具体所欲输出的信息文本,该文本如果
以"err:"开始,表明为错误信息,输出该信息将导致编
译失败;如果以"wrn:"开始,表明为警告信息;其它表示
为普通提示信息.
可以通过在属性名后缀中提供对应的修饰符组合来
指定本信息所具体应用到的编译环境,所支持的修饰
符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 52/68

--- 第 53 页 ---
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.库文件搜寻目录文本型 本属性用作提供所处包/类/方法正常编译所需求外部
lib库文件的附加搜寻目录,多个目录名之间使用逗号
或换行符分隔.
在目录名中可以使用"$(环境变量名)"引用已有的计
算机系统或编译器内嵌环境变量值,编译器内嵌支持
的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点使
用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
可以通过在属性名后缀中提供对应的修饰符组合来
指定本信息所具体应用到的编译环境,所支持的修饰
符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 53/68

--- 第 54 页 ---
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.头文件搜寻目录文本型 本属性用作提供所处包/类/方法正常编译所需求外部
头文件的附加搜寻目录,多个目录名之间使用逗号或
换行符分隔.
在目录名中可以使用"$(环境变量名)"引用已有的计
算机系统或编译器内嵌环境变量值,编译器内嵌支持
的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点使
用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
可以通过在属性名后缀中提供对应的修饰符组合来
指定本信息所具体应用到的编译环境,所支持的修饰
符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 54/68

--- 第 55 页 ---
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.需求VS版本 文本型 [允许后缀] 本属性用作提供所处包/类/方法正常编译所需求
Visual Studio 或其生成工具的编译器版本号范围,属
性值为一个或多个版本需求描述项.
每个描述项的格式为: "版本号1 - 版本号2", 两个版
本号及其中的减号均可以被省略,因此有效的格式为
以下几种之一:
1. "版本号1": 当VS版本号等于版本号1时满足要
求;
2. "版本号1 -": 当VS版本号大于等于版本号1时满
足要求;
3. "版本号1 - 版本号2": 当VS版本号大于等于版
本号1且小于等于版本号2时满足要求;
4. "- 版本号2": 当VS版本号小于等于版本号2时满
足要求.
多个描述项之间使用逗号分隔,当任一描述项满足需
求则认为整体满足了需求.
举例,以下属性值指定了需求VS2013或者2017及以
上的版本: "12, 15-"
以下为各个常用 Visual Studio 或其生成工具对应的
编译器版本号:
1. Visual Studio 2010: 10
2. Visual Studio 2012: 11
3. Visual Studio 2013: 12
4. Visual Studio 2014: 13
5. Visual Studio 2015: 14
6. Visual Studio 2017 或其生成工具: 15
7. Visual Studio 2019 或其生成工具: 16
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见前面);
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 55/68

--- 第 56 页 ---
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.需求目标平台 整数本属性用作提供所处包/类/方法正常编译所需求的目
标平台.
属性值可以为以下之一: 所有平台、64位平台、32位
平台
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.需求系统头文件文本型 本属性用作提供所处包/类/方法正常编译所必须存在
的头文件的文件名及该头文件不存在时的错误提示
信息文本(可以被省略),两者之间使用'|'字符分隔.
所指定头文件必须能够在以下路径之一中找到,否则
编译器将报错:
1. 本插件附属数据目录的"classlib"子目录;
2. 项目选项中设置的附加头文件搜寻路径;
3. "@视窗.头文件搜寻目录"属性中设置的头文件
搜寻路径;
4. "INCLUDE"系统环境变量中设置的头文件搜寻
路径.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 56/68

--- 第 57 页 ---
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
在文件名中可以使用"$(环境变量名)"引用已有的计
算机系统或编译器内嵌环境变量值,编译器内嵌支持
的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点使
用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
例子: @视窗.需求系统头文件 = "afxwin.h | 当前
Visual Studio 本地编译环境未安装 MFC ,需要首先
将其安装才能进行编译,安装方法请参考系统菜单
\"工具->安装 Visual Studio 2019 生成工具\"功能
对话框中的相关说明."
@视窗.使用静态运行时
库逻辑型 本属性用作指定所处包/类/方法正常编译时所需要设
置的项目选项"使用静态C++运行时库"的具体属性
值.
可以通过在属性名后缀中提供对应的修饰符组合来
指定当前资源文件所具体应用到的编译环境,所支持
的修饰符有以下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 57/68

--- 第 58 页 ---
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
@视窗.值文件 文本型  成员变量 / 局部变量本属性用作提供数据类型为"文本型"或"字节集类"的
成员/局部变量的初始值内容.
注意:
1. 当变量数据类型为"文本型"时,所提供文件必须
为Unicode-16字符集格式的文本文件;
2. 当变量数据类型为"字节集类"时,所提供文件可
以是任意二进制文件;
3. 所提供文件名如果为相对路径,为相对于本属性
应用位置所处火山源文件的目录位置;
4. 所提供的值文件内容将被直接整合进入所编译
项目的结果文件资源段中,发布时不再需要单独携
带;
5. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.资源类型 文本型 [不允许常量]"视窗文件资源"或其继
承类用作指定资源类所对应的具体Windowss系统资源类
型名称(如"RCDATA","BITMAP"等), 具体应用实例请2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 58/68

--- 第 59 页 ---
参见系统类库中"视窗文件资源"类处的相关代码.
@视窗.返回参考 逻辑型 方法本属性只能在具有返回值的方法上使用,指定该方法
所返回的数据是否以参考方式传递,设置本属性为真
时该方法必须确保所返回的参考数据在方法外部有
效.
@视窗.布局 文本型"窗口容器组件"继承类 /
成员变量本属性只能应用在基础类为"窗口容器组件"的类或其
中数据类型匹配"窗口组件"的成员变量上,用作提供
其在窗口容器布局中的相关配置信息.
只有具有本属性的窗口组件成员变量才会被系统认
为处于当前窗口容器布局中,只有具有本属性的"窗口
容器组件"继承类才会被系统认为其中具有布局数据.
当应用在基础类为"窗口容器组件"的类上时,所具体
所支持的属性表格式如下:
[client_size] = xxx
以上属性中,被中括号括住属性的为可选属性,否则为
必须提供的属性.
名称数
据
类
型解释
client_size文
本
型为连续2个以逗号分隔的整数值,分
别指定布局用户区(即不包括标题
栏/边框等部分)的横向及纵向尺寸.
可以被省略,此时表明均为0.
当应用在"窗口组件"成员变量上时,所具体所支持的
属性表格式如下:
id = xxx
[parent_id] = xxx
[pos] = "left, top, width, height"
以上属性中,被中括号括住属性的为可选属性,否则为
必须提供的属性.
名称数
据
类
型解释
id整
数用作提供 组件所对应的id值,在所处
布局中必须唯一,本属性必须存在.
parent_id整
数用作提供组件所处父组件的id值. 可
以被省略,此时表明父组件为所处窗
口容器组件.
pos文
本
型为连续4个以逗号分隔的整数值,分
别指定在所处父组件中位置矩形的
左边坐标/顶边坐标/宽度/高度. 可
以被省略,此时表明均为0.
@视窗.设置时机 整数"窗口组件"继承类的属
性写方法本属性只能应用在基础类为"窗口组件""的类中的属
性写方法上,指定该属性所允许的具体设置时机.
1. 组件创建后: 仅支持在所处窗口组件创建完毕
后设置(在所处窗口组件创建完毕前设置将失败或
编译报错),此为本属性默认值;
2. 组件创建前: 仅支持在所处窗口组件创建前设
置(在界面设计器中如果修改了本属性将导致所处
窗口组件自动重建);
3. 组件创建前后: 在所处窗口组件创建前后均可
设置(编译器将尽量在所处窗口组件创建前处理本
属性的设置).
@视窗.窗口组件 文本型 [不允许常量]窗口组件类 本属性只能在直接/间接基础类为"窗口组件"的类定
义成员上使用,用作提供其在视窗布局文件中的相关
配置信息.只有定义了本属性的窗口组件类才会在布
局设计器的工具箱中被列出.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 59/68

--- 第 60 页 ---
具体所支持的属性表格式如下:
[hidden]
[preview_unsupported]
* [one_child_enabled]
* [add_child_disabled]
[category] = xxx
* [icon] = xxx
*[ocx] = xxx
[default_event] = xxx
* [default_size] = "xx, xx"
以上属性中,被中括号括住属性的为可选属性,否则为
必须提供的属性.
前面添加星号标注的属性: 基础窗口组件类中的这些
属性可以被其继承窗口组件类自动继承使用(如果其
没有覆盖设置).
名称数
据
类
型解释
hidden逻
辑
型标记本组件设计时为隐
藏状态
preview_unsupported逻
辑
型标记本组件在设计时不
支持实时预览,本属性值
为真的组件将不会被编
译进界面插件中.
one_child_enabled逻
辑
型如果本组件为容器类型
组件,标记是否仅允许在
其中加入一个子组件.
add_child_disabled逻
辑
型标记本组件即使为容器
类型组件,也不允许在其
中加入子组件.
category文
本
型提供本组件所处的分类,
仅设计器使用.
icon文
本
型提供本组件图标的图片
文件名,相对本配置信息
所处火山源文件位于的
目录,为空表示使用默认
图标.
图片文件要求如下: 格式
为BMP,尺寸24x24像素,
颜色深度32位,透明背景
色为洋红(RGB颜色分量:
255, 0, 255).
也可以通过使用'@'字符
引导的 整数索引值来引
用系统内置的相关图标,
该索引值索引到如下图
片:
images/ctrl_icons.bmp
ocx_x64文
本
型如果本组件为OCX组件,
用作提供对应的64位
OCX文件名,相对本配置
信息所处火山源文件位
于的目录,界面设计器在
载入本组件前会自动将
其注册.
ocx_win32 文
本
型如果本组件为OCX组件,
用作提供对应的32位
OCX文件名,相对本配置
信息所处火山源文件位
于的目录,界面设计器在2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 60/68

--- 第 61 页 ---
载入本组件前会自动将
其注册.
default_event文
本
型设置本组件的默认事件
定义方法(可以位于组件
基础类中)的名称,当在窗
口设计器中双击本组件
时,会自动添加该事件的
接收方法.
default_size文
本
型设置当在布局设计器工
具箱中选中本类组件后
再单击预览窗口上指定
位置来加入新的本组件
时,所使用的默认宽度和
高度(两者之间使用逗号
分隔). 如果未指定,则默
认尺寸为100 x 100.
@视窗.结构类 整数  类本属性只能应用在类上,用作指定是否为该类建立对
应其中所有成员变量数据的C/C++结构,该结构内容
一般用作和外部API进行交互时使用.
设置本属性的前提是: 当前类所有成员变量的数据类
型必须为基本数据类型 / 其它设置了本属性的类 /
这两种数据类型的数组.
属性值提供类中各个成员变量在所建立结构中按多
少字节尺寸进行对齐,只能为0/1/2/4/8/16之一,0表
示按默认字节数对齐.
一旦设置了本属性,编译器将自动在当前类中建立名
称为"S"的C++结构数据类型,对应其中的所有成员变
量内容,并建立以下两个公开C++成员方法:
1. S* GetStruct (S* pInf);
该方法将把当前类中各个成员变量的数据内容
填入到pInf所指向C++结构中并将其返回.
2. void SetStruct (const S* pInf);
该方法将把pInf指针中的C++结构数据填入到
当前类的各个对应成员变量中.
注意:
1. 在使用"S"结构数据类型时,前面注意加入其所
处类的类名前缀,即: "所处类名::S",在嵌入语句行
中可以使用"@dt<所处类名>::S"表达;
2. 类中使用嵌入语句行直接加入的C++成员变量
不会被处理;
3. 类中的文本型变量成员在C++结构中会自动转
换为TCHAR*文本指针,如果其为空对象(具有"空
对象"标志)将转换为NULL指针.
@视窗.输入 文本型 [允许后缀]
[方法体必须为
空]公开静态通常方法 本属性只能应用在类的公开静态通常方法上,且必须
与"@输出名"属性配合使用,用作表示该方法的具体
实现由所指定的外部库(由本属性值提供)中指定名称
(由"@输出名"属性值提供)的输出函数来实现.
可以通过在属性名后缀中提供对应的修饰符组合来
指定所具体应用到的编译环境,所支持的修饰符有以
下几组:
1. "x64"(编译64位平台版本时) / "win32"(编译
32位平台版本时);
2. "debug"(编译调试版本时) / "release"(编译发
布版本时);
3. "default"(火山模块链接方式为默认时) /
"dynamic"(火山模块链接方式为动态时) /
"static"(火山模块链接方式为静态时) /
"non_dynamic"(火山模块链接方式不为动态时) /
"non_static"(火山模块链接方式不为静态时);
4. "vs:"加上所需求VS版本号匹配文本(文本格式
见"@视窗.需求VS版本"属性说明,只不过中间的分2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 61/68

--- 第 62 页 ---
隔字符由减号'-'改变为了波浪号'~');
5. "mt"(使用静态C++运行时库时) / "md"(不使
用静态C++运行时库时);
6. "d:"加上以','或';'或'|'字符分隔的预定义宏名称
列表,只要其中的任何一个宏被定义或未被定义(宏
名称前添加一个'!'字符),即满足匹配需求.如:
"d:MODE1|!MODE2"在定义了"MODE1"或未定
义"MODE2"宏时满足需求.本修饰符可以同时存
在多个,以进行多项宏测试;
7. "exe"(编译为窗口可执行文件时) / "dll"(编译为
动态库或部件动态库时) / "lib"(编译为静态链接
库时) / "console"(编译为控制台可执行文件时).
属性名后缀中可以同时存在多个修饰符,但每组修饰
符中只允许同时存在一个,多个修饰符之间使用减号
字符分隔,其排列顺序没有要求.如果某组中的修饰符
一个都没有指定,说明对所对应的编译选项没有要求
(任意均可).
属性值为一个外部dll或lib库文件名,如果为空文本,必
须确保相关外部lib库文件已经默认或使用"@视窗.外
部库"属性引入到程序中,否则本地编译时将报告无法
找到外部符号错误.
默认引入的外部库文件列表: kernel32.lib
user32.lib gdi32.lib winspool.lib comdlg32.lib
advapi32.lib shell32.lib ole32.lib oleaut32.lib
uuid.lib odbc32.lib odbccp32.lib
注意:
1. 一旦设置了本属性值,则方法体必须为空;
2. 如果属性值为lib库文件名且该lib为静态链接库
(即不为dll动态链接库的输入库),则需要在属性值
文本首部加上一个'@'引导字符用作区分;
3. 如果属性值为非lib库文件名,则编译器认为其是
一个动态链接库文件,该文件名路径如为相对路径,
则为相对本程序编译后结果文件运行时所处目录;
4. 如果所输入文件为动态链接库且欲使用序号或
直接指定方式来输入其中函数,则属性值应该为"所
输入DLL文件名 + ? + 所输入函数序号值/所输入
函数名称"格式(此处的"所输入函数名称"不必须为
有效名称文本);
5. 本属性所处方法的定义格式必须与所指定外部
库中输出函数的定义格式完全一致,如果外部输出
函数中的某参数在定义时指定了"@视窗.输出参
数"属性,则所处方法的对应参数也必须指定 同样
属性值的"@视窗.输出参数"属性;
6. 在文件名中可以使用"$(环境变量名)"引用已有
的计算机系统或编译器内嵌环境变量值,编译器内
嵌支持的环境变量引用名有以下:
$(p): 当前编译目标平台英文名称(x64/win32);
$(r): 当前编译结果类型英文名称
(exe/dll/lib/console);
$(d): 当前编译调试版本类型英文名称
(debug/release);
$(pf): 当前项目文件去除路径及后缀后的名称;
$(lm): 当前火山模块的链接方式
(default/dynamic/static);
$(crt): 当前C++运行时库的链接方式(mt/md);
$(vs): 当前所使用VS版本号(注意其中的小数点
使用下划线替代);
$(sp): 解决方案定义文件所处目录;
$(pp): 项目定义文件所处目录;2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 62/68

--- 第 63 页 ---
$(vp): 火山系统所处目录;
$(tdp): 临时数据目录.
@视窗.输出 逻辑型[不允许常量]
[强制编译输出]本属性只能应用在类的公开静态通常方法上,且必须
与"@输出名"属性配合使用,用作表示该方法是否在
动态/静态链接库项目中被编译为对外公开的输出函
数(所公开名称由"@输出名"属性值提供).
注意:
1. 方法所有参数的数据类型必须为以下数据类型
之一:
基本数据类型
字节集类
设置了"@视窗.结构类"属性的类数据类型
本地类, 本地结构, 本地整数基本类型, 本地值
类型, 本地参考类型, 它们由别名类型指定.
2. 如果需要将某结构类参数的数据修改后返回到
调用方,则必须在该参数上指定"@视窗.输出参
数"属性;
3. 方法如果定义有返回值,其数据类型必须为以下
数据类型之一:
非文本型基本数据类型
本地整数基本类型, 本地值类型, 本地参考类型,
它们由别名类型指定.
@视窗.输出参数 逻辑型  方法参数本属性只能应用在设置了"@视窗.输入"或"@视窗.输
出"属性的方法的参数上,参数数据类型必须为设置
了"@视窗.输出参数"属性的类数据类型,用作表示该
参数中的数据是否会在方法内被修改以返回输出数
据到调用方.只有当设置了本属性,编译器才会加入对
应的处理代码.
注释:
1. 属性表特性列中凡是未标注"[允许多设置项]"的说明其在属性表中只能存在一个设置项;
2. 未标注"[允许后缀]"的说明其不允许使用后缀方式;
3. 未标注"[不允许常量]"的支持用外部常量对本属性进行赋值(否则只能使用立即数);
4. 标注有"[方法体必须为空]"的表示如果属性应用在方法上,方法体的内容必须为空;
5. 标注有"[强制编译输出]"的表示属性所应用到的程序成员必定会被编译输出,而不论用户的应用程序是否确实使用过它.
 
四. 实现自己的界面模块
火山视窗平台及其界面设计器支持程序使用各种自定义界面模块,具体示例请参见系统类库中提供的"MFC界面基本类"模块,相关注
意点如下:
1. 界面模块的vgrp文件内容中,必须定义值为"ui"的"unique_mark"属性,该属性值用作标记本模块为界面模块,同时避免一个程序
中同时加入多个界面模块.
以下为"MFC界面基本类"模块的vgrp定义文件相关内容:
name ="MFC界面基本类"
version = 1
explain = "提供基于MFC的界面基本支持功能"
unique_mark = ui
......
2. 界面模块的vgrp文件所处目录的"ui"子目录下必须存在文件名为"ui.vprj"且类型为"DLL动态链接库"的火山项目文件,用作生成
系统界面设计器所需要的该界面模块的插件.
该界面插件项目中需要定义并输出三类接口方法:
A. 由系统自动填写其中内容的接口方法:
此类接口方法只需要在项目中定义并输出即可,其内容由系统自动填写.
B. 需要由用户提供其中内容的接口方法:
此类接口方法需要在项目中定义并输出,其方法实现内容必须由用户提供.
C. 需要由用户提供其中内容的可选接口方法:
此类接口方法与上一类的区别为是可选的,如果用户不想支持该接口,可以不定义该方法.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 63/68

--- 第 64 页 ---
具体所需要定义的所有接口方法及其说明请参见系统安装目录"plugins\vprj_win\classlib\sys\mfc_ui_base\ui\src\main.v"源
文件,其为"MFC界面基本类"的界面插件实现了所有接口方法.
界面插件项目编译后的结果dll文件会首先尝试放在界面模块vgrp文件所处目录的"ui_plugin"子目录下,如果当前计算机用户权
限不够无法写出到此目录,会改为放到系统的文档目录中.
3. 系统在编译所生成的界面模块插件项目时,会自动预定义"_VOL_FOR_UI_DESIGNER"宏,因此在界面模块的代码中可以根据此宏
是否定义来进行一些特殊处理(譬如在类似"可视"属性被设置为假时不进行实际隐藏操作,以免其在界面设计器中不可见等),也可调
用"CVolAppInstance::IsForUiDesigner"虚拟方法不通过宏来获取此信息.
4. 界面模块中必须定义其输出名为以下几种的类:
A. "@CVolWinControl": 所有窗口组件类的基础类,如果某类为此类的继承类,则系统认为其为窗口组件;
B. "@CVolWinContainer": 所有容器类窗口组件类的基础类,该类必定为"@CVolWinControl"类的继承类,如果某类为该类的继
承类,则系统认为其为容器类窗口组件.容器类窗口组件中可以放置其它的子窗口组件,非容器类窗口组件则不允许;
C. "@CVolTopWnd": 所有顶层窗口组件类的基础类,该类必定为"@CVolWinControl"类的继承类. 顶层窗口组件不能为其它容
器类窗口组件的子组件,一般用来表述界面中类似顶层窗口之类的部分.
5. 所有欲放置到系统界面设计器工具箱中的组件,必须定义有有效的"视窗.窗口组件"属性.
6. 如果当前用户项目的程序中加入了某界面模块,那么当用户启动系统界面设计器时,其会首先自动载入该界面模块对应的插件,如
果该插件不存在或者其相对界面模块已经过时,系统会自动提示是否重新编译.用户也可以随时通过执行"工具->编译更新界面插
件"菜单项来手动更新系统类库中所有界面模块的插件.
 
五. 部件DLL程序
部件DLL程序仅在火山视窗软件开发平台中有效,在视窗项目属性中将"编译结果类型"属性设置为"部件DLL动态链接库"即可.
"部件DLL动态链接库"和普通的"DLL动态链接库"没有本质的区别,都是动态链接库,只是前者的功能可以被输出到项目外部使用,并
且由于相关实现代码位于编译后的DLL中,因此安全性是绝对有保证的,可广泛应用于多人协作或闭源项目中.
系统在编译部件DLL程序时,会自动生成其接口程序,使用方将生成的所有接口程序加入到其项目中即可使用部件DLL中的功能.
亦可指定系统在编译部件DLL程序时自动打包生成对应的火山模块,使用方将该模块安装到其火山系统中即可使用其中的功能.
部件DLL中的以下内容会被自动输出到所生成的接口程序中:
1. 所有公开类及其中的公开成员常量和公开成员方法(不会包含具体功能实现代码).
以下类不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 系统类(其所处源文件位于当前所运行火山系统安装目录下的);
2. 模板基础类,其所有模板实现类将被自动展开后输出;
4. 启动类;
5. 窗口组件类;
6. 别名类型不为"火山类"的别名类;
7. 所有设置了值为假的"@输出到部件"属性的类(初级用户无需了解).
以下方法不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 嵌入式方法;
2. 虚拟方法;
3. 类的初始化和清理方法;
4. 事件接收方法;
5. 返回值或任一参数的数据类型为别名类型不是"火山类"的 用户程序别名类;
6. 所有设置了值为假的"@输出到部件"属性的方法(初级用户无需了解).
以下常量不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 所有设置了值为假的"@输出到部件"属性的常量(初级用户无需了解).
系统在编译部件DLL程序时会自动处理该DLL程序中指定的所有附属文件(通过"视窗.附属文件"属性),并会将其复制到所生成的接口
数据目录中及在所生成的接口程序中设置相关属性.
 
六. 其它:
1. 火山视窗项目中的所有用户类都必须为"CVolObject" C++类(在核心源码中定义)的继承类,无论是所使用的别名类还是外部基
础类;
2. 火山文本型数据类型对应"CVolString" C++类(在核心源码中定义);
3. 有关"空对象"关键字在视窗版的用法:
每一个火山类对象(由于文本型实际上也是一个火山对象类,因此也包括它)均具有一个名为"空白对象"的系统标志,当此标志被置
位时,则编译器认为该对象为一个空对象.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 64/68

--- 第 65 页 ---
空对象的使用方法:
A. "空对象"关键字的用法和火山其它平台基本是一致的,唯一不同在于,视窗版里面的空对象是存在对应对象实例的(只不过该对
象设置了"空白对象"系统标志),所以"空对象"关键字在视窗版中实际代表的是一个设置有"空白对象"系统标志的空白(其中内容
为初始状态)对象;
B. 调用某方法时可以将一个"空对象"关键字作为参数 值传递过去时,该关键字可以匹配任何对象类型及文本型,编译器将自动创
建一个对应数据类型的对象实例,并设置其"空白对象"标志,然后将其传递过去;
C. 判断某对象是否设置了"空白对象"标志,可以通过"=="及"!="操作符与"空对象"关键字进行比较;
D. 设置某对象的"空白对象"标志可以直接赋值一个"空对象"关键字,注意 被赋值对象中的原有内容也将同时被清除到初始状态.
4. 火山视窗项目不支持定义参考型数据,因此项目中以下火山程序特性与安卓项目有所不同:
A. 不支持定义参考型变量,所有的变量赋值操作均采用直接的内容复制方式. 特例: 方法的文本型和对象型参数数据传递仍然采
用参考传递方式;
B. 非嵌入式方法不支持定义数组型参数,也不支持返回数组型数据(可以通过使用对应的数组封装类来替换);
C. 不支持使用维数为0的数组型数据类型(非嵌入式方法参数除外),同样通过使用对应的数组封装类来替换;
其它方面完全一致.
5. "vol_user_app_info.h"头文件:
火山编译器为每一个被编译的火山程序均建立并自动包含了此头文件,其中提供了用户火山程序的相关设置项,其内容类似如下:
#define _T_VOL_USER_APP_NAME _T ("火山应用程序")  // 用户程序的名称
#define _VOL_USER_APP_VERSION_NUMBER 1  // 用户程序的版本号
#define _VOL_USER_APP_ICON_RES_ID 100  // 用户程序所设置图标的资源ID
编译器会自动将该头文件所处目录加入到系统头文件搜寻目录中,因此用户可以在程序中除开外部头文件外的任何位置(包括外
部源文件)引用其中的内容.
6. 快速编译的注意事项:
火山编译器支持使用C++编译器的预编译头文件机制及基于依赖关系的编译更新判定,相比上次没有被更改的源文件不会重新编
译,因此已经编译过的程序再次编译时速度将会得到提升.但是目前需要注意的是,如果下列类型文件被修改,目前编译器尚不能自
动识别:
1. 用户程序使用"@视窗.外部资源文件"属性所导入的外部RC资源文件(不包括该文件本身)内容中二次引用的其它文件;
2. 用户程序使用"@视窗.外部源文件"属性所导入外部汇编类型ASM源文件(不包括该文件本身)内容中二次引用的其它文件.
如果程序中所使用到的上述文件被修改或替换,必须执行重新编译或者启用"始终重新编译"项目配置属性开关后进行编译才能得
到正确结果.
7. 编译火山视窗项目时系统自动加入的相关宏,可以在程序中直接使用:
名称 设置位置 解释
_VOL_WIN_EXE编译参数行 编译结果类型为"窗口
EXE可执行文件"时
_VOL_DLL编译结果类型为"DLL动
态链接库"或"部件DLL动
态链接库"时
_VOL_COM_DLL编译结果类型为"部件
DLL动态链接库"时
_VOL_CONSOLE_EXE编译结果类型为"控制台
EXE可执行文件"时
_VOL_X64 目标平台为"64位"时
_VOL_WIN32 目标平台为"32位"时
_VOL_DEBUG 编译程序的调试版本时
_VOL_FOR_UI_DESIGNER当前正在编译被界面设
计器所使用的代码时
_VOL_HIGH_DPI在高DPI屏幕上程序运行
将自动缩放程序界面时
_VOL_CLLM_STATIC以静态方式链接火山模
块. 如果
_VOL_CLLM_STATIC和
_VOL_CLLM_DYNAMIC
均未定义,则表明以默认
方式链接火山模块.
_VOL_CLLM_DYNAMIC 以动态方式链接火山模
块. 如果
_VOL_CLLM_STATIC和
_VOL_CLLM_DYNAMIC2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 65/68

--- 第 66 页 ---
均未定义,则表明以默认
方式链接火山模块.
_VOL_DEV_VERSION_NUMBER
vol_user_app_info.h编译此应用程序的火山
平台版本号
_VOL_DEV_LANG_ID编译此应用程序的火山
平台语言ID(使用国际标
准码: 简体中文:2052; 英
文:1033)
_VOL_DEV_CATEGORY编译此应用程序的火山
平台类别: 0:免费版; 1:测
试版; 2:个人版; 3:企业
版; 4:专业版
_T_VOL_USER_APP_NAME 用户程序名称
_VOL_USER_APP_VERSION_NUMBER 用户程序版本号(小数)
_VOL_USER_APP_MINOR_VERSION_NUMBER 用户程序次版本号(小数)
_T_USER_APP_VERSION_NAME 用户程序版本名称
_VOL_USER_APP_ICON_RES_ID 用户程序图标资源ID
 
八. 服务器项目插件相关:
在进行服务器项目类库封装工作之前,建议先仔细阅读一下系统目录"plugins\vprj_server\classlib\sys\base"内的所有基本类库封
装源码,这些源码(以下简称核心源码)提供了封装的基础和核心代码,通过"服务器基本类"模块引入到用户的火山程序中,同时建议
将"服务器基本类"模块中的火山程序及其编译后的结果GO程序内容也阅读对比一下,里面对各种封装方法基本上都有演示.
一. 嵌入行 内容分区:
嵌入行内容分区用作指定某段嵌入行内容的所处区域类型,分区内容中间不能存在非嵌入行内容,注意仅支持 类嵌入行内容分区 .
在"<v ar>"和"</v ar>"中定义的嵌入行内容被认为位于编译后的对应"struct"类型中,用作定义其中的 成员变量,在"<v ar>"和"
</var>"外部定义的嵌入行内容将位于全局代码块中.
 
二. 类中的额外处理嵌入方法
在类嵌入行中定义的一些具有特定名称和格式的嵌入方法具有特殊意义,列表如下:
额外处理嵌入方法定义格式 解释
func (this @sn<current_class>) @an<_OnInitExtra> ()如果存在,在所处火山类的对象构造时被自动调用,用作初始化所
处火山类中的额外动态成员变量.
类的静态成员变量请直接使用go的包初始化函数"init"初始化.
func (this @sn<current_class>)
@an<_OnAfterCopyExtra> ()如果存在,在复制另一相同类型火山类对象中的内容到本对象中
后被自动调用,用作进行相关附加处理.
注明:
1. 在以上额外处理嵌入方法中,均不用考虑所处类的基础类,基础类需要此类处理需要自行定义,编译器亦会自动一一调用;
2. 上面嵌入方法定义格式中的"@an"和"@sn<current_class>"参见前面的嵌入行说明内容.
 
三. 如何引入外部GO代码:
外部GO代码必须以GO模块的方式导入,也就是说,在GO源码目录中,必须具有go.mod模块定义文件. 在编译用户程序时,编译器会自
动搜寻载入以下位置中所有 直接/间接子目录内的GO模块:
1. 待编译项目内所有火山程序源文件所处目录;
2. 服务器插件附属数据目录内的系统共享GO模块目录: "plugins\vprj_server\classlib\shared\pkg\mod";
3. 服务器插件附属数据目录内的用户共享GO模块目录: "plugins\vprj_server\classlib\user\shared\mod"
需要注意的是:
1. 所载入的GO模块如需在程序中使用,还需要在对应位置使用"@服务器.导入"属性将其导入;
2. GO模块的所处目录名最好携带上版本信息,以便在发现多个同模块路径名GO模块时自动选择最高版本的那一个,如:
"yaml.v2@v2.4.0", "go.starlark.net@v0.0.0-20220816155156-cfacd8902214"等. 版本信息格式与GO语言规范所要求的一
致;
3. 以下GO模块会被自动导入,其中代码可以直接在程序中使用:
A. 所有GO标准包模块;
B. 系统目录"plugins\vprj_server\classlib\sys\base"内的GO模块.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 66/68

--- 第 67 页 ---
4. 封装GO别名类时可以同时使用新增的"@别名类型"系统属性指定该别名的具体类型.
 
四. 服务器项目插件定义的项目扩展属性表:
名称 数据类型 相关特性 应用场合 解释
@服务器.系统需求 文本型  包/类/方法 本属性用作提供所处包/类/方法正常编译所需求的最低
GO 发行版本号,如: 属性值"1.21.1"指定了所需求的最低
GO 版本号为"1.21.1".
本属性可以应用在包/类/方法定义成员上. 注意: 当应用在
包定义成员上时,仅对该包定义成员自身有效,不包括程序内
其它源文件中定义的同名包定义成员.
@服务器.是否启用
CGO逻辑型  本属性用作指定所处包/类/方法正常编译时是否需要或不
能启用CGO,为真表示需要启用(此时需要安装对应的本地
GCC编译器),为假(默认值)表示不能启用.
本属性可以应用在包/类/方法定义成员上. 注意: 当应用在
包定义成员上时,仅对该包定义成员自身有效,不包括程序内
其它源文件中定义的同名包定义成员.
@服务器.导入文本型
[允许多设置
项]本属性用作导入所处包/类/方法正常编译时所需求GO程序
包的路径名称(见GO语言规范).
在包路径文本后可以选择跟随一个右尖括号'>'字符分隔的
名称来指定该包在程序中的新访问名称,该名称为有效的名
称文本或"."/"_"等特殊名称(意义见GO语言规范),如:
"voldp.com/user/package1 > pkg1".
编译器对非标准GO程序包所处GO模块的搜寻步骤如下:
1. 在所处火山程序源文件目录及其下属目录中搜寻:
2. 在插件附属数据目录
的"plugins\vprj_server\classlib\shared\pkg\mod"子
目录及其下属目录中搜寻,所有 系统共享本地模块均存
放在此目录中:
3. 在插件附属数据目录
的"plugins\vprj_server\classlib\user\shared\mod"子
目录及其下属目录中搜寻,所有 用户共享本地模块均存
放在此目录中:
4. 交由GO本地编译器去处理(首先在其模块缓存中查找,
如仍找不到则去远端服务器上下载).
在第1步和第2步中找到的模块称为本地GO模块,否则为远
端GO模块(其在编译程序时可能需要通过网络去远端服务
器上下载).
注意:
1. 存放本地GO模块"go.mod"文件的子目录名称最好
以"@v"文本加其标准GO模块版本号文本(格式见
https://golang.google.cn/doc/modules/version-
numbers 处描述)结尾,用作提供该GO模块的具体版本
号,否则编译器将认为其版本号为"v0.0.0". 如:
"c:\mymod\yaml.v2@v2.4.0",
"c:\mymod\go.starlark.net@v0.0.0-
20220816155156-cfacd8902214"等.
2. GO标准包"bytes, context, fmt, errors, math, os,
io, io/fs, slices, strconv, strings, time"被编译器默认自
动导入,不用再使用本属性导入.
本属性可以应用在包/类/方法定义成员上. 注意: 当应用在
包定义成员上时,仅对该包定义成员自身有效,不包括程序内
其它源文件中定义的同名包定义成员.
@服务器.附属文件 [允许多设置
项]本属性用作提供所处包/类/方法运行时所需求外部附属文
件或目录的名称,多个文件或目录名之间使用逗号或换行符
分隔.
当成功编译完毕后,这些文件或目录(包括其中的所有文件及
子目录)将被复制到编译结果文件所处的目录中,以供其运行
时访问.2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 67/68

--- 第 68 页 ---
可以在所提供的附属文件或目录名称后加一个右尖括
号'>'字符,再后跟随一个相对目录路径,该路径相对编译结
果文件所处目录,会被自动创建,用作指定附属文件或目录的
最终拷贝到目录位置.
譬如: "c:\abc.txt > data\txt",系统将会把"c:\abc.txt"复制
到编译结果文件所处目录的"data\txt"子目录内.
所提供文件/目录名如果为相对路径,则将在本属性应用位置
所处火山源文件的目录路径内查找.
本属性可以应用在包/类/方法定义成员上. 注意: 当应用在
包定义成员上时,仅对该包定义成员自身有效,不包括程序内
其它源文件中定义的同名包定义成员.
@服务器.标签  类的非静态成员变
量本属性只能设置在类的非静态成员变量上,用作为该变量提
供GO标签文本.
@服务器.值文件  变量本属性用作提供数据类型为"文本型"或"字节[]"(一维字节
数组)的成员/局部变量的初始值内容.
注意:
1. 当变量数据类型为"文本型"时,所提供文件必须为
utf8 字符集格式的文本文件;
2. 当变量数据类型为"字节[]"(一维字节数组)时,所提供
文件可以是任意二进制文件;
3. 所提供文件名如果为相对路径,为相对于当前火山源文
件的目录位置;
4. 所提供的值文件内容将被直接整合进入所编译项目的
结果文件中,发布时不再需要单独携带.
注释:
1. 属性表特性列中凡是未标注"[允许多设置项]"的说明其在属性表中只能存在一个设置项;
 
五. 其它:
1. 火山服务器项目中的所有火山对象类和其外部基础类都必须实现"vol.IObject"接口,具体封装方法参见如"程序基础类"
(vol.CUserApp)这些样例类代码,如果欲在程序中直接使用GO本地类或本地接口,请使用指定了"@别名类型"的别名类;
2. 服务器子平台的字节/字符/整数这三种 基本数据类型 与其它子平台有所不同,具体请见该处的描述;
3. 服务器子平台的对象/数组数据赋值方式与安卓子平台一样,采用的是参考传递方式;
4. 服务器子平台的类不支持"类清理"方法;
5. 用户的程序代码必须位于同一个名称的包中.
 
 
--- 完 ---2025/9/16 19:57 ⽕⼭平台封装语法⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com/p_grammar.htm 68/68


================================================================================
文件: 火山平台语法学习手册(普通用户图文版).pdf
================================================================================

--- 第 1 页 ---
火山平台语法学习手册
(普通用户图文版)
一. 相关术语:
1. 面向对象的程序设计方法
面向对象的程序设计方法是目前最先进的程序设计理念,也是被目前绝大多数程序设计语言都使用的一种程序设计方法,它可以最大限度地提高程序代码的可复用性和可维护性,如
果您想学习程序设计,那么这种设计方法是必须需要掌握的.
为了降低用户的学习门槛,火山对这套理念进行了最大限度的精简,一些晦涩难懂的和一些不大常用/实用的内容均被剔除出去,只保留了其精华和必须需要掌握的部分,因此学习起
来并不难.
注意:
A. 如果您对面向对象的程序设计方法了解不多,推荐您先阅读[面向对象的程序设计方法]章节,再来阅读本手册后续内容,将会帮助您对后续内容的理解;
B. 由于所基于系统类库的不同(语法层面是一致的),本手册中的例程示图如必要会提供火山视窗和火山安卓两个平台程序版本.
 
2. 名称:
火山平台中的名称分为以下这些:
A. 单名称:
单名称必须以英文字母/下划线字符/汉字字符开头,后面跟随英文字母/下划线字符/数字/汉字字符.如未特殊标注,本文档中所提出的所有"名称"均为单名称.
B. 全名称:
以句点字符组合在一起的单名称称为全名称,如"火山.程序". 单名称可以被认为是全名称的一种(只包括一个单名称的全名称).
实际上,目前只有包名才使用到由多个单名称组成的全名称.
注意: 火山中的名称对英文字母的大小写敏感,譬如"abc","ABC"所指定的不是同一名称.
下图为名称在程序中的使用和定义方法:
操作提示:
火山程序中的名称就其来源可以分为以下两种:
1. 系统中预先定义的名称. 主要是关键字和系统属性名称;
2. 用户程序中自行定义的名称. 主要是各种定义型程序成员(如类/方法/常量/变量/参数)的名称.
这些名称均可以通过系统内置的首拼或全拼输入法输入. 如:
上图中定义"变量A"和"变量a"时所使用的"整数"数据类型,可以使用首拼输入方式"zs"或者全拼输入方式"zhengshu"输入;
上图中所定义的"测试方法1"方法,可以使用首拼输入方式"csff1"或者全拼输入方式"ceshifangfa1"在程序语句中输入.
具体输入法匹配规则请见系统输入法插件被载入时在开发环境状态框中输出的提示信息:
　
3. 立即数
立即数用作表达一个直接的字面数据值,有以下几类:
1. 数值立即数:
A. 十进制整数或小数,小数支持使用科学计数法,如: 1.32e3
B. 十六进制整数: "0x"后跟数字0-9或字母A-F(大小写无关). 如: 0x12AC3F
C. 字符整数值: 使用单引号括住的字符,如'A','吴'.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 1/42

--- 第 2 页 ---
如果欲强行指定数值的数据类型,可以使用"强制类型转换"操作符,譬如"(长整数)1",提供了一个数据类型为长整数的数值立即数.
如果某整数的数值超出了整数的最大有效范围,将自动被设定为长整数数据类型. 如: 0x123456789A 将被自动认为是长整数数据类型.
2. 逻辑型立即数: 为真/假.
3. 字符串立即数:
为用双引号括住的一段文本,文本内支持使用以下转义符:
转义符 解释
\b 退格符
\f 换页符
\r 回车符
\n 换行符
\t 水平制表符
\' 单引号
\" 双引号
\\ 反斜杠
\u 后跟1-4个十六进制字符,为所对应字符的Unicode代码值.
\ 后跟1-3个八进制字符,为所对应字符的代码字节值.
\x 后跟1-2个十六进制字符,为所对应字符的代码字节值.
如: "您好!\r\n祖国" 在"您好!"和"祖国"之间通过使用转义符插入了一个 回车和换行符.
注意: 在火山视窗平台里面,如果欲达到换行效果,需要插入"\r\n"回车和换行两个字符.
4. 数组立即数(只能在提供常量/变量数组初始值时使用):
为使用花括号括住的立即数的组合,如: { 1, 2 }, 多维数组可以嵌套,如: { { 1, 2 }, { 3, 4 }, { 5, 6 } }
注意: 多维数组的同一维内成员数目必须相等,譬如如下格式的数组立即数是不允许的: { { 1, 2 }, { 3 } } ,因为其第2个维中的成员数目不相等.
下面为各类立即数在初始值和程序语句中的使用例图:
　
 
4. 数据类型:
数据类型可以为以下几种:
A. 基本数据类型;
B. 用户程序中定义的类,称为类数据类型;
C. 数组数据类型
数组数据类型为基本或类数据类型后面跟随一个或多个数组维定义组成.
每个数组维定义由左右中括号("[]")组成,如果应用在变量定义上,可以在中括号内部置入具体成员数目,表示生成具有对应维数的数组变量实例. 如:
单维文本数组数据类型: 文本 []
多维整数数组数据类型: 整数 [] []
定义具有指定成员数目的整数数组实例变量: 整数 [3], 整数 [3][2]
数据类型可以在定义常量/变量/参数/方法返回值时使用,也可以在程序语句中使用,如:
视窗示例2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 2/42

--- 第 3 页 ---
　
二. 火山程序结构:
一个火山程序的构成结构如下:
1. 包定义
1. 文档嵌入行(普通用户无需了解)
2. 文档注释行
3. 类定义
1. 类嵌入行(普通用户无需了解)
2. 类注释行
3. 类成员常量
4. 类成员变量
5. 类成员方法
1. 方法参数
2. 方法局部常量
3. 方法局部变量
4. 语句注释行
5. 语句嵌入行(普通用户无需了解)
6. 语句行
下面是一个火山程序的基本样图(天蓝色文字为说明,下同):
 
视窗示例 安卓示例2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 3/42

--- 第 4 页 ---
 
　
1. 包:
包名为全名称(即中间可以包括句点),通常使用的名称格式为以组织或事物的从大到小排列,譬如:"湖北.武汉.递归公司"/"递归公司.软件开发部"/"火山系统.安卓平台.测试程序"等
等,这些都可以,自己维护这些代码时觉得清晰易懂就行了.
一个包内可以包含多个文档注释行/文档嵌入行/类定义,所有这些内容都被认为位于这个名称的包中.
每新建一个火山程序,都会在首部固定加入一个不可被删除的包定义成员,该成员始终位于源文件的首部而且只能存在一个:
多个程序文件可以具有相同的包名,此时其中的内容被认为处于同一个包中:
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 4/42

--- 第 5 页 ---
 
2. 注释
可以使用以下方式定义火山程序中的注释:
A. 任何定义型成员其名称如果以连续两个'/'字符引导,说明其处于被注释状态,其以及其中的所有内容(包括直接/间接子成员)在编译时都将被忽略;
B. 在类外部的程序行,被称为文档注释行; 在类内部但是在类方法外部的程序行,被称为类注释行;
C. 在类方法内部可以使用连续两个'/'字符引导一段一直到行尾的语句注释文本.
文档注释行/类注释行/从行首开始的语句注释文本,其尾部如果以一个或多个减号/等号字符结束,IDE将自动在其后绘制对应长度的单/双分隔线.可以在IDE设置选项中将此机制关
闭.
从上图可以看到,任何不在方法内部的文本行均被看作是注释行,请注意这一点.
 
3. 类
类用作定义一个可以具有各种子成员的复合数据类型,这些子成员为:
1. 类注释行;
2. 类嵌入行(普通用户无需掌握);
3. 类成员变量;
4. 类成员常量;
5. 类成员方法(通常方法/属性读或写方法/事件定义或接收方法).
注意事项:
1. 同一个包中不允许出现相同的类名;
2. 类名为单名称(即其中不允许使用句点). 实际上包名是唯一允许中间使用句点的名称;
3. 名称为"启动类"的类被用作特殊指定用户程序的启动类,用户程序将从此处开始执行;
4. 引用类名时可以直接使用类名称,或者使用"包名.类名"进行引用,此格式被称为类的全名称,当访问其它包中的公开类时,必须提供类的全名称;
5. 在需要访问类实例对象的成员时,在类对象实例名称和欲访问的子成员名称之间使用句点分隔即可,前面指定具体访问哪一个对象实例,后面指定访问这个对象实例的具体哪个
子成员. 如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 5/42

--- 第 6 页 ---
分别访问了"测试类"的实例对象"测试类对象"的"成员变量1"/"成员常量1"/"成员方法"三个子成员.
基本属性表:
名称 解释
基础类指定本类的基础类名称,可以是单名称/全名称,也可以是空文本(表示无基础类).
如果定义了非空基础类,当前类将自动继承所有来自该基础类的内容,如果该基础类还有基础类,将一并继承过来,此时本类称为这些类的"继承类".
注: 有一些编程语言也称"继承类"为"子类","基础类"为"父类",意思是一样的.
继承类访问其直接/间接基础类中的成员不需要其为公开状态.
例图说明:
公开 指定本类是否对外公开.
公开类可以在所处包外部被访问,而非公开类只能在所处包内部被访问.
例图说明:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 6/42

--- 第 7 页 ---
 
4. 类成员或局部常量
常量用作定义一个不允许在程序中进行修改的恒定值.
常量与变量有以下不同之处:
1. 常量只能在定义时被赋予初始值,不能在程序中被修改;
2. 在设置常量初始值时,只能提供立即数,不能提供其它常量;
3. 常量的数据类型只能为基本数据类型(注: 还可以为常量类,但普通用户不需了解);
4. 常量的"静态"属性固定为真,即:常量并未存放在类的对象实例中,而只存放在类信息本身中,所以无论定义多少类对象实例,常量都只存在一份.因此常量的访问方式与静态成员
变量的访问方式 是一样的,在其所处类/继承类外部需要以"所处类名.常量名"的方式访问.
基本属性表:
名
称解释
类
型提供常量的数据类型,只能是基本数据类型或常量类.
公
开指定本常量是否公开.公开常量可以在所处类外部被访问,而非公开常量只能在本类或者其继承类中访问.
局部常量没有本属性.
初
始
值提供常量的初始值立即数,必须对应常量的数据类型.
在设置常量初始值时,只能提供立即数,不能提供其它常量.
如果数据类型为常量类,则应该直接提供该常量类所对应基本数据类型的立即数,如:
视窗示例
上图为 视窗系统类库中的一个名为"位图资源"的常量类,其初始值数据类型为文本型,下图为一个设置了对应数据类型初始值的常量.此时 视窗平台编
译器会自动对此类常量进行特殊处理,以收集并建立对应的视窗资源.
上图为安卓系统类库中的一
型,下图为一个设置了对应
常量进行特殊处理,以收集
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 7/42

--- 第 8 页 ---
注意: 普通用户只需要知道当常量/变量的数据类型为系统类库中所提供的常量类时,可以直接设置对应的基本数据类型立即数初始值即可,其它方面(譬如如何建立常量类),无需掌握
常量一般用作定义一些恒定值,譬如圆周率的PI. 这样既能避免多次输入出错,还能提供程序的运行效率(便于优化).
下图是在火山安卓基本库的"数学运算类"中定义的2个数学常量及其使用例子,在需要使用这些值的地方可以使用常量来代替(如"数学运算类.E". "数学运算类.PI"),避免输入错误:
注: 火山视窗中的对应类名为"常数",用法是一致的.
 
5. 类成员或局部变量
变量的内容允许在程序中被动态修改.
基本属性表:
名
称解释
类
型提供变量的数据类型,可以是基本数据类型或者类数据类型.
静
态指定是否为静态变量.
静态成员变量有以下特点:
1. 静态变量在所处类载入后即保持始终存在,并且未存放在类的对象实例中,而只存放在类信息本身中,所以无论定义多少类对象实例,静态成员变量都只存在一份;
2. 由于静态成员变量存放在类本身中,所以在其所处类/继承类外部需要以"所处类名.静态成员变量名"的方式访问:
如上图,在"测试类1"中定义了一个名为"静态成员变量1"的成员变量,在测试类2中红色箭头所指向的代码是正确的访问方式,黄色箭头所指向的代码虽然也能被编译器所接受
无论在"测试方法"方法中定义了几个"测试类1"的对象实例("对象1"/"对象2"),"测试类1"的"静态成员变量1"始终只存在一份,因此红色和黄色箭头指向的代码所访问的"静态
3. 由于静态变量初始化时不存在所处类实例,静态成员变量不支持自动挂接其事件到其所处类,在需要时必须通过"挂接事件"命令手动挂接.非静态的类成员变量,如果其数据类型
参
考指定是否为参考变量.
注意: 在火山视窗平台中,不支持定义参考型数据,这是两个平台在语法层面上唯一不同的地方.当在火山视窗程序中定义参考变量时,将会如图所示:
因此下面的讲述均为针对火山安卓平台.
参考变量有以下特点:
1. 参考变量本身并不会创建对象实例,而是用作保存到其它对象实例的指向性信息(即参考),访问参考变量等于访问该变量所参考到的另一个对象实例.反之非参考变量("参考"属
2. 由于其本身并未定义对象实例,因此参考变量在使用前必须首先赋值(即赋予其所参考到的对象实例).
想想我们手机通讯录中的联系人条目,每个条目均相当于一个"参考变量",它记录有指向某联系人(对象实例)的相关信息,但是不为该联系人(对象实例)本身.
请查看如下代码:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 8/42

--- 第 9 页 ---
首部定义了一个"测试类1"的对象实例"变量1",然后定义了一个"测试类1"的参考变量"变量2".
两者的区别在于: 前者创建了真实存在的对象实例,而后者仅仅用作存放一个参考.
由于"变量1"存在对象实例,因此后面调用其"方法1"方法不会有问题,而紧跟其后的"变量2.方法1 ()"调用就会被编译器报错,因为其尚未设置所欲参考到的对象实例.
在后面通过将"变量1"赋值过去,从而将"变量2"参考到了"变量1"所指向的对象实例,因此再调用"变量2.方法1 ()" 就不会出错了,其等效于调用了"变量1.方法1 ()".
获得对象实例的各种方法:
1. 通过定义非参考变量的方式直接创建:
2. 通过所提供的类方法创建:
某些类不能通过直接定义该类的变量来创建其对象实例,因为欲创建其对象实例时可能还需要提供一些必要的参数信息或者满足其它前提. 如:
在定义"屏幕度量信息类"时,指定了不允许直接定义其非参考对象变量:
因此在编译下图程序时,将会出错:
我们查看一下该类所提供的所有方法,可以找到创建并返回其对象实例的方法为:
那么我们把前面的程序改为如下内容就可以了:
总结: 如果某个类指定了不能直接定义其对象实例变量,那么肯定可以通过调用某个方法获得其对象实例.绝大多数情况下该方法由此类自行提供,名称中一般包括"创建"/"新
如"可绘制对象类"的如下方法:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 9/42

--- 第 10 页 ---
注意,使用参考属性时最容易犯的错误:
1. 遗漏设置必要的"参考"属性,如下图:
"方法1"和"方法2"中的"变量1"在定义时均没有设置"参考"属性,这样编译器会自动为其创建一个"测试类"对象实例,但是所创建的该对象实例在程序中根本没有被使用,从而导致
所以每当我们定义一个数据类型为类的变量时,一定要检查是否需要为其设置"参考"属性 ,判断方法就是编译器自动创建的对象实例有没有在程序中被使用到,如果没有被使用到
 
2. 使用空参考变量:
所谓"空参考变量",即没有参考到任何对象实例的变量,如:
像这样的代码,首先在编译时会报错.其次,即使编译通过,在运行时也会报告类似如下的空指针错误信息(NullPointerException, Java目的平台):
所以我们在使用参考变量前,一定要记得首先确保它已经参考到了一个非空对象的对象实例.
公
开指定本变量是否公开.公开变量可以在所处类外部被访问,而非公开变量只能在本类或者其继承类中访问.
局部变量没有本属性.
初
始
值提供变量的初始值,必须对应变量的数据类型.
设置参考变量的初始值时,可以提供空对象.
如果未提供初始值,非数组变量的初始值如下:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 10/42

--- 第 11 页 ---
数值型变量的初始值为0,逻辑型变量的初始值为假,文本型变量的初始值为""(即空文本).对于火山安卓平台,参考变量("参考"属性为真的变量)及非基本数据类型变量的初始值均
此所有非基本数据类型变量均为对应的对象 实例.
数组变量的初始值如下:
数值型数组变量的每个成员初始值为0,逻辑型数组变量的每个成员初始值为假,其它所有数据类型(包括文本型)数组变量的每个成员初始值 如果为火山安卓平台则为空对象,为
因此,在火山安卓平台中,对于非数值和逻辑型的数组,其每个成员在使用前必须首先被单独赋值,如:
与常量不同的是: 在设置变量初始值时,可以提供立即数,也可以提供常量.
变量初始值设置例图:
视窗示例 安卓
从上图中可以看出,"变量2"使用常量作为初始值,"变量9"和常量初始值一样,当数据类型为常量类时,可以为其设置所对应基本数据类型的立即数初始值.
　
6. 类成员方法
定义类的方法,用作类对外提供其所支持的功能时使用.
方法的名称:
1. 方法的名称必须为单名称,而且必须在类的所有成员名称中唯一;
2. 名称为"类_初始化"的方法为类的初始化方法(在类对象被创建时自动调用),该方法不携带任何参数并且不返回值,对是否公开没有要求. 如下图:
3. 名称为"类_清理"的方法为类的清理方法(在类对象被销毁时自动调用),该方法不携带任何参数并且不返回值,对是否公开没有要求.
注意:在火山安卓平台上,由于内存垃圾自动回收机制的限制,类清理方法不被支持.
以下为在火山视窗平台上的演示程序:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 11/42

--- 第 12 页 ---
提示: "类_初始化"和"类_清理"方法在开发环境中可以通过按下Ctrl+I组合键调用对应对话框自动插入对应空方法:
方法的基本属性表:
名称 解释
返回值类型提供方法执行完毕后所返回数据的数据类型
如果指定了非空数据类型,则方法中就必须调用"返回"关键字语句来返回对应数据类型的数据:
静态 指定是否为静态方法. 注意:
1. 与类的静态成员变量一样,类的静态方法需要通过"类名.方法名"的方式来引用;
2. 在静态方法内部,只能访问其所处类或者其所处类的基础类中的成员常量或者静态成员变量. 如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 12/42

--- 第 13 页 ---
其中定义了一个名为"测试方法"的静态方法,其中第一行代码同时访问了类中的"静态变量1"和"常量1",这是被允许的,然后后面的一行代码访问
了非静态变量"变量1"(红色箭头指向处),这是不被允许的,编译器将报错.
3. 如果静态方法所定义第一个参数的数据类型为方法所处类本身而且没有指定参数匹配和需求类型(普通用户无需了解),那么可以基于该类对象
以动态格式来调用该静态方法,编译器将自动进行转换:
譬如上面的程序在"测试类"中定义了一个名为"方法1"的静态方法,它第一个参数的数据类型为"测试类"自身,那么在程序中其它位置调用这个
方法时,可以采用以下两种方式:
1. 测试类.方法1 (变量1, 1)
2. 变量1.方法1 (1)
第一种方式是标准的静态方法访问方式,第二种就是优化后的方式,其第一个参数被移动到方法访问对象上,这种方式在编译时将被自动转换为
第一种方式.
采用这种优化方式的具体要求为:
静态方法第一个参数的数据类型必须为其所处类本身.
只要满足这个要求,该静态方法被调用时第一个参数就可以被移动到其方法访问对象上,其后续参数正常填写.
类别 指定方法的具体类别,可以为以下几种之一(关于属性和事件类别方法后面有专门章节描述,此处了解一下就可以了):
1. 通常: 表明本方法为通常方法
　
2. 属性读: 表明本方法为属性读取方法. 该属性可以在程序语句中被读取.
如果属性读方法为静态方法,所要求的定义格式:
A. 必须定义且只能定义一个参数,该参数的数据类型必须为属性读方法所处类本身;
B. 必须定义有返回值,该返回值的数据类型不能为数组,该数据类型即为本属性被读取时的数据类型.
如果属性读方法不为静态方法,所要求的定义格式:
A. 不能定义参数;
B. 必须定义有返回值,该返回值的数据类型不能为数组,该数据类型即为本属性被读取时的数据类型.
注意:
A. 在程序中,必须以与变量相同的引用方式来访问属性读方法. 如: "类对象1.属性1";
B. 如果存在同名属性写方法,则两者的数据类型必须一致;
C. 在全局类中不能定义属性读方法(普通用户无需掌握).
　
3. 属性写: 表明本方法为属性写入方法. 该属性除了可以在程序语句中被赋值,还可以在该类对象变量的扩展属性表的"属性"列中被赋予初始值.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 13/42

--- 第 14 页 ---
如果属性写方法为静态方法,所要求的定义格式:
A. 必须未定义返回值;
B. 必须定义且只能定义两个参数,第一个参数的数据类型必须为属性写方法所处类本身,第二个参数的数据类型不能为数组,该数据类型即为
本属性被写入时 所需要的数据类型.
如果属性写方法不为静态方法,所要求的定义格式:
A. 必须未定义返回值;
B. 必须定义且只能定义一个参数,该参数的数据类型不能为数组,该数据类型即为本属性被写入时所需要的数据类型.
注意:
A. 在程序中,必须以与变量相同的引用方式来访问属性写方法. 如: "类对象1.属性1 = 1";
B. 如果存在同名属性读方法,则两者的数据类型必须一致;
C. 在全局类中不能定义属性写方法(普通用户无需掌握).
　
4. 定义事件: 定义本类对象将会发送事件的名称及格式,此种方法必须满足以下格式要求:
A. 方法体必须为空;
B. 返回值数据类型必须为整数(安卓和服务器子平台无此限制);
C. 不能为静态方法.
　
5. 接收事件: 定义本类对象将会接收本类中成员变量对象所发送的事件,此种方法且必须满足以下要求:
A. 返回值数据类型必须为整数(安卓和服务器子平台无此限制);
B. 不能为静态方法;
C. 方法名称格式必须为: 事件对象类名 + "_" + 欲接收事件名;
D. 方法的第1个参数的数据类型必须为欲接收其事件的事件对象类名;
E. 方法的第2个参数的数据类型必须为整数,用作接收"挂接事件"关键字调用所提供的"标记值"参数值(非该方式挂接事件则此参数值固定为0);
F. 方法其余参数的数目及数据类型必须与欲接收事件的定义方法一致.
注: 开发环境中有对应的快捷功能自动生成指定事件的接收方法.
公开 指定本方法是否公开.公开方法可以在所处类外部被访问,而非公开方法只能在本类或者其继承类中访问.
参数表为方法定义一个参数表,用作指定调用此方法时所需要提供的参数:
需要注意的是:
1. 数据类型为类或文本型的参数始终以参考方式传递对象(这一点上视窗和安卓平台是一致的). 譬如上图的参数1和参数2,如果在外部调用"测试
方法 (测试类1对象, 文本变量1, 123)",那么"参数1"将是指向"测试类1对象"的参考,操作"参数1"等效于操作"测试类1对象",
"参数2"将是指向"文本变量1"的参考,操作"参数2"等效于操作"文本变量1";
2. 调用方法时,必须加上用小括号括住的参数表,即使该方法的参数表为空,也必须加上用小括号括住的空参数表. 如: 假设前面的"测试方法"没有定
义任何参数,调用它时也必须使用"测试方法()"格式.
　
7. 类成员属性
类成员属性用作表达或修改类的特征时使用,可以使用类方法或者类成员变量来定义.
根据其可访问方式分为3类: "可读成员属性" / "可写成员属性" / "可读写成员属性".
　
1. 定义"可读成员属性":
"可读成员属性"用作支持对属性值的读取.
插入一个方法,将其"类别"列设置为"属性读",然后保证其满足以下格式要求:
A. 访问权限必须为"公开";
B. 不能为静态方法(实际上静态方法也可以用作定义属性,不过这个不需要普通用户掌握);
C. 没有参数;
D. 必须定义有一个返回值,该返回值的数据类型即为该属性的数据类型.
譬如以下代码在"测试类"中定义了一个数据类型为"整数"的可读属性"我的属性":
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 14/42

--- 第 15 页 ---
注意: 虽然"我的属性"是以成员方法的形式定义的,但是在程序中访问时不能以方法的访问方式"对象.我的属性()"来访问,而应该以访问"成员变量"的方式来访问,即:"对象.属性
名".
如,访问上面可读属性的语句为:
其中黄色箭头指向处定义了"测试类"的一个对象实例,红色箭头处读取了其"我的属性"的属性值并将其赋值到"整数变量1".
实际上,读取"测试类对象.我的属性"时,等效于调用了"我的属性"属性读取方法.
　
2. 定义"可写成员属性":
顾名思义,"可写成员属性"就是用作支持对属性值的写入.它的定义方式与定义"可读成员属性"类似,只是所定义方法的格式要求不同.
插入一个方法,将其"类别"列设置为"属性写",然后保证其满足以下格式要求:
A. 访问权限必须为"公开";
B. 不能为静态方法(实际上静态方法也可以用作定义属性,不过这个不需要普通用户掌握);
C. 只有一个参数,该参数的数据类型即为该可写属性的数据类型;
D. 没有返回值.
譬如以下代码在"测试类"中定义了一个数据类型为"整数"的可写属性"我的属性":
同样,虽然此处"我的属性"是以成员方法的形式定义的,但是在程序中访问时不能以方法的访问方式"对象.我的属性(欲写入的属性值)"来访问,而应该以访问"成员变量"的方式来
访问,即:"对象.属性名 = 欲写入的属性值".
如,访问上面可写属性的语句为:
其中黄色箭头指向处定义了"测试类"的一个对象实例,红色箭头处将其"我的属性"的属性值赋值为123.
实际上,写入"测试类对象.我的属性"时,等效于调用了"我的属性"属性写入方法.
"可写成员属性"还有另外一种访问方式,就是直接在对象的属性表中设置,如:
等效于前面通过语句"测试类对象.我的属性 = 123"对该属性的写入.
操作小提示:要想知道当前对象有哪些"可写属性",在"属性名"列上按下空格即可:
　
3. 定义"可读写成员属性":
很容易理解,"可读写成员属性"就是既可以被读取又可以被写入的属性,定义它的方式也很简单,就是同时定义名称相同的属性读和属性写方法,如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 15/42

--- 第 16 页 ---
其中黄色箭头指向定义了"我的属性"的属性读方法,红色箭头指向定义了"我的属性"的属性写方法.
前面已经讲过,"可读属性"用作支持对类属性的读取操作,"可写属性"用作支持对类属性的写入操作,编译器会根据当前操作是读取还是写入自动调用对应的属性读/写方法.当以
以下方式对"我的属性"进行访问时:
黄色箭头指向处将调用"我的属性"的属性读方法,而红色箭头指向处将调用"我的属性"的属性写方法.
定义"可读写成员属性"时需要注意的是:
"属性读方法"和"属性写方法"的数据类型必须一致,也就是说: "属性读方法"的返回值与同名"属性写方法"第一个参数的数据类型必须一致:
如图中黄色和红色箭头所指向的数据类型必须一致.
　
4. 定义"可读写成员变量属性":
有时候我们想直接把一个"成员变量"同时定义为"成员属性",譬如前面的例子所定义的"我的属性"也可以这样定义:
具体方法就是为该成员变量设置属性值为真的"@属性变量"系统属性(系统属性是指以'@'字符开头的系统预定义属性)即可.
操作小提示:要想知道当前对象有哪些"系统属性",在"属性名"列上输入'@'字符,要想知道当前对象有哪些"用户程序属性",在"属性名"列上输入空格字符:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 16/42

--- 第 17 页 ---
注意:这些系统属性,除了在本文档中提到的,一般用户无需了解.
此处定义的"我的属性",与前面通过"属性读/写方法"定义的"我的属性"没有任何区别,同样可以在对象的属性表中使用:
那么问题来了,既然可以这么简单地定义成员属性,那么为什么还要那么麻烦去通过"属性读/写方法"来定义呢?
道理很简单:通过"属性读/写方法"来定义可以使用程序代码对属性的读/写操作进行具体控制,还可以进行一些额外的特定操作,而定义"成员变量属性"就没办法达到这个目的了,
本处两者效果一致只是一个特例.
　
5. 定义"只读成员属性"和"只写成员属性":
定义"只读成员属性"和"只写成员属性"很简单:
只提供了"属性读方法"的属性就是只读属性,只提供了"属性写方法"的属性就是只写属性.
如果想对"只读成员属性"进行写操作,或者想对"只写成员属性"进行读操作,编译器都会报错:
如上图,在"测试类"中定义了名为"我的只读属性"的只读属性(未提供该名称的属性写方法)和名为"我的只写属性"的只写属性(未提供该名称的属性读方法),那么在黄色和红色箭
头所指向处的代码在编译时都会报错.
可以通过此方式对属性的读写权限进行分别控制.
 
6. 填写成员属性表:
火山中所有定义型成员(包/类/方法/常量/变量/参数)都具有一个属性表(由紧挨着的"属性名"和"属性值"两列组成),用作指定该成员相关属性的值.
A. 以下属性可以在所有成员的属性表中被使用:
1. 火山系统定义的全局扩展属性或项目插件定义的项目扩展属性(属性名以'@'开头,普通用户无需掌握).
 
B. 以下属性可以在类的属性表中被使用,用作在类对象被创建时自动初始化相关属性值:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 17/42

--- 第 18 页 ---
1. 类自身或其基础类中定义的可读写成员变量属性;
2. 类自身或其基础类中定义的所有属性写方法;
3. 以上属性的子属性,如"可读属性1.可读属性2.可写属性3",前面的父属性必须均为可读取属性,最后一个属性必须为可写入属性.
 
C. 以下属性可以在类成员变量的属性表中被使用:
1. 类成员变量的数据类型类或其基础类中定义的可读写成员变量属性;
2. 类成员变量的数据类型类或其基础类中定义的所有属性写方法;
3. 以上属性的子属性,如"可读属性1.可读属性2.可写属性3",前面的父属性必须均为可读取属性,最后一个属性必须为可写入属性.
　
D. 属性值:
1. 属性值可以引用程序中定义的常量或者提供对应数据类型的立即数;
2. 如果属性指定只能从其提供的选择列表中选择属性值(使用"@列表选择项"系统全局属性指定,普通用户知道即可,无需掌握),则属性值只能从这些列表项中选择;
3. 如果属性数据类型为常量类:
A. 如果该常量类中定义有常量成员,则属性值只能从这些常量成员中选择;
B. 否则可以直接提供该常量类所对应数据类型的立即数. 譬如,假设属性A的数据类型为"可绘制资源"(安卓平台)或"位图资源"(视窗平台),那么属性值除了可以为其提供一
个同样数据类型的常量以外,还可以直接为其提供一个 对应图片文件名文本.
注意: 普通用户只需要知道当属性的数据类型为系统类库中所提供的常量类时,可以如此处理即可,其它方面(譬如如何建立常量类),无需掌握,可以将其当前普通的类同样看
待.
 
属性表填写实例如下图:
下图为所使用到的安卓平台系统类"文件打开方式"的定义,了解一下即可:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 18/42

--- 第 19 页 ---
 
8. 类成员事件
成员事件用来类对外发送通知时使用.
一个很简单的例子: 用作"按钮"的类必须在用户单击按钮时向外部发送"被单击"事件,用作"时钟"的类必须向外部定时发送"时钟周期"事件,等等.
类的其它三类"成员变量" / "成员属性" / "成员方法"都是被动接受来自外部的访问,而"成员事件"是主动向外部发送通知,这是两者之间的最主要不同.
　
A. 定义"成员事件":
插入一个方法,将其"类别"列设置为"定义事件",然后保证其满足以下格式要求:
1. 访问权限必须为"公开";
2. 不能为静态方法;
3. 返回值必须为整数;
4. 方法体必须为空.
事件定义方法对参数表没有要求,用户可以根据自己的需要随意定义.
譬如下图我们为"测试类1"定义了一个"我的事件1"事件:
　
B. 在类中发送事件:
在类中的代码内,当需要发送事件时,直接调用该事件的"事件定义方法"即可. 如上图.
当调用"事件定义方法"时,如果该事件定义方法上挂接了对应的"事件接收方法"(见下),会自动去调用该"事件接收方法"并返回其所返回的整数值,否则会直接返回整数值0.
　
C. 接收其它类所发送过来的事件:
要想接收其它类所发送的事件,必须首先定义相应的事件接收方法,譬如以下代码在"测试类2"中定义了一个前面的"测试类1"的对象变量:
想要接收其"我的事件1"事件,需要如下操作:
鼠标右键单击"成员变量1"的定义行:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 19/42

--- 第 20 页 ---
选择其中的"添加成员变量1的事件接收及虚拟方法方法"菜单项:
再选择其中的"测试类1_我的事件1",然后单击"添加"按钮,会自动在程序中插入对应的事件接收方法:
当然,你也可以自己手工创建并填写符合此格式的事件接收方法,效果是一样的.
查看上面所生成的事件接收方法,可以发现它的格式要求:
1. 方法名称必须为: "事件定义方法所处类名"+下划线+"事件定义方法名称";
2. 不能为静态方法;
3. 方法的第一个参数必须为固定的"来源对象"参数,其数据类型为发送事件的类,用作提供具体是哪个对象发送过来的事件;
4. 方法的第二个参数必须为固定的"标记值"参数,其数据类型为整数,用作动态挂接事件时使用(见后);
5. 方法的后续参数表必须与对应的"事件定义方法"一致,用作提供在事件定义方法所处类中发送事件(调用该事件定义方法)时所传递过来的具体参数值;
6. 方法的返回值必须为整数,此返回值将被传递回在事件定义方法所处类中调用该事件定义方法的调用方.
一旦为类成员变量对象的"事件定义方法"定义了对应的"事件接收方法",那么该事件就被自动挂接到了此接收方法上,在事件定义方法所处类中一旦调用该"事件定义方法",此"事
件接收方法"就会被自动调用.
注意,由于同一类的同一事件均被发送到同一个事件接收方法,因此必须充分使用"来源对象"和"标记值"两个参数进行区分.  如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 20/42

--- 第 21 页 ---
如上图,"成员变量1"和"成员变量2"由于其类型都为"测试类1",因此收到其"我的事件1"后,都会调用"测试类1_我的事件1"事件接收方法,在该方法中可以通过判断具体来源对象
来进行区分处理.
附: 这种特性是不是比其它编程语言更强大? 不再是只有在被设计窗体上的窗口组件才能发送事件了,也不再需要为了让其能发送事件去开发 专用的窗口哑组件了.在火山中,任
何代码位置处的对象均可以发送事件.
　
D. 动态挂接其它类所发送过来的事件:
如前所述,一旦为类成员变量对象的"事件定义方法"定义了对应的"事件接收方法",那么该事件就被自动挂接到了当前类中的对应"事件接收方法"上,但是其它代码位置处对象的
事件是不会自动挂接到当前类中的,譬如下面代码:
在"测试方法1"中定义了一个"测试类1"的局部变量对象,此时该对象上的"我的事件1"事件是不会自动挂接到当前类的"测试类1_我的事件1"事件接收方法上的.也就是说,当前类
此时将无法接收到来自此"测试类1"对象实例的"我的事件1"事件.
如果需要接收该局部变量对象的事件,必须调用"挂接事件"关键字明确挂接其事件到当前类:
"挂接事件(变量1)"语句被执行后,此"测试类1"对象的"我的事件1"事件就被挂接到了当前类的"测试类1_我的事件1"事件接收方法上,以后当前类就可以接收到来自该对象的"我
的事件1"事件了:
在调用"挂接事件"关键字时可以额外再提供一个标记值参数,如: "挂接事件 (变量1,123)",此时该"测试类1"对象一旦发送事件,事件接收方法的"标记值"参数将接收到此处所提
供的标记值"123",便于程序中对此事件进行特定处理.
 
9. 虚拟方法
虚拟方法为可以在继承类中将其覆盖的方法.
对于普通用户来说,不需要掌握如何定义虚拟方法,只需要了解如何覆盖系统类中定义好的虚拟方法即可.
虚拟方法相比普通方法的不同之处: 虚拟方法被调用时,所调用到的实际方法由调用对象的运行时真实数据类型而不是其声明时数据类型决定.
听起来挺拗口,而且不好理解,不要紧,下面我们来逐步讲解.
假设存在以下两个类: "测试类1"和"测试类2",其中"测试类1"是"测试类2"的基础类,同时这两个类中都定义了一个名叫"方法1"的方法:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 21/42

--- 第 22 页 ---
这两个方法的定义格式完全相同(具有相同的名称/返回值数据类型/参数表),而且均定义了"@虚拟方法"属性.这就是"虚拟方法"名词的来由,凡是定义了"@虚拟方法"属性的方法,均
称为虚拟方法.
使用下面这段代码对这两个方法进行调用:
在"测试方法2"中对"方法1"进行了调用,按照常理来说,由于"参数1"的数据类型为"测试类1",因此应该始终是调用"测试类1"中定义的"方法1"才对.如果"方法1"不是虚拟方法,这种
假设是对的,但是由于其是虚拟方法,所以此处所具体调用的是哪个类里面的"方法1"由"参数1"的当前运行时实际数据类型决定,即: "参数1"如果指向的是"测试类1"的对象,则调用
的就是"测试类1"的"方法1",如果指向的是"测试类2"的对象,则调用的就是"测试类2"的"方法1".
很明显,"测试方法2 (测试类1对象)"语句调用的是"测试类1"中的"方法1",而"测试方法2 (测试类2对象)"语句调用的是"测试类2"中的"方法1".
使用虚拟方法有什么好处? 最重要的好处就是可以在继承类中通过虚拟方法覆盖改写基础类中的同名方法,此特性可以用作以下几个方面:
1. 修改基础类中的原有功能
注意: 本条普通用户只需稍作了解即可.
考虑一下这个应用场景,在程序中一直使用来自第三方库的名为"测试类1"的类,我们发现其"方法1"不能满足需要而我们又无法去直接修改它,如果该方法为虚拟方法,则我们
可以建立一个"测试类1"的继承类"测试类2",并将其"方法1"覆盖,然后将所有创建"测试类1"对象的代码均改为创建"测试类2"的对象即可.
 
2. 建立多态类
注意: 本条普通用户只需稍作了解即可.
虚拟方法可以用作实现基于同一基础类的继承类表现出不同的行为.
假设有一个画板类,其中可以绘制各种图形(如三角形/圆/矩形等),按照面向对象的设计方法,我们可以定义一个名为"图形类"的基础类,该类定义了一个名为"绘制"的虚拟方法,
然后再定义"图形类"的各种继承类,如"三角形类","圆形类","矩形类"等等,在这些继承类中,将基础类中的"绘制"方法覆盖以实现其特定的绘制工作.在画板类中进行绘制时,接
收一个"图形类"的对象,调用其"绘制"方法即可绘制各种不同的图形,而不用管具体接收的是哪种图形类对象.
 
3. 在基础类中调用位于继承类中的方法
火山类库广泛使用本特性向用户继承类发送通知,因此本条普通用户必须了解.
由于火山安卓平台的类库中虚拟方法的应用场合较多,下面以该平台程序作为例子进行说明.
这是一个非常简单的安卓程序,用作在所处窗口被创建时显示一个提示框:
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 22/42

--- 第 23 页 ---
"启动类"为系统类"窗口"的继承类,其中覆盖了该类中定义的虚拟方法"通知_被创建":
当安卓程序启动后,将自动创建用户的"启动类"窗口实例对象,当该窗口被创建时,系统类中将自动调用其"通知_被创建"方法,由于窗口实例对象的真实数据类型为"启动类",因
此此时所实际调用的是用户"启动类"中的"通知_被创建"方法,从而达到了在窗口被创建时通知用户程序的目的.
在火山开发环境中,可以执行以下菜单功能来自动创建用作基础类中的虚拟覆盖方法,在继承类中的任意位置点击右键,选择"添加xxx的 事件接收及虚拟方法"菜单项:
选中所需要创建的虚拟覆盖方法,然后点击"添加"按钮:
即可将对应的虚拟覆盖方法加入到当前类中,下图为添加后的结果:
最后在所添加的方法体中加入自己的处理代码即可.
注意,在继承类的虚拟方法中,有时候想调用基础类中被覆盖的虚拟方法,可以采用类似以下语句调用:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 23/42

--- 第 24 页 ---
 
10. 方法语句
程序语句在方法中使用,用作提供具体的方法实现代码.
下面为程序语句的简单概念,稍作了解即可:
程序语句可以使用表达式进行描述,表达式由使用操作符组合在一起的语句单元组成,分为以下几类:
1. 一元表达式,如: -变量1,  (长整数)1
2. 二元或多元表达式,如: 变量1 + 变量2, 变量1 * 123 * 变量2
3. 命令或方法调用表达式,如: 方法1 (123), 如果 (变量1)
4. 表达式可以嵌套,如: -(变量1 + 变量2), 如果 (变量1 == 真)
表达式中的语句单元可以是: 数据类型/变量/常量/参数/方法/名称类关键字/立即数 等.
A. 语法格式描述文本的规则:
语法格式描述文本为由以下运算符组合的一个或多个语法项构成,这些运算符的优先级按顺序从小到大递增:
| : 备选项(在多个项目中选择其中任意一个).
() : 分组项(提供一组备选项).
[] : 可选存在项(可以存在也可以不存在).
{} : 重复存在项(可以重复存在0到n次).
语法项分为字面文本项(用双引号括住)和语法替换项两种.
B. 语句行的语法格式描述文本:
语句: 赋值表达式 | 调用表达式
表达式: 一元表达式 | 表达式 二元操作符 表达式
一元表达式: 基本表达式 | 一元操作符 一元表达式
基本表达式: 操作数 | 类型强转表达式 | 对象成员访问表达式 | 数组成员访问表达式 | 调用表达式
操作数: 立即数 | 名称 | "(" 表达式 ")"
赋值表达式: (局部变量名称 | 所处方法参数名称 | 对象成员访问表达式 | 数组成员访问表达式) "=" 表达式
类型强转表达式: "(" 类型名称 ")" 一元表达式
对象成员访问表达式: 类成员名称 | 类访问名称 "." 类成员名称 | 基本表达式 "." 类成员名称 | "父对象" "." 父类成员名称 | 本对象
数组成员访问表达式: 基本表达式 "[" 表达式 "]" { "[" 表达式 "]" }
调用表达式: 对象成员访问表达式 调用参数表 | 命令关键字名称 调用参数表
一元操作符: "-"
二元操作符: "&&" | "||" | "==" | "!=" | "<" | "<=" | ">" | ">=" | "属于" | "*" | "/" | "%" | "+" | "-"
调用参数表: "(" [ 表达式 { "," 表达式 } ] ")"
类型名称: 基本类型名称 | 类访问名称
基本类型名称: 字节 | 短整数 | 字符 | 整数 | 变整数 | 长整数 | 单精度小数 | 小数 | 逻辑型 | 文本型
类访问名称: 类的定义名称 | 类所处包名 "." 类的定义名称
注意: 在火山程序中,没有流程线,只有子语句体. 即:
1. 任何程序语句都可以拥有一条或多条下属语句,这些下属语句称为该语句的子语句体,该语句称为这些下属语句的父语句;
2. 子语句体可以嵌套. 也就是说,子语句可以继续拥有子语句体.
如图:
其中,所有子语句体与其所处的父语句之间均使用虚线括住标注出来了. 即:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 24/42

--- 第 25 页 ---
语句行12-16是语句行11的子语句体;
语句行15-16是语句行14的子语句体;
语句行19-26是语句行18的子语句体;
语句行22-23是语句行21的子语句体;
语句行25-26是语句行24的子语句体.
在使用虚线标注子语句体的时候,系统对"如果"和"否则"语句进行了特殊处理,将两者的子语句体线连接起来了,这样看起来 结构更清晰一些.
　
三. 火山平台关键字:
1. 基本数据类型关键字:
名称 输入字1 解释
字节 sbyte字节(有符号)基本数据类型,有效值范围从-128到127,占用1个字节空间.
特例: 在服务器子平台中,本数据类型无符号,即有效值范围从0到255.
短整数 short短整数基本数据类型,有效值范围从-32768到32767,占用2个字节空间.
字符 wchar宽字符基本数据类型,有效值范围从0到65535,占用2个字节空间.
特例: 在服务器子平台中,本数据类型等同于32位整数,占用4个字节空间,有效值范围从-2147483648到2147483647.
整数 int 整数基本数据类型,有效值范围从-2147483648到2147483647,占用4个字节空间.
特例: 在编译64位服务器子平台程序时,有效值范围等同于长整数,占用8个字节空间. 在服务器子平台中如欲限定使用32位整数请使用"字符"数据类型
等同替代.
变整数 vint 变整数基本数据类型,在编译64位视窗子平台程序时等同于长整数类型,编译32位视窗子平台程序时等同于整数类型,在其它情况下均等同于整数类型.
长整数 long 长整数基本数据类型,有效值范围从-9223372036854775808到9223372036854775807,占用8个字节空间.
单精度小数 float单精度小数基本数据类型,有效值范围从-3.40E+38到3.40E+38,占用4个字节空间.
小数 double双精度小数基本数据类型,有效值范围从-1.7E+308到1.7E+308,占用8个字节空间.
逻辑型 bool逻辑型基本数据类型,有效值为真/假.
文本型 string文本型基本数据类型,用作记录一段字符串文本.
模板类型1 -> 模板
类型8　 注意: 本关键字普通用户只需要了解一下即可.
模板数据类型,只能在模板基础类中使用.
模板数据类型本身并不是真实存在的数据类型,所对应的真实数据类型需要由模板实现类来提供.
我们举个例子,假设我们需要开发一个数组操作类,用作支持对各种数组类型进行操作,如果不使用模板类型,那么我们需要写很多类似的类:
整数数组操作类, 小数数组操作类, 文本数组操作类 ......
而这些类的处理代码是完全一样的,唯一不同之处就是其所操作的数据类型不同,使用模板类型,我们可以把所有代码都放到模板基础类里面,然后定义
对应的模板实现类即可. 如:
这样能大大减少工作量,也能让程序具有更好的可维护性(只需维护一处即可).
注释:
1. "输入字"的意思是在程序中还可以通过输入此文本来输入该关键字.
 
使用图例:
下图为一个定义了各种基本数据类型变量的程序:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 25/42

--- 第 26 页 ---
说明:
A. "字节/短整数/字符/整数/长整数/小数"这几种数据类型被统称为数值数据类型,它们按照所能容纳数值范围的大小(也称为容量)从小到大顺序排列为:
字节 < 短整数 < 字符 < 整数 < 长整数 < 小数
 
B. 如何确定数值计算表达式的结果数据类型:
数值计算表达式的结果数据类型确定方法为:
为数值计算表达式中具有最大容量的数值数据类型
假设有一个数值计算表达式: "变量1 + 变量2", 其中"变量1"的数据类型为整数,"变量2"的数据类型为小数,那么这个表达式计算后结果的数据类型就是其中最大容量的数据类
型: 小数.
 
C. 如何在帮助中查看模板类型的真实数据类型:
假设有下面这段代码:
当你右键单击末语句行上的"置入"方法,然后选择查看其帮助菜单项后,看到帮助页面中参数部分为以下内容:
你一定会感到困惑,"模板类型1"和"模板类型2"所对应的真实数据类型到底是什么呢?
很简单,请继续单击该"模板类型1"/"模板类型2"链接,譬如点击前者将看到如下页面:
根据"对象变量1"的当前数据类型"整数到对象哈希表类",就可以得知,"模板类型1"当前所对应的真实数据类型为"整数类",这就是"整数到对象哈希表类"为其模板基础类中的"置
入"方法第一个参数 提供的真实数据类型.
 
2. 名称关键字:
名称 输入字1 解释
对象名称关键字:
本对象 this 用作在程序语句中代表所处类的对象本身.
注意: 如果语句所处方法为静态方法,由于此时根本不存在当前类的实例对象,所以不能使用本关键字.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 26/42

--- 第 27 页 ---
父对象 super 用作在类成员方法中代表所处类的父类对象.
注意: 如果语句所处方法为静态方法,由于此时根本不存在当前类的实例对象,所以不能使用本关键字.
立即数名称关键字:
真 true 用作代表逻辑值立即数真
假 false 用作代表逻辑值立即数假
空对象 null 用作代表空对象,可以匹配所有非常量类的类数据类型以及文本型.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 27/42

--- 第 28 页 ---
 
3. 操作符关键字:
名称 特性 优先
级输入字1首/左侧参数右侧参数 解释
. [可扩展]1 　 欲访问类/类
对象名称欲访问类成
员名称句点分隔操作符,用作分隔类/类对象与其成员名称,或者用作建立包/类的全名称.
[] [只能为参
数]
[可扩展]1 　 欲访问数组
数据[整数] 欲访
问数组成员
索引值数组成员访问操作符,用作访问所指定索引位置处的数组成员. 也可以在定义数组数据类型时使用.
数组成员访问索引值从0开始,有效范围为从0到数组成员数-1,分别对应数组的第一个和最后一个成员.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 28/42

--- 第 29 页 ---
- [只能为参
数]
[右结合]2 　 [数值] 欲取
反的数值　 算术取反操作符,用作返回将指定数值进行符号翻转后的结果值
强制类型转
换[只能为参
数]
[右结合]2 　 欲转换到数
据类型名称欲转换数据
类型的数据类型强转操作符,用作将数据强行转换到所指定的数据类型.
调用格式为: (欲强行转换到的数据类型)欲转换类型的数据
允许以下数据类型之间进行强制转换:
1. "空对象"可以强制转换到任何非常量类的类数据类型或文本型:
2. 数值数据类型之间可以强行转换.
注意: 当从容量大的数值数据类型强制转换到容量小的数值数据类型时,其中数值精度将会存在被丢失的风
险.
譬如,将小数数值强行转换到整数数值将丢失所有小数点后面的数值部分.
3. 常量类可以强制转换到其所对应的基本数据类型,非立即数基本数据类型数据可以强制转换到对应的常量类;
4. 类数据类型只能强制转换到其直接/间接基础类或继承类.
注意: 用户必须确保对象实例的运行时数据类型匹配该被强行转换到的数据类型,否则将导致程序运行时出
错.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 29/42

--- 第 30 页 ---
* [只能为参
数]
[可扩展]3 　 [数值] 被乘
数[数值] 乘数算术相乘操作符,用作计算两个数值的相乘结果.
例如: 数值变量1 * 123
/ [只能为参
数]
[可扩展]3 　
[数值] 被除
数[数值] 除数算术相除操作符,用作计算两个数值的相除结果.
例如: 数值变量1 / 123
% [只能为参
数]3 　 算术模除操作符,用作计算两个整数的相除后的余数.
例如: 5 % 4 等于 1
+ [只能为参
数]
[可扩展]4 　 [数值/文本]
被加数[数值/文
本] 加数算术相加操作符,用作计算两个数值/文本的相加结果.
例如:
数值相加: 数值变量1 + 123
文本相加: "abc" + 到文本 (1)
- [只能为参
数]
[可扩展]4 　 [数值] 被减
数[数值] 减数算术相减操作符,用作计算两个数值的相减结果.
例如: 数值变量1 - 123
<= [只能为参
数]5 　
[数值] 被比
较数值[数值] 比较
数值小于等于逻辑比较操作符,当左侧参数小于等于右侧参数时返回真.
例如: 如果 (数值变量1 <= 123)
>= [只能为参
数]5 　 大于等于逻辑比较操作符,当左侧参数大于等于右侧参数时返回真.
例如: 如果 (数值变量1 >= 123)
< [只能为参
数]5 　 小于逻辑比较操作符,当左侧参数小于右侧参数时返回真.
例如: 如果 (数值变量1 < 123)
> [只能为参
数]5 　 大于逻辑比较操作符,当左侧参数大于等于右侧参数时返回真.
例如: 如果 (数值变量1 > 123)
属于 [只能为参
数]5 instanceof[对象] 被检
查对象用作检查的
类名返回左侧对象是否为右侧类或者其直接/间接继承类的实例对象,即左侧对象能否被安全转换到右侧类数据类型.
注意: 左侧对象的数据类型必须为类,而且必须与右侧类之间存在继承/被继承关系或者等于右侧类本身.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 30/42

--- 第 31 页 ---
== [只能为参
数]6 　
[数值/逻辑
型/文本/数
组/对象] 被
比较值[数值/逻辑
型/文本/数
组/对象] 
比较值等于/不等于逻辑比较操作符,当左侧参数等于/不等于右侧参数时返回真.
注意:
1. 对于数组对象,唯一能够与其进行比较的是"空对象";
2. 对于文本数据,将比较两者实际文本内容是否相同(区分字母大小写),也可以将文本数据与"空对象"进行比较;
3. 类对象比较仅比较两者是否指向同一个对象实例,而不会去对比两者所指向对象实例中存放的数据内容是否
相同(火山安卓平台比较两个对象是否参考到同一对象实例,火山视窗平台比较两个对象的所处地址是否相同).
注意,在火山视窗平台中:
A. 如欲比较两个对象的数据内容是否相同,可以使用系统类库中所提供的"对象内容是否相同"全局方法;
B. "字节集类"是一个特例,该类的对象之间进行比较将比较两者的实际数据内容是否相同.
例图:
!= [只能为参
数]6 　
&& [只能为参
数]
[可扩展]7 且
[逻辑型] 逻
辑值一[逻辑型] 逻
辑值二并且逻辑操作符,当左侧参数和右侧参数均为逻辑值真时返回真.
例如:
如果 (数值变量1 >= 100 && 数值变量1 <= 200)
仅当"数值变量1"大于等于100且小于等于200时判断表达式才为真
|| [只能为参
数]8 或 或者逻辑操作符,当左侧参数和右侧参数其中任意一个为逻辑值真时返回真.
例如:
如果 (数值变量1 >= 100 || 数值变量2 <= 200)
仅当"数值变量1"大于等于100或者"数值变量2"小于等于200时判断表达式才为真
= [右结合]9 　 赋值到的变
量/可写属性用作提供赋
值用数据赋值操作符,将右侧参数的值赋予给左侧参数所指定的变量/可写属性.
例如:
变量1 = 1
对象变量1.属性1 = 变量2
注释:
1. 表格中的优先级值越小表明该操作符优先级越高. 以下为操作符优先级在表达式中的处理算法:
在表达式中,优先级高的操作符将优先组合其两侧运算元. 如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 31/42

--- 第 32 页 ---
1 + 3 * 2
在以上表达式中,算术相乘操作符的优先级为3,而算术相加操作符的优先级为4,因此相乘操作符的优先级要比相加操作符的高,所以编译器将先运算"3 * 2",然后再运算"1 + 6",
从而得到最终结果7.
如果两个操作符的优先级一致,如:
1 + 3 - 2
则将按照操作符的排列顺序进行依次处理,因此编译器将先运算"1 + 3",然后运算"4 - 2",从而得到最终结果2.
如果欲强制调节操作符的处理顺序,可以使用小括号. 如:
(1 + 3) * 2
此时相加操作符将优先于相乘操作符处理,从而得到最终结果8.
 
2. "特性"列中的"[只能为参数]"表示该操作符只能位于语句参数中; "[右结合]"表示操作符 将优先结合其右侧的操作元,"[可扩展]"表明右侧参数可以被扩展多个.
 
4. 命令关键字:
名称特性输入字1参数
类型参数
名称参数解释 返回
值解释
循环类关键字:
判断
循环[需求
语句
体]while 逻辑
型判断
值当此参数值
为真时进入
循环体,为假
时将跳过循
环体.　 本命令根据提供的逻辑参数的值,来决定是否进入循环体(本语句的子语句体).如果提供的逻辑参数值为真,程序顺序执行下一
条语句进入循环体,否则跳转到本命令循环体的下一条语句处.
循环[需求
语句
体]
[隐藏
空参
数表]for 整数[可省
略] 变
量起
始值定义循环变
量的起始数
值.
如果被省略,
默认值为0.　 本命令将利用变量对循环体(本语句的子语句体)内的命令进行循环执行.第一次执行此命令时将使用"变量起始值"参数初始
化"循环变量"参数所指定的变量.每次(包括第一次)执行到此命令处都将判断循环变量内的值是否已经到达"变量目标值"参
数所指定的值,如已等于或超过,则跳转到循环体的下一条语句处,否则进入循环体.
例图,正向遍历处理所指定的数组:
正向循环3次:
逆向遍历处理所指定的数组:
逆向循环3次:
整数[可省
略] 变
量目
标值定义循环变
量的目标数
值,在循环首
部如果发现
循环变量值
已到达此目
标值时(递增
值小于0时小
于等于目标
值,递增值大
于0时大于等
于目标值)将
跳出循环 而
不再进入循
环体.
如果被省略,
默认值为1.
整数[可省
略][需
求可
写变
量] 循
环变
量本整数型变
量将用作控
制循环执行
次数,在循环
尾部将自动
递增或递减
该变量内的
数值(由变量
递增值参数
决定).循环体
中的用户程
序可以直接
取用此变量
中的值.
如果被省略,
将自动使用
内部临时变
量.
整数[可省
略][需
求立
即数]
变量
递增
值每次执行到
循环尾部时
都将把此值
加入到循环
变量中去,此
值可为正数
或负数,如为
正数则递增,
为负数则递
减.
注意: 必须为
本参数提供
非0整数立即
值,以便编译
器建立循环
结束条件.2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 32/42

--- 第 33 页 ---
如果被省略,
则默认值为1.
流程控制类关键字:
如果[需求
语句
体]if 逻辑
型判断
条件本条件值的
结果决定下
一步程序执
行位置　 本命令根据所提供逻辑参数的值,来决定是否改变程序的执行位置.如果提供的逻辑参数值为真,程序继续顺序向下执行进入
本命令的子语句体,然后跳过本命令后续所有的"否则"命令,为假则将跳过本命令的子语句体.
例如: 如果 (整数变量 == 1)
否则[需求
语句
体]
[隐藏
空参
数表]elseif 逻辑
型判断
条件本条件值的
结果决定下
一步程序执
行位置. 注意:
本参数可忽
略以不提供,
但是此时不
能再后续跟
随其它的"否
则"语句.　 本命令只能放在"如果"或其它"否则"命令的后面,根据所提供逻辑参数的值,来决定是否改变程序的执行位置.如果提供的逻辑
参数值为真,程序继续顺序向下执行进入本命令的子语句体,然后跳过本命令后续所有的"否则"命令,为假则将跳过本命令的
子语句体.
例图:
 
到循
环尾[隐藏
空参
数表]continue　 　 　 　 本命令转移当前程序执行位置到当前所处循环体的尾部
注意: 由于火山的所有循环类别关键字均没有循环尾语句,所以此关键字也可以看作为"到循环首".
例图:
跳出
循环[隐藏
空参
数表]break 　 　 　 　 本命令转移当前程序执行位置到当前所处循环体尾部的下一条语句处.
例图:
结合前面的"循环"语句,可以达到类似basic语言的goto语句的效果:
返回[隐藏
空参
数表]return　 [可省
略] 返
回值当所处方法
定义有非空
返回值数据
类型时,必须
提供返回到
调用方的具
体值,否则必
须省略掉本
参数,即两者
必须对应.　 本命令转移当前程序执行位置到调用本语句所处方法的下一条语句处,并可根据需要返回一个值到调用语句处.
例图:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 33/42

--- 第 34 页 ---
运算类关键字:
取反　 　 逻辑
型待取
反逻
辑值提供将其反
转的逻辑值逻辑
型将所指定逻辑值进行反转(假反转为真,真反转为假),返回反转后的结果.
例如: "取反 (真)" 将返回结果值"假".
位取
反　 　 所有
整数
型待取
反整
数值提供将其所
有位反转的
整数值对应
整数
型将所指定整数值的每一个位值进行反转(位值1将被反转为位值0,位值0将被反转为位值1),返回反转后的结果.
例如: "位取反 (0xFFFFFFF0)" 将返回结果值"0x0F".
位与　 　 所有
整数
型整数
参数
一提供用作位
操作的整数
参数值一对应
整数
型将参数1的每一个位值和参数2的对应位置处位值进行与操作(仅当两个位值均为1时才置为1,否则置为0),返回运算后的结果.
例如: "位与 (0xFFFF1234, 0x0000FFFF)" 将返回结果值"0x00001234".
所有
整数
型整数
参数
二提供用作位
操作的整数
参数值二
位或　 　
同"位与"将参数1的每一个位值和参数2的对应位置处位值进行或操作(当两个位值中任意一个为1时即置为1,否则置为0),返回运算后
的结果.
例如: "位或 (0x80000000, 1)" 将返回结果值"0x80000001".
位异
或　 　 将参数1的每一个位值和参数2的对应位置处位值进行异或操作(当两个位值不相等时置为1,否则置为0),返回运算后的结果.
例如: "位异或 (0x80000000, 0x80000001)" 将返回结果值"1".
位左
移　 　 所有
整数
型待位
移整
数值提供被位移
的整数值对应
整数
型　将参数1的每一位值向左移动(不考虑符号位)参数2所指定的数目,移动所留下的右侧空位值使用0补齐,返回运算后的结果.
例如: "位左移 (1, 2)"将返回结果值"4".
所有
整数
型位移
数目提供进行位
移的位数
位右
移　 　 同"位左移" 将参数1的每一位向右移动(不考虑符号位)参数2所指定的数目,移动所留下的左侧空位值使用0补齐,返回运算后的结果.
例如: "位右移 (0x80000000, 2)"将返回结果值"0x20000000".
编译时处理关键字:
编译
出错　 cerror　 　 　 　 仅在编译程序时起作用,编译器一旦编译到具有本关键字的语句,就会报告发现了编译错误并停止编译.
本关键字普通用户无需了解.
调试类关键字:
调试
检查　 assert逻辑
型检查
值在调试版中,
当此参数值
为假时,程序
将中断执行
并报错.　 本命令的调用语句仅在程序所编译的调试版本中存在,在程序所编译的发布版中将被忽略不编译.
所谓"调试版",即当调试运行当前项目时所编译的程序可执行版本.
在调试版中,当所提供的参数值为假时,程序将在此处中断执行并报错.
本关键字在增强程序可靠性方面非常有用,可以在程序中大量使用本关键字语句检查相关处理数据的合法性,又不用担心编译
程序的发布版本时这些检查语句降低了程序执行效率. 如:
文本
型[可省
略] 检
查失
败信
息指定当检查
失败时(检查
值参数为假)
所输出的信
息.如果被省
略,则默认为
空文本.
为调
试版　 　 　 　 　 逻辑
型返回当前所编译程序是否为调试版本.
所谓"调试版",即当调试运行当前项目时所编译的程序可执行版本.
使用本关键字可以加入一些仅在编译调试版时才会编译进去的语句,如:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 34/42

--- 第 35 页 ---
其它:
挂接
事件　 　 对象欲挂
接其
事件
的对
象提供欲将其
所定义事件
挂接到当前
类对应事件
接收方法的
对象　 将指定对象所支持的事件挂接到当前类对象中的对应事件接收方法上. 本命令仅用作动态挂接对象事件,类中定义的成员对
象变量除非明确指定不自动挂接(普通用户无需了解),均会自动挂接事件.
具体请参见前面的"动态挂接其它类所发送过来的事件"章节.
整数标记
值用作提供欲
挂接其事件
的对象所对
应的标记值,
由用户自行
定义.该值将
被原值发送
给事件接收
方法,用作区
分具体的事
件来源.如果
被省略,则默
认为0.
取消
事件
挂接　 　 对象欲取
消其
事件
挂接
的对
象提供欲取消
将其所定义
事件挂接到
当前类对应
事件接收方
法的对象　 不再将指定对象所支持的事件挂接到当前类对象中的对应事件接收方法上.
无论是自动挂接事件的类成员对象变量,还是手动调用挂接事件关键字挂接的对象,均可以调用本关键字取消其事件挂接. 事
件挂接一旦取消,该对象的事件将不会再被接收到.
注释:
1. "特性"列中的"[需求语句体]"表示该命令需要携带一个子语句体,"[隐藏空参数表]"表示当该命令的参数表为空时将被省略掉不显示;
2. "参数表"列中的"[可省略]"表示该参数可以被省略不提供;"[需求可写变量]"表示必须为该参数提供一个可写入变量或参数;"[需求立即数]"表示必须为该参数提供一个立即数.
 
四. 其它:
1. 按需编译
火山编译器实行的是按需编译模式,也就是说,凡是不可能被执行到的代码,一概不进行编译. 具体为:
从程序的启动位置开始,所有未在程序执行流程中的代码都将不会被编译.
以火山安卓开发平台举例,譬如下图:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 35/42

--- 第 36 页 ---
 
2. 扩展流程控制
除了命令关键字外,火山平台的核心类库中封装了一些自定义流程控制全局方法.
火山视窗平台的例程解决方案("samples\vprj_win\samples.vsln")中提供了一个名为"自定义流程控制"的样例项目用作列举它们的使用方法,可以打开查看.相关图示如下:
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 36/42

--- 第 37 页 ---
 
3. 部件程序
在某些情况下,可能希望程序的功能实现源代码不公开但是又不影响最终编译,此时可以使用部件程序.
部件程序与普通程序的区别在于,部件程序可以将普通程序分为两个部分,一个是其公开接口部分(如被公开的类/方法等),另一个是其功能实现部分,公开接口部分在系统程序
编辑器中可以被阅读(不能修改),仅在编辑项目时使用,功能实现部分则在编辑器中被隐藏不可见,仅在编译项目时使用,两者互不影响.
当根据普通程序生成其部件程序时,其中如存在名为"启动类"的类,将被自动忽略跳过.
除了以上区别之外,部件程序与普通程序没有任何差异,所有可以使用普通程序的场合均可使用部件程序.
 
4. 部件DLL程序
部件DLL程序仅在火山视窗软件开发平台中有效,在视窗项目属性中将"编译结果类型"属性设置为"部件DLL动态链接库"即可.
"部件DLL动态链接库"和普通的"DLL动态链接库"没有本质的区别,都是动态链接库,只是前者的功能可以被输出到项目外部使用,并且由于相关实现代码位于编译后的DLL中,
因此安全性是绝对有保证的,可广泛应用于多人协作或闭源项目中.
系统在编译部件DLL程序时,会自动生成其接口程序,使用方将生成的所有接口程序加入到其项目中即可使用部件DLL中的功能.
亦可指定系统在编译部件DLL程序时自动打包生成对应的火山模块,使用方将该模块安装到其火山系统中即可使用其中的功能.
部件DLL中的以下内容会被自动输出到所生成的接口程序中:
1. 所有公开类及其中的公开成员常量和公开成员方法(不会包含具体功能实现代码).
以下类不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 系统类(其所处源文件位于当前所运行火山系统安装目录下的);
2. 模板基础类,其所有模板实现类将被自动展开后输出;
4. 启动类;
5. 窗口组件类;
6. 所有设置了值为假的"@输出到部件"属性的类(初级用户无需了解).
以下方法不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 嵌入式方法;
2. 虚拟方法;
3. 类的初始化和清理方法;
4. 事件接收方法;
5. 所有设置了值为假的"@输出到部件"属性的方法(初级用户无需了解).
以下常量不会被输出到所生成的接口程序中(即使满足前面的条件):
1. 所有设置了值为假的"@输出到部件"属性的常量(初级用户无需了解).
系统在编译部件DLL程序时会自动处理该DLL程序中指定的所有附属文件(通过"视窗.附属文件"属性),并会将其复制到所生成的接口数据目录中及在所生成的接口程序中设置
相关属性.
 
5. 异常管理
同样,异常管理火山平台也没有提供对应的关键字,而改用系统类封装解决,以下为火山视窗类库中的相关封装类:
 
5. 常用开发环境操作方法
1. 编辑新建方法子语句体:
按照下图中的说明即可进入编辑所指定新建方法的子语句体:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 37/42

--- 第 38 页 ---
2. 使用 "Ctrl+[" 和 "Ctrl+]" 组合快捷键可以将当前光标所处语句或者所选中语句块左移或右移,以改变其当前缩进层次,从而改变其所处语句块:
如图,假设不小心将局部变量设置在了方法的外面,可以使用 "Ctrl+]" 组合快捷键将其调整进去:
选中所欲调整层次的语句行,再按下 "Ctrl+]" 组合快捷键将其调整进去:
同样,类似以下的程序,我想把被选中的部分移动到外层语句块中:
选中所欲调整层次的语句行,再按下 "Ctrl+[" 组合快捷键将其调整过去:
3. 另外几个使用得比较多的快捷键为"Insert"和"Shift+Insert",用作向前/向后插入行.其中,在方法的参数/常量/变量定义表格上按下"Shift+Insert"快捷键,将固定在其下
方插入一条空白语句行,如图:
2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 38/42

--- 第 39 页 ---
在"局部变量1"的定义行上按下"Shift+Insert"快捷键后的结果:
4. 开发过程中充分利用"即时帮助(F1)和"程序结构查看器(Shift+F1)"可以获得所有系统类和用户程序类的详细使用帮助信息:
5. 在开发环境左侧的"类库"夹中展开当前项目类型,可以获得该类型项目当前可用的所有系统类库模块信息:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 39/42

--- 第 40 页 ---
注意对应模块如果欲使用,需要首先在程序中将其配置进去:
然后选中对应的模块确认即可:2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 40/42

--- 第 41 页 ---
6. 查找某名称所处的模块
用户如果在编译项目时遇到"名称未找到"错误，有可能是因为其所处模块没有被加入到项目中，可以通过如下操作来查找(以火山视窗平台举例)：
A. 在编辑器内该名称文本上单击右键，选择"在类库中查找"菜单项：
B. 找到后在其帮助页顶部操作栏上点击"添加模块到项目"链接 即可将该名称所处模块添加到当前项目：
7. 在帮助页面中点击“例程”链接（如上图黄色箭头）可以搜寻并打开包括所指定名称的例程，这对于了解该名称的使用方法很有好处：2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 41/42

--- 第 42 页 ---
 
--- 完 ---2025/9/16 20:31 ⽕⼭平台语法学习⼿册 _ ⽕⼭软件开发平台
https://doc.voldp.com 42/42


================================================================================
文件: voldev_first零基础火山软件开发.pdf
================================================================================

--- 第 1 页 ---
关 于 本 教 程
作者：创世魂
概述：本篇教程主要以火山视窗为视角、少量安卓视角，
来介绍火山软件开发平台基本语法和基本操作，从而能够
快速的掌握火山软件开发。
点击开始阅读
 
 

--- 第 2 页 ---
关 于 火 山 软 件 开 发 平 台
 
火山软件开发平台是一种 目的硬件设备无关 、 目的软件环
境无关 、 易学易用实用 、 完全本地化 的软件快速开发平
台。
火山平台采用独创的 “ 语言之上的语言 ” （LOL ）技术，成
功屏蔽了火山程序对特定目标环境的依赖。用户只需要学
习掌握火山程序语言，就可以针对各种目的环境进行软件
开发。同时由于火山程序编译器所编译出来的是目标语言
的源代码，因此能够最大限度地提升火山程序员与第三方
的合作和资源共享效率，  以及所开发火山程序被社会的
认可程度。
以下为火山软件开发平台的架构图：
火山平台用户源程序
支持对应目标环境的火山类库
支持对应目标环境的火山编译器
Assembly
/ C / C++ /
C# ……JavaObjective
C / SwiftHTML5 +
JavaScript
+ CSSPHP其
它
…..
本地语言
编译器本地
语言
编译
器本地语言
编译器本地语言
解释器本地
语言
解释
器
Windows
桌面、
Linux/Unix
服务器
端、嵌入
式设备、
单片机
……安卓
移动
端、
安卓
嵌入
式设
备、
服务ios 应用 网站前端
展示、
HTML5 跨
平台应
用。WEB
服务
器端

--- 第 3 页 ---
器
……
 
 

--- 第 4 页 ---
一、火山平台概述
1. 火山平台介绍
2. 火山平台特点
3. 火山平台差异
二、火山编译环境配置
1. 安卓平台
2. 视窗平台
三、火山工作界面介绍
1. 主窗口
2. 系统设置
3. 视窗设计器
4. 安卓设计器
四、解决方案及项目介绍
1. 解决方案
1.1 概述
1.2 创建项目
1.3 解决方案目录结构概述
2. 项目管理
2.1 多文件管理
2.2 多项目管理
3. 项目模块
3.1 模块配置
3.2 模块安装
3.3 模块卸载
五、火山基本编辑环境
1. 代码输入方式
2. 代码语句体操作

--- 第 5 页 ---
3. 按需编译
六、火山程序帮助系统
1. 帮助页
1.1 概述
1.2 类库帮助页
1.3 项目帮助页
2. 悬浮提示
3. 书签
4. 例程库

--- 第 6 页 ---
 
   [ 下一章 ]

--- 第 7 页 ---
一 、 火 山 软 件 开 发 平 台 概 述
 
 
1 、 火 山 开 发 平 台 介 绍
火山软件开发平台是完全拥有自主知识产权、一种目的 硬件设备无
关、目的软件环境无关、易学易用实用、完全本地化 的中文软件快速开
发平台。
火山平台采用独创的 “ 语言之上的语言 ” （LOL ）技术，成功屏蔽了
火山程序对特定目标环境的依赖。用户只需要学习掌握火山程序语言，
就可以针对各种目的环境进行软件开发。同时由于火山程序编译器所编
译出来的是目标语言的源代码，因此能够最大限度地提升火山程序员与
第三方的合作和资源共享效率，  以及所开发火山程序被社会的认可程
度。
本地化编程语言具有极其重要的价值及社会意义 。
以下为火山软件开发平台的架构图：
火山平台用户源程序
支持对应目标环境的火山类库
支持对应目标环境的火山编译器
Assembly
/ C / C++ /
C# ……JavaObjective
C / SwiftHTML5 +
JavaScript
+ CSSPHP
其它
…..本地语言
编译器本地语
言编译
器本地语言
编译器本地语言
解释器本地语
言解释
器
Windows
桌面、
Linux/Unix
服务器
端、嵌入
式设备、
单片机
……安卓移
动端、
安卓嵌
入式设
备、服
务器
……ios 应用网站前端
展示、
HTML5 跨
平台应
用。WEB 服
务器端
 
2 、 火 山 开 发 特 点
2.1 全中文支持
对普通用户而言，火山软件开发平台实现了彻底的中文化开发，
用户无需掌握太多的专业知识、无需学习英文，即可快速开发高效实
用的各类应用软件。目前具有 火山安卓软件开发平台 和 火山视窗软件

--- 第 8 页 ---
开发平台 两个子平台，用作分别支持用户开发基于安卓和 Windows
视窗操作系统的应用程序。
如下图为火山视窗程序部分演示代码：
如下图为火山安卓程序部分演示代码：

--- 第 9 页 ---
2.2 可视化编程
(1) 界面可视化
火山视窗平台支持界面可视化，设计的程序界面所见即所得，如
下图所示：

--- 第 10 页 ---
最终运行后：
(2) 代码可视化
火山平台中 类 、 变量 、 常量 、 方法 均采用表格可视化设计，可节
省关键词记忆、提高程序开发效率。

--- 第 11 页 ---
2.3 语句快速录入
火山平台内置了 “ 首/ 全拼输入法 ” ，可快速使用中文名称首拼或全拼
进行程序代码输入。
譬如： 信息框 () 只需要输入 “xxk” 即可。
除了“ 首/ 全拼输入法 ” 外，火山中对于很多符号的输入也都进行了智
能处理。
譬如：进行条件比较时需要双等号，但在火山中仅需要输入一个等号
即可，火山会自动补充。
又譬如：在调用某方法时，使用了中文状态下的括号和逗号，火山会
自动转换成英文符号。

--- 第 12 页 ---
对于“&&” ( 且) 和“||”( 或) 这两个 关系运算符 ，可通过拼音快速输入。
2.4 代码即文档
在火山中只要不刻意使用奇奇怪怪的名称进行命名，基本可以实
现代码即文档，即使是没有注释、或者说非常少量的注释也可以轻松
的阅读源代码，非常便于代码传播与交流，这是其它编程语言所不具
备的特性。
2.5 参数引导
通过参数引导，可减少用户记忆量，减少出错的可能性。
火山中每个方法都有各自的参数，想要记住所有方法有哪些参数
以及使用方法显然是不太现实。在程序实际开发过程中，通常都需要
利用 火山即时帮助系统 或官方图文教程来学习使用这个方法，而参数
引导技术就即时帮助中的一种功能。
如下图所示：
当输入 参数分隔符 时，注意观察悬浮提示颜色变化，会智能提示
当前正在输入哪个参数。

--- 第 13 页 ---
2.6 跨平台实现语法统一
如“2.1 全中文支持 ” 中的例图可知，即使是开发平台不同，但程序语
法几乎是一致的。
最终可以达到，学会其中任意一个开发平台后，都可以轻松实现火山
软件开发一通百通，快速开发各类应用软件。
 
3 、 火 山 平 台 差 异
3.1 关于火山安卓软件开发平台
火山安卓软件开发平台由 “ 火山软件开发基础平台 ”+“ 支持安卓目
标环境的火山类库 ”+“ 支持安卓目标环境的编译器 / 调试器插件及相关
工具” 三部分组成，能够将用户开发的火山源程序编译为可以在安卓
系统下运行的 Java 源程序。
 
3.2 关于火山视窗软件开发平台
火山视窗软件开发平台由 “ 火山软件开发基础平台 ”+“ 支持
windows 视窗系统目标环境的火山类库 ”+“ 支持windows 视窗系统目
标环境的编译器 / 调试器插件及相关工具 ” 三部分组成，能够将用户开
发的火山源程序编译为可以在 windows 视窗系统下运行的 C++ 源程
序。
火山视窗支持编译 “32/64 位 ” 的exe 可执行文件和 dll 动态链接
库，并全面支持 Unicode( 统一码）字符集。
 
 
    [ 下一章 ]
 
 

--- 第 14 页 ---
 
[ 上一章     [ 下一章 ]

--- 第 15 页 ---
二 、 火 山 软 件 编 译 环 境 配 置
 
 
在 火山官网 下载并安卓火山平台后并不能直接进行软件调试编译等工
作，需要配置对应编译环境的 sdk 才能可以。
注：火山官网中的火山为免费版，个人版用户在购买火山后，收到加
密狗后会附带一个卡片，在卡片的背面印有个人版的下载地址。
如下图所示：
在 官网 中，可以看到 “ 相关附属资源下载 ” 栏目，此栏目中提供了
火山视窗和火山安卓编译所需要的 sdk 包，下载自己所需要的即
可。
如下图为 64 位 sdk 下载后：
 
1 、 安 卓 平 台
打开安卓平台所提供的 sdk 压缩包 ，会在压缩包中看到一个
“sdk.rar” 的文件夹，继续打开此压缩包会看到一个 “plugins” 文
件夹，将这个文件夹解压到火山平台的安装路径即可。
解压完成后火山就可以正常的进行程序 调试 和 编译发布版 工作。

--- 第 16 页 ---
如果是自行下载的安卓和 java 的 sdk ，点击 “ 工具 -> 选项 ” 菜单进入
系统设置，选择 “ 安卓项目管理器 ” 分别设置 “java sdk 安装根目
录” 和“ 安卓 sdk 安装根目录 ” 即可进行程序调试和编译发布版。
 

--- 第 17 页 ---
2 、 视 窗 平 台
视窗平台的配置和安卓基本一致，打开下载好的 sdk 压缩包 后，会
看到一个 “vs_sdk.rar” 的压缩包，继续打开此压缩包会看到一个
“plugins” 文件夹，将这个文件夹解压到火山平台的安装路径即
可。
如果是自行下载的 vs 编译器，点击 “ 工具 -> 选项 ” 菜单进入系统设
置，选择 “ 视窗项目管理器 ” ，设置 “ 本地编译器 ” 版本，如果未能
识别到，可以直接提供 VS 编译器路径。

--- 第 18 页 ---
 
 
[ 上一章     [ 下一章 ]
 
 

--- 第 19 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 20 页 ---
三 、 火 山 软 件 开 发 平 台 工 作 界 面 概 述
 
 
1 、 主 窗 口
主窗口界面共分为五大部分：
(1) 菜单栏
(2) 工具栏
(3) 工作夹
(4) 输出夹
(5) 代码编辑器
如下图所示：
1.1 菜单栏
(1) 文件
用于提供项目文件的创建、打开、保存、关闭等相关操作。
(2) 编辑
用于操作代码编辑器复制、粘贴、撤销、书签、代码只读、代
码注释等相关代码编辑操作。
(3) 视图
用于操作火山主窗口界面的部分功能栏是否显示。
(4) 生成
用于编译程序发布版。
(5) 调试

--- 第 21 页 ---
用于调试当前项目程序。
(6) 工具
用于提供火山系统设置、模块相关操作、目标开发平台相关小
工具等。
(7) 窗口
用于操作已经打开的火山程序源文件。
(8) 帮助
提供火山系统帮助，提高程序开发效率。
1.2 工具栏
提供了常用功能的快捷操作图标，譬如：新建、保存、代码编辑
相关操作、项目调试 / 发布、项目设置等。
图标的具体作用，可通过鼠标在图标上悬停，查看提示信息，如
下图所示：
1.3 工作夹
在工作夹中又分三个子工作夹：
(1) 解决方案
用于提供展示当前 解决方案 ，便于操作解决方案及 项目 。

--- 第 22 页 ---
(2) 查找替换
用于提供项目代码查找、替换等功能，其结果将显示在输出
夹中。

--- 第 23 页 ---
(3) 类库
类库夹中，第一个图标点击：用于查看火山系统类库模块和
已安装的第三方类库。
第三个图标点击：用于刷新类库。

--- 第 24 页 ---
第二个图标点击：用于提供类库内容搜索功能，可以指定搜
索视窗类库还是安卓类库。

--- 第 25 页 ---
1.4 输出夹
用于显示火山软件的相关输出信息。
当软件进行 调试 时，还会显示 “ 调用栈 ” 和“ 监视表 ” 。

--- 第 26 页 ---
1.5 代码编辑器
用于编写程序代码，当需要编写同一文件不同位置的代码时，可
进行拆分操作。
如下图所示：
代码编辑器的右上角可点击拖拽，拖拽后会将当前源码文件拆
分成上下两部分，可用于编写不同位置的代码，提高代码编写
效率。
如果需要同时操作多个源码文件，也可以进行拆分。
如下图所示：
点击源码文件名可进行拖拽拆分。

--- 第 27 页 ---
 
2 、 系 统 设 置
提供火山平台系统设置操作。
通过“ 工具  -> 选项 ” 菜单即可打开火山设置。
根据自己的需求进行相关设置操作即可，譬如：想要调整火山代
码颜色，就去 “ 火山程序管理器  -> 文档 ” 中进行设置。
注：如果使用的是火山全平台，才会同时显示 “ 安卓 ” 和“ 视窗 ” 的
项目管理器设置。

--- 第 28 页 ---
 
3 、 视 窗 设 计 器
在创建窗口程序项目后，就可以在窗口类的代码区域右键打开窗口设
计器，或使用快捷键 “Ctrl + U” 。

--- 第 29 页 ---
视窗界面设计器分为五个区域，如下所示：
(1) 工具栏
用于调整组件布局样式，如下图所示，选中两个组件后可以批
量对齐。

--- 第 30 页 ---
(2) 窗口界面设计区
进行界面设计相关工作，依赖 组件栏 和 属性栏 。
在火山视窗中的界面设计采用的是绝对布局模式，即精确指定
某个组件在窗口中所处的位置和尺寸。
(3) 组件栏
选中指定组件后可以将其在 “ 窗口界面设计区 ” 进行界面设计，
如下图所示：
(4) 提示栏
用于显示提示信息，无论是选择组件还是选择组件的某个属
性，都会在提示栏中进行相关提示。

--- 第 31 页 ---
(5) 属性栏
用于设置组件常用属性，譬如：修改按钮标题。
在属性栏中，点击 “ 布局内容 ” 可以查看组件布局结构，便于了
解组件层次。

--- 第 32 页 ---
视窗软件中的组件焦点：
在视窗软件进行界面设计时，每个组件都可以获得焦点，按下 Tab
键 也可以进行切换焦点。
如下以编辑框组件举例，按下 tab 键 后光标可以在多个编辑框直接
进行切换：
但是有时候会遇到这样的问题，组件切换焦点的顺序是错乱的，
譬如：软件运行时输入焦点在 账号编辑框 中，但是按下 tab 键 后，
焦点转移到了 验证码编辑框 中，这显然是不正常的。
如下所示：

--- 第 33 页 ---
解决这个问题很简单，在 布局内容 中即可调整焦点顺序。
如下图所示，将 密码编辑框 和 验证码编辑框 对调位置，焦点切换
即可恢复正常。
除此之外，如果软件运行时并不是 账号编辑框 获得输入焦点，也
可以采取同样的办法，将 账号编辑框 调整到顶部位置即可。
 
4 、 安 卓 设 计 器
安卓界面设计器打开方式同视窗设计器一致。

--- 第 34 页 ---
如下图所示：
安卓界面设计器与视窗界面设计器基本一致，有以下几处不同：
(1) 没有布局工具栏，但有一个 “ 布局预览尺寸 ” ，用于调整设计器
的预览尺寸。
注：预览尺寸仅仅提供预览，并不会影响软件最终运行尺寸。

--- 第 35 页 ---
 
(2) 在“ 布局内容 ” 中，增加了一个 “ 布局栏 ” ，用于对当前窗口设置
多种布局。
譬如：在此可以复制并建立一个英文系统下的布局内容。具体
可看“ 如何设计安卓界面布局 ” 文章中 “9. 已有布局列表框 ” 。

--- 第 36 页 ---
 
(3) 安卓采用的是相对布局模式：
火山视窗采用的是绝对布局模式 ( 即精确指定某个组件在窗
口中所处的位置和尺寸 ) ，但这种方式在安卓系统下是行不通
的，这是为什么呢？
道理很简单： Windows 程序界面的显示设备只有一种：电
脑屏幕，并且各种屏幕的 DPI( 每英寸像素数 ) 和物理尺寸相差无
几，而安卓程序界面的显示设备却是千千万万，其设备显示屏
的DPI 和物理尺寸可能相差很大，譬如电视机上可以运行安卓
程序，手机上可以运行安卓程序，甚至只有很小屏幕的随声听 /
运动手环上也可以运行安卓程序，此时使用绝对布局方式将是
一个噩梦，你根本无法设计出可以同时在各种安卓设备上正常
显示的窗口界面。
由于以上原因，安卓程序采用的是相对布局方式，也就是
说，某个组件的实际位置和尺寸是与其周边组件相关的。
注：虽然无法使用以前开发 Windows 程序所习惯的绝对布
局方式会让您觉得有点麻烦，但是相对程序的环境可适应性及

--- 第 37 页 ---
后续维护工作量，您最终会觉得这点麻烦是很值得的，而且您
很快就能发现，相对布局方式也很容易学习。
具体可看 “ 如何设计安卓界面布局 ” 文章中的 “4. 线性布局
器” ，学习如何进行安卓界面设计。
 
(4) 因设备环境不同，安卓设计器暂不支持实时界面预览，实际效
果以安卓系统运行后的效果为准。
界面设计效果和最终运行效果，分别如下图所示：

--- 第 38 页 ---
 
(5) 设计方式不同
在安卓设计器中，需要鼠标点击组件后（不松开鼠标左键），
直接拖拽到设计器后再松开鼠标。

--- 第 39 页 ---
如下图所示：
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 40 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 41 页 ---
四 、 火 山 平 台 解 决 方 案 及 项 目 介 绍
 
 
1 、 解 决 方 案
1.1 概述
多个项目建立在一起的集合被称为解决方案，火山软件开发平台采用
的是 多项目多文件 管理模式，一个解决方案内可以放 N 个项目，一个
项目内可以有 N 个火山源码文件。
例如：要开发一个软件，预计升级多个版本，你想保留历史版本的源
代码，那么就可以都把这些历史版本的源代码放在一个解决方案中便
于管理。
 
1.2 创建项目
创建一个新的项目时会自动依赖一个解决方案，如下图所示进行创
建：
(1) 可通过 “ 文件  -> 新建  -> 项目 ” 或直接点击欢迎页中的 “ 新建项
目” 都可以实现创建项目。
(2) 根据自己的需求选择 平台 及目标平台的 项目模板 ，并依次填写
项目名称、选择所处 ( 保存 ) 位置、解决方案名称 ，最后点击 确定 即
可。

--- 第 42 页 ---
(3) 如果“ 所处位置 ” 不存在会提示进行创建，点击 “ 是” 进行创建即
可。
(4) 最后创建成功后如下图，其中 解决方案 / 项目 / 源文件名称 都可
以通过双击进行修改。

--- 第 43 页 ---
 
1.3 解决方案目录结构概述
在创建了一个项目后，会在 “ 所处位置 ” 目录中生成 “ 解决方案文件 ” 和
“ 项目文件夹 ” 。
注：这些生成的项目文件或文件夹不允许随意修改其名称，否则会导
致项目无法打开。
(1) 解决方法文件后缀名为 “vsln” ，启动火山项目时，双击此文件
即可打开。
(2) 项目文件夹中存储有当前项目源码数据。
打开项目文件夹，可以看到一个 “src” 的文件夹和后缀名为 “vprj” 的
项目配置文件。
(1) 项目配置文件中存储有当前项目所有配置信息。
(2) 自动生成的主程序模板文件，位于 src 文件夹中。

--- 第 44 页 ---
打开src 文件夹就可以看到自动生成的主程序模板文件。
当程序进行 调试 或编译发布版时，会自动在解决方案所处目录中，生
成一个 “_int” 文件夹，用于输出目标平台的源码文件和项目程序文
件。
安卓平台和视窗平台的程序输出路径分别如下：
(1) 安卓平台程序默认输出路径：
调试版 程序默认输出在： “_int\ 项目文件名 \debug\linker” 目
录中。
发布版 程序默认输出在： “_int\ 项目文件名 \release\linker”
目录中。
(2) 视窗平台程序默认输出路径：
调试版 程序默认输出在： “_int\ 项目文件名 \debug\x64( 或
win32)\linker” 目录中。

--- 第 45 页 ---
发布版 程序默认输出在： “_int\ 项目文件名 \release\x64( 或
win32)\linker” 目录中。
注：x64 指 64 位程序， win32 指 32 位程序。
“_int” 文件夹可以自定义其保存位置，通过右键 解决方案 选择 属性 菜
单，通过设置 “ 编译中间数据目录 ” 即可自定义位置。
 
2 、 项 目 管 理
2.1 多文件管理
火山平台中的项目是支持多文件管理的。
例如：软件中有多个窗口，可以建立多个火山源码文件，一个文件中
存放一个窗口类，可便于后期软件维护。
注：跨文件调用程序代码可看 “ 包” 或“ 类” 中的介绍。
(1) 鼠标右键项目选择 “ 添加  -> 新建文件 ” 。

--- 第 46 页 ---
(2) 在新建文档窗口中，填写 文件名 ，选择 所处位置 ( 默认为当前项
目目录，建议保持原样 ) 。
(3) 文件创建完毕后如下图：

--- 第 47 页 ---
(4) 如果软件有多个功能模块或窗口，可以创建多个源码文件来管
理。
 
(5) 创建完毕后的火山源码文件会出现在 “ 所处位置 ” 的目录中。

--- 第 48 页 ---
(6) 如果项目文件过多，还可以通过建立筛选器来进行二次分类。
右键项目选择 “ 添加  -> 新建筛选器 ” 。
(7) 建立后可以通过右键进行重命名。

--- 第 49 页 ---
(8) 筛选器建立完成后，可以通过点击鼠标左键拖拽火山源码文件
到目标筛选器中。
 
2.2 多项目管理
火山平台支持在解决方案中建立多个项目进行管理，不同平台之间也
可以混合建立。
如下所示：
(1) 右键解决方案选择 “ 添加  -> 新建项目 ” ，就可以进行项目建
立。

--- 第 50 页 ---
(2) 在新建项目窗口中，选择一个平台和项目模板，输入项目名称
后点击确定即可建立一个新的项目。
注： 所处位置 默认会填写当前解决方案路径，建议保持原样即
可。
(3) 项目建立成功后，会自动设置新项目为 活动项目 。

--- 第 51 页 ---
活动项目：即当前操作项目。
(4) 切换活动项目，通过项目的右键菜单中可以直接切换。
注：活动项目切换后，项目文本颜色会发生变化。
如果打开了很多火山源文件，也可以通过文件名右键设置活动
项目，如下所示：

--- 第 52 页 ---
(5) 项目建立后，可在 “ 所处位置 ” 指定的路径中看到新项目文件
夹，每个项目都会依赖一个文件夹。
 
3 、 项 目 模 块
3.1 模块配置
在火山中每个项目都可以独立配置进行 模块( 即火山类库 ) 配置，模块
不可以跨平台配置，例如：安卓项目无法配置视窗模块。
模块配置方法如下：
(1) 右键项目配置
如果某项目想要配置模块，可通过右键此项目进行配置模块。

--- 第 53 页 ---
在弹出的模块配置窗口中，勾选要配置的模块点击 “ 确定 ” 即
可。
注：如果想要删除某些模块，取消勾选即可。
会提示正在添加哪些模块，确认无误后直接点击 “ 确定 ” 即可。

--- 第 54 页 ---
添加成功后，可在项目的 “ 模块 ” 分类下看到被添加的模块。
(2) 类库夹中右键配置
右键要配置的模块，选择 “ 将此模块加入项目 XX” ，这里会自动
选择当前 活动项目 进行模块配置。

--- 第 55 页 ---
配置成功后可以在当前活动项目中看到此模块。
(3) 在 帮助页 中配置
例如：在进行类库功能搜索时，双击搜索结果打开帮助页，可
以在帮助页中将此类所处的模块添加到当前 活动项目 中。

--- 第 56 页 ---
添加成功后可以在项目中看到此模块。
删除模块配置方法如下：
右键要删除的模块，选择 “ 删除 ” 即可。

--- 第 57 页 ---
 
3.2 模块安装
火山平台模块的后缀名为 vcip ，模块安装时火山平台会自动识别安装
到视窗模块中还是安卓模块中，安装后将会出现在类库夹中。
模块安装方式如下：

--- 第 58 页 ---
双击模块文件即可安装。
也可以通过 “ 工具 -> 安装模块 ” 进行模块安装。
 
3.3 模块卸载
选择“ 工具 - 卸载模块 ” 即可卸载第三方模块。
(1) 选择要卸载的平台。
(2) 勾选要卸载的模块，点击 “ 卸载 ” 即可。

--- 第 59 页 ---
 
3.4 模块制作
模块制作可参考 《类库模块的封装和使用方法》 文中的介绍。
 
4 、 部 件 程 序
4.1 部件
4.1.1 概述
“ 部件 ” 是火山中提供的一种加密版的火山文件，后缀名为
“.wcv” ，可用于闭源代码分享。
分享的 部件 无法查看其火山源码，只能看到被公开的方法接口。
其效果如下：
在火山源文件进行部件处理后，只能看到方法接口，无法看到
具体的程序源码。
注：部件程序只能隐藏火山源码，并不能真正将源代码隐藏起
来。
譬如：安卓平台编译后依然可以看到 java 源码，视窗平台编译
后依然可以看到 C++ 源码。

--- 第 60 页 ---
4.1.2 生成部件程序
右键火山源文件选择 “ 生成部件程序 ” 即可将当前火山源文件转换
为部件程序。
如果当前整个项目都需要生成部件程序，可以点击 “ 生成 - 生成部件
项目程序 ” 菜单进行操作。

--- 第 61 页 ---
会弹出一个窗口列出所有的火山源文件，可以选择 “ 生成 ” 或“ 合
并生成 ” ，前者为每个火山文件独立生成，后者则会将多个火山
源文件合并成一个文件。
4.1.3 引用部件程序
部件程序的引用和普通火山文件的引用方式一致，通过项目菜单
选择“ 添加 - 现有文件 / 模块 ” 。

--- 第 62 页 ---
然后选择要添加的部件即可，进行添加即可。
添加后双击部件文件即可查看部件接口。

--- 第 63 页 ---
 
4.2 部件 DLL
部件DLL 为火山视窗平台独有功能，安卓平台无法使用。
“ 部件 DLL 动态链接库 ” 和普通的 “DLL 动态链接库 ” 没有本质的区别，
都是动态链接库。只是前者在编译 DLL 时会自动生成其火山接口程
序，方便他人使用其 DLL 中的功能，并且由于相关实现代码位于编译
后的DLL 中，因此安全性是绝对有保证的，可广泛应用于多人协作或
闭源项目中。
具体使用方式可看 《易语言到火山视窗入门》 中的介绍。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 64 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 65 页 ---
五 、 火 山 软 件 开 发 平 台 基 本 编 辑 环 境
 
 
1 、 代 码 输 入 方 式
在火山平台中支持 首拼、全拼和汉字 智能提示输入，并且按下空格或
回车键可将首个提示内容输入到代码编辑框中。
如下所示：
输入方式演示如下：
(1) 首拼输入
如下所示，输入 “jbbl” 就可以表示 “ 局部变量 ” 。
(2) 全拼输入
如下所示，输入 “jubu” 加空格就可以快速输入 “ 局部变量 ” 。

--- 第 66 页 ---
(3) 汉字输入
如下所示，输入 “ 局部 ” 也可以将 “ 局部变量 ” 完整的提示并输
入。
 
2 、 代 码 语 句 体 操 作
在火山平台中代码都是语句体形式，具体可看 “ 方法语句 ” 中的介绍。
代码的表现形式都是一层一层，如下：
可以清晰的看出 类 位于一层， 成员变量 和 方法 位于同一层，方法
内的 局部变量 和方法语句调用，又是一层。

--- 第 67 页 ---
除了类和方法的层级是固定的无法调整外，其它 变量、常量、方法语
句 等都可以进行层级调整。
例如：局部变量也可通过调整层级变为成员变量，也可以重新修改为
局部变量。
如下所示：
选中局部变量右键选择 “ 块操作  -> 向内缩进 ” 或者使用快捷键 “ctrl
+ [” 。

--- 第 68 页 ---
就可以将局部变量改为成员变量。
同理使用 “ 向外缩进 ” 或快捷键 “ctrl + ]” ，可以重新将成员变量改
为局部变量。

--- 第 69 页 ---
如果在方法中输入代码时，发现代码为绿色，证明代码输入到了注释
层，此时可通过快捷键 “ctrl + ]” 进行向外缩进，就可以让代码重新恢
复正常。
如下所示：
另外还有几个使用较多的快捷键为 “Ctrl + Insert” 和“Shift +
Insert” ，用作向前 / 向后插入行，部分电脑需要配合 “Fn” 键使用。
其中，在方法的参数 / 常量 / 变量定义表格上按下 “Shift + Insert” 快捷
键，将固定在其下方插入一条空白语句行，如图：

--- 第 70 页 ---
在“ 变量 1” 的定义行上按下 “Shift + Insert” 快捷键后的结果如下：
 
3 、 按 需 编 译
火山编译器实行的是按需编译模式，也就是说，凡是不可能被执行到
的代码，一概不进行编译。具体为：
从程序的启动位置开始，所有未在程序执行流程中的代码都将不
会被编译。
以火山安卓开发平台举例，譬如下图：

--- 第 71 页 ---
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 72 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 73 页 ---
六 、 火 山 软 件 开 发 平 台 程 序 帮 助 系 统
 
 
1 、 帮 助 页
1.1 概述
帮助页是火山平台提供的即时帮助系统，可用于查看 类 、 方法 、 变
量 、 常量 等数据的帮助信息。
便于在遇到一些陌生方法时，能够掌握如何使用。具体使用方式可
看： 第二章第九节：火山类库方法识别与调用 。
1.2 类库帮助页
如下图为 方法 帮助页的效果，其它类型的帮助页效果大同小异，只是
所显示的数据不同。


--- 第 74 页 ---
下面介绍类库帮助页中最常用的几个功能：
(1) 打开
本功能用于定位源代码，便于在一些方法存在问题时方便自己
修改。
(2) 选择
用于在类库夹中定位所处位置。


--- 第 75 页 ---
(3) 例程
用于在火山系统例程库中搜索当前方法是否有对应案例，如果
有将会打开 “ 例程查找结果 ” 窗口。
(4) 添加模块到项目
用于配置当前 类/ 方法 / 变量 / 常量 等数据所处的 模块 添加到当前
活动项目中。
类库帮助页有以下打开方式：
(1) 类库夹中首次打开需要双击，随后可单击进行切换。

--- 第 76 页 ---
(2) 利用类库搜索打开

--- 第 77 页 ---
(3) 光标定位关键词，使用 快捷键 F1 打开，部分电脑可能需要 Fn +
F1 。

--- 第 78 页 ---
1.3 项目帮助
通过右键项目选择 “ 查看程序结构 ” 或使用快捷键 “Shift + F1” 即可打
开当前项目的帮助窗口。

--- 第 79 页 ---
项目帮助窗口效果如下图：
 

--- 第 80 页 ---
2 、 悬 浮 提 示
鼠标在代码语句上停留大约 1 秒，会提示当前方法的参数等信息，便于
不打开帮助页时也可查看帮助信息。
 
3 、 参 数 展 开 提 示
使用快捷 “Alt + Enter” 可以展开参数表，当参数过多时可通过参数表得
知当前正在输入哪个参数。
如果快捷键冲突无法使用，也可以通过点击加号图标实现展开和关闭参
数表。
 

--- 第 81 页 ---
4 、 书 签
书签用于标记某行代码，设置额外注释信息，多个书签之间可通过快捷
键“F2” 进行跳转。
其功能位于 “ 编辑  -> 书签 ” 菜单中。
加入书签后会在代码行左侧出现一个小图标：
书签编辑窗口：

--- 第 82 页 ---
书签提示信息：
使用快捷键 F2 可进行书签切换：

--- 第 83 页 ---
 
5 、 例 程 库
火山平台提供了非常丰富的例程库，内置了大量的案例，并在逐步完
善。
可通过 “ 文件 -> 打开 -> 样例解决方案 ” 或欢迎页中的 “ 打开样例 -XX 项目 ”
进行打开系统例程库。

--- 第 84 页 ---
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 85 页 ---
一、相关术语
1. 面向对象
2. 名称
3. 立即数
4. 数据类型
二、火山程序面向对象设计
三、火山程序结构详解
1. 包
2. 注释
3. 类
3.1 类的构成
3.2 启动类的定义
3.3 自定义类
3.4 类的注意事项
3.4 类的基本属性表
4. 变量
4.1 什么是变量？
4.2 变量的定义
4.3 变量分类
4.3.1 成员变量
4.3.2 局部变量
4.3.3 公开变量
4.3.4 静态变量
4.3.4 参考变量
4.4 变量的初始值
5. 常量
4.1 什么是常量？

--- 第 86 页 ---
4.2 常量的定义
4.3 常量的分类
4.3.1 成员常量
4.3.2 局部常量
4.3.3 公开常量
4.4 常量的初始值
6. 方法
6.1 什么是方法？
6.2 定义通常方法
6.3 方法的参数与数据传递
6.4 方法的返回值
6.5 方法的嵌套调用
6.6 方法的递归调用
6.7 定义静态方法
6.8 定义支持以动态格式调用的静态方法
6.9 定义属性方法
6.10 定义事件方法
6.11 定义全局静态方法
6.12 定义虚拟方法
7. 方法语句
7.1 表达式语句
7.2 嵌入式语句
四、火山平台中的符号
1. 操作符
1.1 点（  . ）
1.2 方法符小括号  ( )
1.3 参数分隔符逗号（  , ）

--- 第 87 页 ---
1.4 数组符号（  [] ）
1.5 注释符（  // ）
1.6 双引号（  ” ）
1.7 单引号（  ‘ ）
1.8 转义符（  \ ）
2. 运算符
2.1 四则运算符（  +-*/ ）
2.2 取反符（ - ）
2.3 强制类型转换（）
2.4 求余符（ % ）
2.5 关系运算且（ && ）
2.6 关系运算或（ || ）
2.7 关系运算小于等于（ <= ）
2.8 关系运算大于等于（ >= ）
2.9 关系运算小于（ < ）
2.10 关系运算大于（ > ）
2.11 关系运算不等号（ != ）
2.12 关系运算双等号（ == ）
2.13 赋值运算符（ = ）
五、数据类型
1. 数据类型
1.1 了解数据类型
1.2 数据类型使用
2. 基本数据类型
2.1 字节
2.2 短整数
2.3 整数

--- 第 88 页 ---
2.4 长整数
2.5 变整数
2.6 小数
2.7 逻辑型
2.8 字符
2.9 文本型
2.10 模板类型 1~8
3. 基本数据类型扩展类与对象类
3.1 字节集类与字节 []
3.2 基本数据类型包装类
3.3 对象类
六、关键字与常用方法
1. 名称关键字
1.1 返回
1.2 属于
1.3 逻辑值
1.4 空对象
1.5 父对象
1.6 本对象
2. 方法关键字
2.1 事件方法
2.1.1 挂接事件
2.1.2 取消事件挂接
2.2 运算方法
2.2.1 取反
2.3 位运算方法
2.3.1 了解位运算

--- 第 89 页 ---
2.3.2 常用进制
2.3.3 位取反
2.3.4 位与
2.3.5 位或
2.3.6 位异或
2.3.7 位左移
2.3.8 位右移
3. 常用基础方法
3.1 赋值方法
3.1.1 连续赋值
3.1.2 连续清零
3.1.3 连续清空
3.2 运算方法
3.2.1 选择
七、流程控制语句
1. 概述
2. 如果语句
2.1 如果
2.2 如果否则
3. 如果真语句
4. 分支判断语句
4.1 分支判断与分支
4.2 默认分支
4.2 跳出分支
八、循环结构语句
1. 概述
2. 循环

--- 第 90 页 ---
3. 计次循环
4. 逆向计次循环
5. 取循环索引
6. 循环判断首和循环判断尾
7. 判断循环
8. 跳出循环
9. 到循环尾
九、火山类库方法识别与调用
1. 概述
2. 通常方法的识别与调用
3. 静态方法的识别与调用
3.1 普通静态方法
3.2 动态格式调用的静态方法
3.3 全局静态方法
4. 属性写的识别与调用
5. 属性读的识别与调用
6. 事件方法的识别与调用
7. 虚拟方法的识别与添加

--- 第 91 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 92 页 ---
一 、 火 山 软 件 开 发 平 台 相 关 术 语
 
1 、 面 向 对 象
面向对象是一种程序设计理念，被绝大多数程序语言所使用，熟
悉的C++ ， java 等都可以使用面向对象来进行程序设计。使用它进行
程序设计，可以最大限度地提高程序代码的可复用性和可维护性，如
果您想学习程序设计，那么这种设计方法是必须需要掌握的。
为了降低用户的学习门槛，火山对这套理念进行了最大限度的精
简，只保留了其精华部分，因此学习起来并不难，只需要跟着本书一
步一步的学习很容易就可以掌握。
关于面向对象的详细解说可看 “ 第二节 ” 的内容。
 
2 、 名 称
火山平台中的名称共有两个，分别为 “ 单名称 ” 和“ 全名称 ” 。
2.1 单名称 :
单名称必须以 “ 英文字母 / 下划线字符 / 汉字字符 ” 开头，后面跟随
“ 英文字母 / 下划线字符 / 数字 / 汉字字符 ” 。如未特殊标注，本文档中
所提出的所有 “ 名称 ” 均为单名称。
如下图所示：一个变量，一个方法名或一个类名，均可以叫 “ 单名
称” 。
 
2.2 全名称 :
多个单名称以句点符合组合在一起的名称称为 “ 全名称 ” ，例如火
山代码中的包名 “ 火山 . 程序 ” 。
并且目前只有 “ 包名 ” 属于全名称。

--- 第 93 页 ---
注意: 火山中的名称对英文字母的 大小写敏感 , 譬如“abc” 和“ABC” 是
两个不同的名称。
 
2.3 名称来源 :
火山中的名称来源共有两种 :
1. 系统中预先定义的名称，主要是 “ 关键字 ” 和“ 系统类库 ” 中的
名称。
2. 用户程序中自行定义的名称， ( 如： 类/ 方法/ 常量/ 变量/ 参数)
的名称。
这些名称均可以通过系统内置的首拼或全拼输入法进行输入。
如下图所示：自定义的名称 “ 变量 1” ，可通过 “bl1” 或
“bianliang1” 进行输入。


--- 第 94 页 ---
 
3 、 立 即 数
立即数用于直接表达某个基本数据类型的数据值，共有以下四类：
3.1 数值立即数 :
（1 ）  十进制整数或小数，小数支持使用科学计数法，如
“1.32e3” 。
如果要表达这个立即数也很简单，如下图所示直接在变量的初
始值中填写即可。
或者下图中的等于号赋值的形式。

--- 第 95 页 ---
（2 ）  十六进制整数 : “0x” 后跟数字 0-9 或字母 A-F( 大小写无关 ) ，
如“0x12AC3F” 。
十六进制整数表达与整数和小数一致，如下图所示：
（3 ）  字符立即数值 : 使用单引号括住的字符，如 ’ 火 ’ ， ‘ 山 ’ 用于“ 字
符” 类型的立即数。
字符立即数表达如下图所示：


--- 第 96 页 ---
注：在字符立即数中也支持转义符操作，例如 :’\t’,’\n’ 等，如下
图所示：
（4 ）  立即数之间的强制转换：譬如 “1” 整数立即数使用 “ 强制类
型转换 ” 操作符可以转换成 “ 长整数 ” 类型。
如下图所示， “( 长整数 )1” 提供了一个数据类型为长整数的数值
立即数：
注意：强制转换操作不能在初始值中填写，下图写法是 错误
的。
如果某整数的数值超出了整数的最大有效范围，将自动被设定为
长整数数据类型。
如: “0x123456789A” 将被自动认为是长整数数据类型，使用的时
候需要 “ 长整数 ” 。

--- 第 97 页 ---
3.2 逻辑型立即数：
为真/ 假，只能给 “ 逻辑型 ” 使用。
3.3 字符串立即数：
为用双引号（必须是英文引号 ”” ）括住的一段文本，只能提供给
“ 文本型 ” 使用，如下图所示：
在字符串立即数中支持以下转义符操作：
转义符 解释
\b 退格符
\f 换页符

--- 第 98 页 ---
\r 回车符
\n 换行符
\t 水平制表符
' 单引号
" 双引号
\ 反斜杠
\x后跟1-3 个十六进制字符 , 为所对应字符的代码
值.
如在火山视窗平台中： “ 您好 !\r\n 祖国 ” 在“ 您好 !” 和“ 祖国 ” 之间通
过使用转义符插入了一个回车和换行符。
最终会出现换行效果。
注意: 在火山安卓平台里面，如果欲达到换行效果 , 需要插入 “\n” 即
可，如下图所示：

--- 第 99 页 ---
最终会出现换行效果。
3.4 数组立即数

--- 第 100 页 ---
（只能在提供常量 / 变量数组初始值时使用）
为使用花括号括住的立即数的组合 , 如 : { 1, 2 }, 多维数组可以嵌套 ,
如: { { 1, 2 }, { 3, 4 }, { 5, 6 } }
注意: 多维数组的同一维内成员数目必须相等 , 譬如如下格式的数组
立即数是不允许的 : { { 1, 2 }, { 3 } } , 因为其第 2 个维中的成员数目
不相等。
正确的数组立即数表达如下图所示：
注意：火山中不支持等于号赋值数组立即数，如下图所示的写法
是 错误 的。
 
4 、 数 据 类 型
数据类型可以为以下几种 :
4.1 基本数据类型 ，软件开发过程中必备的基本类型。
4.2 用户程序中自定义的类 ，称为 “ 类数据类型 ” 。
4.3 数组数据类型

--- 第 101 页 ---
数组数据类型为基本或类数据类型后面跟随一个或多个数组维
定义组成。
每个数组维定义由左右中括号 (“[]”) 组成 , 如果应用在变量或常量
定义上，可以在中括号内部置入具体成员数目，表示生成具有
对应维数的数组变量实例，可参考 数组立即数 中的定义。
数据类型可以在定义常量 / 变量 / 参数 / 方法返回值时使用，也可以在程
序语句中使用。
火山视窗示例：
注意：在火山视窗中 不支持数组类型 作为参数和返回值，以下写
法是 错误 的。
火山安卓示例：

--- 第 102 页 ---
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 103 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 104 页 ---
二 、 火 山 软 件 开 发 平 台 面 向 对 象 的 程 序 设 计
方 法
 
 
以 火 山 视 窗 为 例 介 绍 ：
● 假设有一家工厂，所生成的产品是电水壶，这种电水壶有这些主要
特点：
1 、由壶体和壶盖组成；
2 、颜色是银白色的；
3 、有一个开关可以控制启动烧水；
4 、水烧开后会发出鸣叫声音报警。
按照面向对象的设计方法，我们把这个电水壶称为这个工厂的一 “ 类 ”
产品，简称为 “ 电水壶类 ” ，它具有同样的 4 个特点：
1 、有两个成员 变量 ：壶体和壶盖；
2 、有一个成员 属性 ：颜色，它的值等于银白色；
3 、有一个成员 方法 ：烧水（即按下开关就开始烧水）；
5 、有一个成员 事件 ：水已经烧开警报。
 
变量 用来存储类中的数据， 属性 用来表达或修改类的特征，
方法 用作执行类的功能， 事件 用来对外发送通知， 类 就是记录有
一系列 变量、属性、方法、事件 成员的集合，所有具有这些特征
成员的具体产品就叫做这个 类的对象 ，这就是 面向对象 的程序设
计理念来由。
用前面的例子来讲， “ 电水壶类 ” 就是电水壶的产品设计规
范，而具体的单个电水壶产品就是 “ 电水壶类 ” 的对象（有时也叫
对象实例）。
这就是 类的封装 ，我们根据上述描述可以得出如下图所示代
码：

--- 第 105 页 ---
假设火山可以驱动这个电水壶操作，那么上述类在火山中的一步
一步的调用示例如下图所示：
(1) 首先要定义一个类型为 “ 电水壶类 ” 的变量。
(2) 添加我的主窗口 “ 创建完毕 ” 事件。

--- 第 106 页 ---
(3) 在窗口创建完毕事件下调用 “ 电水壶变量 . 烧水 ()”
(4) 添加 “ 水烧开警告 ” 事件。

--- 第 107 页 ---
(5) 添加事件后显示一个信息框，提示水烧开了。
(6) 最终当火山程序运行时，会弹出水烧开的信息框，证明整个
程序的执行流程是没有任何问题的。

--- 第 108 页 ---
上述案例下载： 安卓平台 ， 视窗平台 。
 
● 假设有一天，工厂想生产一种具有自动保温功能的电水壶，有两种
方案：一是完全重新设计一个新的电水壶，二是在现有电水壶的基础
上增加一个保温开关。很显然，第二种方式更经济实惠，工厂把这种
新的电水壶称为 保温电水壶 ，它增加了一个特点：
1 、增加了一个开关：  保温，按下开关后可以对已经烧开的水进行
自动保温。
按照前面的设计方法，由于新电水壶增加了一个成员，所以我们
不能把它归纳到已有的 “ 电水壶类 ” 里面，但是我们可以建立一个新的
类： “ 保温电水壶类 ” ，它在 “ 电水壶类 ” 的基础上同样增加了一个新成
员：
1 、成员方法：保温（即按下开关就开始保温）
通过上述我们可以得出如下代码：
由于它基于 “ 电水壶类 ” 设计而来，因此我们把 “ 电水壶类 ” 称为
“ 保温电水壶类 ” 的 基础类 或 父类 ，把 “ 保温电水壶类 ” 称为 “ 电水壶类 ”
的 继承类 或 子类 ，它们之间是 继承 与 被继承 的关系，继承类自动具有
基础类的所有特征成员。
由于 继承类 包括了 基础类 的所有成员，因此 继承类 也可以认为是
基础类 的一种。这个也很容易理解：我们可以把 “ 保温电水壶 ” 称为
“ 电水壶 ” ，但是不能把 “ 电水壶 ” 称为 “ 保温电水壶 ” 。假设客户要买
1000 个 “ 电水壶 ” ，现有产品数量不够时我们可以用 “ 保温电水壶 ” 来

--- 第 109 页 ---
充数，但是客户要买 1000 个 “ 保温电水壶 ” 就绝对不能用 “ 电水壶 ” 来
充数，是不是这个道理？
从程序设计的角度来讲，就是我可以把一个数据类型为 “ 保温电
水壶类 ” 的对象赋值到一个数据类型为 “ 电水壶 ” 的变量，但是不允许
把一个数据类型为 “ 电水壶 ” 的对象赋值到一个数据类型为 “ 保温电水
壶类 ” 的变量。
如下图所示：
需要注意的是：如果把一个数据类型为 “ 保温电水壶类 ” 的对象赋
值到一个数据类型为 “ 电水壶 ” 的变量，那么这个变量里面实际存储的
还是一个 “ 保温电水壶类 ” 对象，并不会因为变量的数据类型为 “ 电水
壶 ” 存储进去的对象的数据类型就也为 “ 电水壶 ” 了。这个也很好理
解：工厂用 “ 保温电水壶 ” 充作 “ 电水壶 ” 交付给了客户，不会因为这个
充数行为就导致 “ 保温电水壶 ” 产品变成 “ 电水壶 ” 产品了。
这就是 类的继承 ，可以如下所示调用 “ 保温电水壶类 ” ：
(1) 首先定义 “ 保温电水壶类 ” 的成员变量。
(2) 在窗口创建完毕后调用 “ 烧水 ” 方法。

--- 第 110 页 ---
(3) 当水烧开后执行 “ 保温 ” 。
(4) 最终会弹出信息框提示，证明保温执行成功。
上述案例下载： 安卓平台 ， 视窗平台 。
 
● 让我们继续假设，假设有一天工厂发现 电茶壶 的销路要比电水
壶好，同样有两种方案：一是完全重新设计一个新的 电茶壶 ，二是修
改现有电水壶的烧水功能，将其改为烧茶。同样很显然，第二种方式
更经济实惠。那么这种电茶壶的特点为：
1 、修改了电水壶的烧水功能，使其改去烧茶。
同样，我们需要定义一个名为 “ 电茶壶类 ” 的类，然后定义一个同
样名为 “ 烧水 ” 的方法，该方法覆盖了 “ 电水壶类 ” 中的原有名为 “ 烧水 ”
的方法，然后将 “ 电水壶类 ” 中的 “ 烧水 ” 方法标记为 虚拟方法 （虚拟方
法仅是一个标记，用作标记 “ 烧水 ” 方法可以被继承类覆盖），这样以

--- 第 111 页 ---
后调用 “ 电茶壶类 ” 类的 “ 烧水 ” 方法时，就会改去烧茶，而不会去烧
水。
(1) 如上所描，首先对 “ 电水壶类 ” 进行一些细微的修改。
(2) 定义 “ 电茶壶类 ” 并继承电水壶类，添加 “ 烧水 ” 的虚拟方法。
(3) 在 “ 烧水 ” 虚拟方法下调用 “ 水烧开警告 ( 假 )” ，用于发送茶烧开
完毕。

--- 第 112 页 ---
(4) 首先在主窗口中声明 “ 电茶壶类 ” 变量。
(5) 窗口创建完毕后调用 “ 烧水 ” 方法，本方法因设置了虚拟方法进
行了修改，实际上是烧茶。
(6) 最后添加 “ 水烧开警告 ” 事件，判断茶是否烧开。
(7) 最终茶被烧开。

--- 第 113 页 ---
需要注意的是：如果把一个数据类型为 “ 电茶壶类 ” 的对象赋值到
一个数据类型为 “ 电水壶 ” 的变量，据前所述，这个变量里面实际存放
的还是一个 “ 电茶壶类 ” 的对象，因此如果调用该变量的 “ 烧水 ” 方法，
实际上调用的还是 “ 电茶壶类 ” 的烧茶功能。
这就是 类的多态 ，在 “ 虚拟方法 ” 中的也有相应的操作案例可以
学习。
上述案例下载： 安卓平台 ， 视窗平台 。
 
● 以上就是火山中所使用的面向对象程序设计的全部内容了，最后一
点其实与面向对象设计无关：
假设甲公司和乙公司都生产电水壶，商店如果同时进货了这两种
电水壶，就必须在电水壶上分别贴上标签： “ 甲公司的电水壶 ” 、 “ 乙
公司的电水壶 ” ，以免引起混淆。
在程序设计里面，就对应为 “ 甲公司 . 电水壶类 ” 、 “ 乙公司 . 电水
壶类 ” ，前面的 “ 甲公司 ” 和 “ 乙公司 ” 分别定义了一个命名空间，也叫
做 “ 包 ” 。包用作避免名称混淆，在同一个名称的包内，不允许存在相
同名称的类，在不同名称的包内，可以存在相同名称的类。
所有在包中定义的类，其名称前被自动加上包名， “ 包名 . 类名 ”
称为类的绝对名称。如果该类的名称在程序的所有包中均唯一或者在
该类所处包内部引用此类 , 可以省略掉其包名来引用此类。
譬如，假设程序中不存在 “ 乙公司 . 电水壶类 ” 或者在 “ 甲公司 ” 包
自身的代码内部，就可以直接使用 “ 电水壶类 ” 来引用 “ 甲公司 . 电水壶
类 ” 。
注意：包名中间也可以包括句点，譬如 “ 湖北 . 武汉 . 甲公司 ” 或
“ 湖南 . 长沙 . 乙公司 ” ，这样的命名空间更明确清晰一些，也更具有唯
一性。
上述内容可参考关于 “ 包 ” 中的介绍案例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 114 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 115 页 ---
三 、 火 山 软 件 开 发 平 台 程 序 结 构 详 解
 
在观看本节之前，务必看下 第二节 中的 面向对象程序设计
一个火山程序的构成结构如下 :
1. 包定义
1. 文档嵌入行 ( 知道即可无需了解 )
2. 文档注释行
3. 类定义
1. 类嵌入行 ( 知道即可无需了解 )
2. 类注释行
3. 类成员常量
4. 类成员变量
5. 类成员方法
1. 方法参数
2. 方法局部常量
3. 方法局部变量
4. 语句注释行
5. 语句行
6. 语句嵌入行 ( 知道即可无需了解 )
 
火山视窗程序结构演示：

--- 第 116 页 ---
火山安卓程序结构演示：

--- 第 117 页 ---
 
1 、 包
包名为 “ 全名称 ” ，通常名字为 “ 公司名称 + 软件名称 + 功能分类 ” 进行命名。
例如： “ 递归 . 火山软件 . 主程序 ” 或者“ 火山软件 . 文本操作模块 ” 等，只要方
便自己后期维护任何命名都可以，但是包名中必须保证至少有一个小数
点。
在火山程序中每个源文件都会有一个包名，无法删除且固定于程序首行位
置，并且一个源文件只能存在一个包名。

--- 第 118 页 ---
不同源文件的包名可重复，程序会自动将两个文件归位一个包内，相同包
名的文件即使不公开类也可以实现跨文件调用。
如果两个火山源文件的包名不一致，则需要公开类才能被其它包的程序访
问。

--- 第 119 页 ---
 
务必注意： 在火山安卓程序中 “ 启动类 ” 所处位置的包名，填写后会编译为
程序包名，安卓中的程序包名一旦填写后将不能修改，因为随便修改将会
导致程序无法正常的升级安装，务必慎重填写。
安卓项目中的 “ 启动类 ” 所处文件的包名填写要尽量复杂，建议最少使用两
个小数点，防止和其它第三方软件冲突，因为包名冲突后安卓程序会出现
无法正常安装的情况。
例如：腾讯 QQ 的包名为 “com.tencent.mobileqq” ，则你的软件程序不能
使用此包名作为你的程序包名，因为腾讯 QQ 已经使用。

--- 第 120 页 ---
 
 
2 、 注 释
火山的注释有以下几种形式：
2.1 以双斜杠 “//” 字符串引导，说明其处于被注释状态，其以及其中的所
有内容 ( 包括直接 / 间接子成员 ) 在编译时都将被忽略。


--- 第 121 页 ---
2.2 在类外部的程序行，被称为文档注释行。文档注释行的添加，只需
要光标定位类名一栏，然后按键盘上的 “ins/insert” 键就可以插入文档
注释行，部分电脑需要按下组合键 “Fn+ins” 键才可以插入。
2.3 在类内部但是在类方法外部的程序行，被称为类注释行。类注释行
的添加同文档注释行一致，光标定位方法名按 “ins” 键即可。
2.4 在火山代码表格的备注栏输入，也属于注释文本，此注释文本可以
在火山代码中被悬浮提示。除了类备注外，方法 / 变量 / 常量等备注信息
都可以通过提示框显示出来。

--- 第 122 页 ---
2.5 在注释文本中如果以一个或多个减号 / 等号字符结束，火山将会自动
在其后绘制对应长度的单 / 双分隔线，如下图所示：
 
3 、 类
3.1 类的构成
类名为 “ 单名称 ” ，用作定义一个可以具有各种子成员的复合数据类型，各
个子成员如下：
(1) 类名。
(2) 类注释行。
(3) 类嵌入行 ( 普通用户无需掌握 ) 。
(4) 成员变量。
(5) 成员常量。
(6) 方法 ( 通常方法 / 属性读或写方法 / 事件定义或接收方法 / 虚拟方法 ) 。
3.2 启动类的定义

--- 第 123 页 ---
“ 启动类 ” 的类被用作指定用户程序的启动入口类，用户程序将从此处开
始执行，启动类在整个用户程序中只能存在一个，并且不允许修改其名
称。
不同火山程序的启动类的样式不同，并不是固定的，是由新建项目时模
板程序自动生成的，如下所示：
(1) 创建火山视窗 “MFC 窗口程序 ” 项目时：
会自动生成 “ 启动类 ” 和对应的 “ 主窗口 ” 类，用于视窗程序的启动。


--- 第 124 页 ---
(2) 在创建火山安卓 “ 空窗口 ” 项目时：
会自动生成 “ 启动类 ” 用于安卓程序的启动。
3.3 自定义类
自定义类可使用 “ctrl+D” 快捷键进行定义，或者鼠标右键选择 “ 插入 ->
插入新类 ” 进行定义类操作。

--- 第 125 页 ---
3.4 注意事项
(1) 同一个包中不允许出现相同的类名，如下图所示是错误的。
同项目下，只要包名一致不同文件下也不允许类名重复，如下图所示的
写法是错误的。

--- 第 126 页 ---
(2) 类名为 “ 单名称 ”( 即其中不允许使用小数点 ) ，如下图所示是错误的。
(3) 引用类名时可以直接使用类名称，或者使用 “ 包名 . 类名 ” 进行引用，
此格式被称为类的 “ 全名称 ” 。
注意：如果调用其它火山源文件的类，注意观察两个源文件包名是否一
致，如果不一致要注意公开类才可以被访问到。


--- 第 127 页 ---
(4) 在需要访问类实例对象的成员时，在类对象实例名称和欲访问的子
成员名称之间使用小数点分隔即可，前面指定具体访问哪一个对象实
例，后面指定访问这个对象实例的具体哪个子成员。
如下图所示：分别访问了 “ 测试类 ” 的实例对象 “ 测试 ” 的“ 测试变量 ” 和
“ 测试类方法 ” 两个子成员。
3.5 基本属性表
(1) 基础类
指定本类的基础类名称，可以是 “ 单名称 / 全名称 ” ，也可以是空文本
( 表示无基础类 ) 。
如果定义了非空基础类，当前类将自动继承所有来自该基础类的内
容，如果该基础类还有基础类，将一并继承过来，此时本类称为这些
类的“ 继承类 ” 。
注: 有一些编程语言也称 “ 继承类 ” 为“ 子类 ” ，“ 基础类 ” 为“ 父类 ” ，意
思是一样的。
继承类访问其直接 / 间接基础类中的成员不需要其为公开状态。

--- 第 128 页 ---
(2) 公开
指定本类是否对外公开。
公开类可以在所处包外部被访问，而非公开类只能在所处包内部被访
问。
如下图所示：文件 1 的包名和文件 2 的包名不一致，文件 1 想要使用文
件2 中的类，必须公开文件 2 中的类。
而文件 2 中未公开的类，只能在 “ 火山 . 软件 ” 的包中使用。

--- 第 129 页 ---
 
 
4 、 变 量
4.1 什么是变量？
变量相当于一个容器，可以随意的将任何数据放进去并且取出来。如一
个杯子，可以在杯子中放任何口味的饮品，甚至也可以泡茶喝。只是变
量中存放的是可变的数据。
变量的名称为 “ 单名称 ” ，首字符不能为数字且不能使用任何标点符号
（“_” 下划线字符除外）。
4.2 变量的定义
变量的定义可通过组合快捷键 “Ctrl+L” 进行创建，或者使用右键菜单中
的“ 插入 -> 插入新成员 / 局部变量 ” 来进行定义变量操作。
在类中插入的变量为成员变量，在方法中插入的变量为局部变量。

--- 第 130 页 ---
定义变量后输入名称并在 “ 类型 ” 一栏填写自己需要的类型即可。
如下图所示，在测试类中定义了一个类型为 “ 整数 ” 的“ 成员变量 1” 。
如果想要新增变量还可以在已有变量的基础上，按 “Enter” ( 回车键 ) 增加
新的变量。
4.3 变量的分类
变量有几种类型，每种类型都有不同的作用，并且变量存在作用域，并
不是随意定义一个变量就可以在程序的任意位置被访问到。

--- 第 131 页 ---
根据作用范围的不同，变量可以分为 “ 成员变量 ” 和“ 局部变量 ” 。
如下图所示：
“ 成员变量 ” 位于类的子语句体内并且可以看到和方法语句位于同级。
而“ 局部变量 ” 只能位于方法的子语句体内。
4.3.1 成员变量
成员变量可以在当前类的所有非静态方法中调用，如果某个方法勾选
了静态将不能使用这个非静态变量。

--- 第 132 页 ---
如果想要在静态方法中使用这个变量，必须也将变量设置为静态变量
才可以。
如下图所示：当成员变量被勾选静态后，静态方法内输入 “cyb” 可以
正常的提示 “ 成员变量 1” 证明可以被正常使用。

--- 第 133 页 ---
4.3.2 局部变量
局部变量只能在当前方法中被调用，其它方法无法使用，并且只能在
变量定义表下方被使用。
如下图所示，定义的两个局部变量只能在变量定义表下调用。
温馨提示：局部变量只有在当前方法被调用的时候才会去向系统申请
内存，当方法执行结束后，变量会被系统回收释放，因此局部变量是
非常节省系统内存的。建议在程序开发过程中，能使用局部变量的就
不要去定义成员变量。

--- 第 134 页 ---
变量根据属性不同，还可以分为 “ 公开变量 ” 、“ 静态变量 ” 和“ 参考变
量” 。
4.3.3 公开变量
当变量公开后可以被其它类访问。
注：仅针对成员变量，局部变量无此属性。
而非公开变量只能在本类或者其继承类中访问。

--- 第 135 页 ---
4.3.4 静态变量
静态变量即勾选 “ 静态 ” 后的变量称为静态变量，静态变量又分为成员
静态变量和局部静态变量。
如下图所示：
成员静态变量有以下特点：
(1) 静态变量在所处类载入后即保持始终存在，并且未存放在类的对
象实例中，而只存放在类信息本身中，所以无论定义多少类对象实
例，静态成员变量都只存在一份。
(2) 由于静态成员变量存放在类本身中，所以在其所处类 / 继承类外部
需要以 “ 所处类名 . 静态成员变量名 ” 的方式访问。

--- 第 136 页 ---
利用成员静态变量的特点可以实现类似全局变量的效果，如下图
所示，定义了一个成员静态变量后在其它任何类中都可以访问。
如下图所示，如果定义了 “ 测试类 ” 的实例变量去访问 “ 成员静态变
量” ，虽然代码能被编译器接受但是会提示警告信息，并且火山编
译器会自动替换成对应的类去访问。
除此之外，无论定义了几个 “ 测试类 ” 的对象变量， “ 测试类 ” 的“ 静
态成员变量 ” 始终只存在一份，因此黄色箭头指向的代码所访问的

--- 第 137 页 ---
“ 静态成员变量 ” ，实际上都是同一个。
(3) 由于静态变量初始化时不存在所处类实例对象，因此所静态的变
量如果存在 “ 事件方法 ” 将不会自动挂接其事件到其所处类，需要在必
要的时候通过 “ 挂接事件 ()” 方法手动挂接事件。
如下图所示，假设 “ 测试类 ” 中存在事件方法，如果想要触发事
件，需要通过 “ 挂接事件 ()” 方法手动挂接事件。
4.3.5 参考变量
注意： 在火山视窗平台中不支持参考变量，勾选参考后将会如下图所
示。

--- 第 138 页 ---
因此所有关于参考变量的介绍全部是基于火山安卓平台展开。
(1) 什么是参考变量？
想要了解什么是参考变量，首先要清楚什么是对象实例，定义一
个变量即可理解为创建了这个类的对象实例，勾选参考后等于取
消了对这个对象实例的创建。
用更加通俗的解释来说，比如手机中的联系人就相当于 “ 对象实
例” ，而联系人条目就相当于 “ 参考变量 ” 。
(2) 参考变量的特点
参考变量不会创建对象实例，而是用作保存到其它对象实例的指
向性信息 ( 即参考 ) ，如果想要访问参考变量中的数据，必须首先赋
值（创建其对象实例）。
例如：通过手机联系人条目 ( 参考变量 ) 是无法进行拨打电话 ( 访问
对象数据 ) 操作的，必须获取到联系人条目中存储的电话号码 ( 创建
对象实例 ) 才能进行拨打电话操作。
如下图所示， “ 对象 2” 因为是参考变量因此不能直接访问其中的方
法，必须进行赋值操作后才可以访问。

--- 第 139 页 ---
需要注意的是，对象之间的赋值必须保证数据类型一致，或者被
赋值的对象是赋值对象的基础类（父类）。
如下图所示，因为 “ 类2” 是“ 类1” 的基础类（父类），因此即使是
数据类型不同的情况下也可以进行赋值操作。
(3) 对象实例的获取办法
1. 如上述 “ 参考变量的特点 ” 中所示的直接赋值形式。
2. 通过所提供的类方法创建：
例如：在安卓类库中的 “ 屏幕度量信息类 ” 声明了属性禁止创建
对象，如果遇到这种类在定义变量的时候就需要勾选参考。

--- 第 140 页 ---
如果不勾选参考直接使用，编译器会报错，如果在日常开发过
程中遇到类似的错误，就证明定义的变量需要勾选参考。
如果指定类不允许非参考变量，通常在此类中都有相关的创建
实例对象的方法，例如：屏幕度量信息类中就有 “ 获取 ()” 方
法，可用于获取屏幕度量信息类的对象实例。
屏幕度量信息类的正确使用方式如下所示：
总结: 如果某个类指定了不能直接定义其对象实例变量，那么肯
定可以通过调用某个方法获得其对象实例。绝大多数情况下该
方法由此类自行提供，名称中一般包括 “ 创建 / 从 XX 创建 / 新建 /
获取” 之类的字样，并且该方法一般为静态方法。
如下图所示为创建 “ 可绘制对象类 ” 的实例方法：

--- 第 141 页 ---
如下图所示 “ 可绘制对象类 ” 的用法：
3. 常见错误：
(1) 被遗漏的参考属性：
在日常开发过程中，自定义的类实例对象进行赋值操作时，
不勾选参考编译器也不会报错，也可以正常编译通过。
但是这样的用法会导致编译器重复创建对象实例，从而导致
程序执行效率降低，占用不必要的内存空间。
所以在进行对象赋值操作时，即便编译器没有报错也要检查
是设置了 “ 参考 ” 属性。
注意： 整数、小数等基本数据类型不需要勾选参考。
(2) 使用了空参考变量：

--- 第 142 页 ---
如下图所示，虽然对 “ 局部变量 ” 进行了赋值操作，但是依然
是错误的写法，因为 “ 成员变量 ” 也是参考变量，必须保证
“ 成员变量 ” 是非参考变量才可以进行如下操作。
如果你不确定 “ 成员变量 ” 是否拥有实例对象，可以通过如下
图所示的方法进行操作，避免程序出现闪退等异常问题。
4.4 变量的初始值
变量的初始值设置大致分为以下三种类型， “ 基本数据类型 ” 、“ 类数据
类型” 和“ 数组数据类型 ” ，每种类型的初始值都是不同的。
4.4.1 基本数据类型变量
在基本数据类型中，数值型 ( 整数 / 小数 / 长整数 / 短整数 ) 变量的初始值
为0 ，逻辑型变量的初始值为假，文本型变量的初始值为 ””( 即空文本 )
如果不想使用默认初始值，也可以如下图所示在表格中设置初始
值或者通过代码设置初始值。
变量初始值的设置除了直接使用 立即数 外，还可以使用 “ 类名 . 常量
名” 进行设置。

--- 第 143 页 ---
使用“ 类名 . 常量名 ” ，优点是便于记忆防止输入错误。
如果常量在当前类中，也可以省略类名直接输入常量名字，如下
图所示：

--- 第 144 页 ---
如果要设置的文本型数据为多行文本，可以打开 “ 初始值编辑器 ”
设置内容。
在打开的初始值编辑器中输入想要设置的内容即可。
安卓平台将自动生成 “\n” 换行符。
视窗平台将自动生成 “\r\n” 对文本数据进行换行。

--- 第 145 页 ---
4.4.2 类数据类型变量
(1) 对于类数据类型的变量，除资源类外其它任何类数据类型都不支
持在初始化表格中设置初始数据。
对于火山平台中的资源类型，设置的初始值最终会被火山编译器
处理打包到软件程序内部。
注： 火山中所引用的外部资源，火山源文件只是引用其文件路
径，因此外部文件不能删除，删除后将无法正常编译通过。当程
序编译完成后，引用的文件会打包到程序内部，因此不会再依赖
引用的外部文件。
火山安卓平台资源类型演示：
火山视窗平台资源类型演示：
(2) 对于火山安卓平台，参考变量其默认值为空对象，非参考变量则
为对应的对象实例。
(3) 对于火山视窗平台，由于不支持定义参考型数据，因此所有非基
本数据类型变量均为对应的对象。
4.4.3 数组类型变量
(1) 基本数据类型数组的初始值如下所示，大括号开始大括号结束的
形式，每个成员之间用英文的逗号分隔。

--- 第 146 页 ---
(2) 如果基本数据类型数组未指定初始值，但指定了成员数 ( 如下图所
示) ，则数值型数组变量的每个成员初始值为 0 ，逻辑型数组变量的每
个成员初始值为假。
(3) 其它所有数据类型 ( 包括文本型 ) 数组变量的每个成员初始值：如
果为火山安卓平台则为空对象，为火山视窗平台则为对应的对象实
例。
因此在火山安卓平台中，对于非数值和逻辑型的数组，其每个成
员在使用前必须首先被单独赋值，如 :
 
5 、 常 量
5.1 什么是常量？
常量和变量一样，都是存放数据的容器，不同之处如下：
(1) 常量只能在定义时被赋予初始值，不能在程序运行后进行修改，
如下图所示的写法是错误的。
(2) 常量设置初始值时，只能提供立即数，如下图所示提供一个其它
常量作为初始值是错误的。

--- 第 147 页 ---
(3) 常量的数据类型只能为基本数据类型或资源数据类型（例如：安
卓中的可绘制资源，视窗中的视窗文件资源）。
(4) 常量的 “ 静态 ” 固定为真不可修改，即 : 常量并未存放在类的对象实
例中，而只存放在类信息本身中，所以无论定义多少类对象实例，常
量都只存在一份。因此常量的访问方式与静态成员变量的访问方式是
一样的，在其所处类 / 继承类外部需要以 “ 所处类名 . 常量名 ” 的方式访
问，如下图所示：
5.2 常量的定义
常量的定义可通过组合快捷键 “Ctrl+B” 进行创建，或者使用右键菜单中
的“ 插入 -> 插入新常量 ” 来进行定义常量操作。
在类中插入的常量为成员常量，在方法中插入的常量为局部常量。

--- 第 148 页 ---
定义常量后输入名称并在 “ 类型 ” 一栏填写自己需要的类型即可。
如下图所示，在常量类中定义了一个类型为 “ 整数 ” 的“ 成员常量 1” 。
如果想要新增常量还可以在已有常量的基础上，按 “Enter” ( 回车键 ) 增加
新的常量。
5.3 常量的分类
常量和变量一样都存在作用域，根据作用范围的不同，可以分为 “ 成员
常量” 和“ 局部常量 ” 。
如下图所示：

--- 第 149 页 ---
“ 成员常量 ” 位于类的子语句体内并且可以看到和方法语句位于同级。
而“ 局部常量 ” 只能位于方法的子语句体内。
5.3.1 成员常量
成员常量可以在当前类的所有方法中调用，包括静态方法。
5.3.2 局部常量

--- 第 150 页 ---
局部常量只能在当前方法中被调用，其它方法无法使用，并且只能在
常量定义表下方被使用。
如下图所示，定义的两个局部常量只能在常量定义表下调用。
5.3.3 公开常量
当常量公开后可以被其它类访问。
注：仅针对成员常量，局部常量无此属性。
而非公开常量只能在本类或者其继承类中访问。

--- 第 151 页 ---
5.4 常量的初始值
常量的初始值设置大致分为以下两个类型， “ 基本数据类型 ” 和“ 资源数
据类型 ” 。
在基本数据类型中，直接在 “ 初始值 ” 一栏提供对应的数据类型即可，如
下所示：
如果为资源数据类型，需要提供对应资源的立即数，火山平台会自动处
理所引用的资源数据。
如下图所示，火山视窗平台中的 “ 视窗文件资源 ” 需要提供一个文本型的
文件相对路径或绝对路径，可直接在初始值输入或者通过下拉按钮浏览
选择。
如下图所示，火山安卓平台中的 “ 可绘制资源 ” 也需要提供一个文件路径
的立即数。

--- 第 152 页 ---
如果要设置的文本型数据为多行文本，和变量一样设置初始值一样，也
可以打开 “ 初始值编辑器 ” 设置内容。
在打开的初始值编辑器中输入想要设置的内容即可。
安卓平台将自动生成 “\n” 换行符。
视窗平台将自动生成 “\r\n” 对文本进行换行。


--- 第 153 页 ---
如果常量是数组类型，其数组符号内可以提供成员数也可以不提供，需
要注意的是如果提供了成员数则务必保证初始值设置的数量和提供的成
员数一致。
 
6 、 方 法
6.1 什么是方法？
一个完整的程序中可能有成千上万个类，每个类中可能有成千上万个语
句，为了方便程序编写和设计，火山将程序的类分割成一个一个较小的
单元，这些单元被称为 “ 方法 ” 。
方法可以用作一系列命令的封装，可以让复杂的代码简单化，提高代码
复用性、可读性，更加有利于程序的模块化开发。
(1) 方法的定义
火山方法的定义可以使用 “Ctrl+M” 快捷键进行创建，或者使用右键
菜单“ 插入  -> 插入新方法 ” 进行定义。

--- 第 154 页 ---
(2) 方法的分类
在火山中方法根据用途的不同，分成以下几类：
1. 通常方法
2. 静态方法
3. 支持以动态格式调用的静态方法
4. 属性方法
5. 事件方法
6. 全局静态方法
7. 虚拟方法
除了以上类型外，火山中还存在两个固定方法 “ 类_ 初始化 ” 和“ 类_ 清
理” ，用于对象的初始化和清理数据操作。
类_ 初始化 方法
此方法会在类对象被创建时自动调用，该方法不携带任何参数并
且不返回值，对是否需要公开没有任何要求，如下图所示：

--- 第 155 页 ---
如果你想在对象被创建的时候初始化一些数据，可以在此方法下
操作, 如下图所示：
类_ 清理 方法
此方法会在类对象被销毁时自动调用，该方法不携带任何参数并
且不返回值，对是否需要公开没有任何要求。
注意： 本方法在火山安卓平台中不被支持，因此下面演示火山视
窗平台。
如果你想在对象被销毁的时候清理一些数据，可以在此方法下操
作, 如下图所示：

--- 第 156 页 ---
提示: “ 类_ 初始化 ” 和“ 类_ 清理 ” 方法在火山中可以通过按下 “Ctrl+I”
组合键调用对应对话框自动插入对应空方法，或者直接使用
“Ctrl+M” 新建方法后手动填写方法名。


--- 第 157 页 ---
(3) 注意事项
注意：在同一个类中方法名称不允许重复，如下图所示是错误的。
但是有一个情况是例外的，读写属性方法名可以重复，但是也只能重
复一次，如下图所示：
6.2 定义通常方法
如下图所示，即表示定义了一个通常方法：
新建一个类，在类中新建一个方法，并且方法的类别选择 “ 通常 ” ，所
定义出来的方法就叫通常方法。


--- 第 158 页 ---
调用通常方法代码如下图：
1. 在外部其他类中调用这个方法首先需要公开此方法。
2. 调用方法的时候需要定义变量，例如：在窗口被首次激活的时候
定义“ 测试类 ” 变量并调用这个方法。
运行结果如下图：
最终按下 F5 键当程序窗口出现后，会显示一个信息框，证明通常方
法被调用成功。

--- 第 159 页 ---
6.3 方法的参数与数据传递
在火山平台中所有方法类型都可以添加多个参数，进行数据的传递操作。
注：读属性方法不支持填写参数，写属性方法可提供一个参数。
6.3.1 参数的添加
光标定位 “ 返回值类型 ” 一栏，按下 “Enter” ( 回车键 ) 即可实现参数的
添加。
也可以右键菜单 “ 插入  -> 插入新参数 ” 或使用组合快捷键 “Ctrl+R” 进
行添加参数。

--- 第 160 页 ---
6.3.2 参数的结构
如下图示，参数结构为参数名、类型、属性名、属性值和备注信息。
其中“ 参数名 ” 和“ 类型 ” 为必填项，属性和备注可根据自己的需求决定
是否填写。
6.3.3 参数的数据传递
在火山中的参数的数据传递大致以下几种方式：
(1) 立即数值传递；
(2) 对象传递；
(3) 文本型的参考传递
1. 立即数值传递
代码编写如下图：
(1) 给通常方法增加两个参数，并将两个参数进行结合起来显示
在信息框中。

--- 第 161 页 ---
(2) 在主窗口被创建完毕后，调用此方法并传递两个文本立即数
过去。
运行效果如下图：
最终可看到两个提供的文本立即数被结合起来显示在了信息框
中，证明参数传递成功。
这就是立即数值的数据传递，传递后直接使用即可。
2. 对象传递
代码编写如下图：
(1) 首先定义一个 “ 测试类 ” ，用来模拟一个对象数据。
(2) 定义一个通常方法，插入一个测试类参数，并在方法中取出
参数数据。
(3) 在窗口创建完毕后调用这个通常方法，实现对象数据传递。

--- 第 162 页 ---
运行效果如下图：
最终可以看到信息框中会显示对象中存储的文本数据，证明对
象数据传递成功。
当使用对象传递数据时，会自动进行参考传递，即参数会拥有原
数据的内存地址，从而可以通过参数来返回数据。对象的参考传
递在火山安卓和火山视窗中均适用。
如下图所示：
(1) 在通常方法中修改参数数据。

--- 第 163 页 ---
(2) 在窗口创建完毕下，调用通常方法传递测试类对象，并在此
方法后取出对象中的数据。
运行效果如下图：
最终可以看到信息框中会显示参数设置的数据，证明数据传递
成功。
3. 文本型的参考传递
在火山视窗平台中除文本型外，其它基本数据类型都不支持参考
传递。
注：在火山安卓平台中，所有基本数据类型都不支持参考传递。

--- 第 164 页 ---
下面来演示一下文本型的参考传递，代码编写如下图：
(1) 在通常方法中修改文本型参数数据。
(2) 在窗口创建完毕下，定义一个文本型变量，经过参数传递
后，取出变量中的数据。
运行效果如下图：
最终可以看到信息框中会显示经过参数修改的数据，证明文本
型可以进行参考传递。
6.3.4 参数的默认值属性
提供了 “@ 默认值 ” 属性后，证明此参数可以在调用的时候被省略，火
山会自动处理 “ 属性值 ” 为参数数据进行传递。
注意：如果参数类型为实例对象，则 “@ 默认值 ” 属性的属性值只能为
“ 空对象 ” 。
代码编写如下图：

--- 第 165 页 ---
1. 给通常方法增加两个参数，并将两个参数进行结合起来显示在
信息框中，给其中一个参数设置默认值。
2. 在主窗口被激活后，调用此方法忽略 “ 参数 1” 只给“ 参数 2” 传递
文本数据。
运行效果如下图：
最终可看到 “ 默认值 ” 也显示在了信息框中，证明默认值设置成
功。

--- 第 166 页 ---
6.4 方法的返回值
方法是一个独立完成某个功能的程序块，在需要返回值的时候可以提供
返回值进行操作，如果不需要也可以不提供。
如果方法需要返回值，则需要在方法的 “ 返回值类型 ” 一栏进行填写即
可，如下图所示返回一个整数类型。
如果该方法提供了返回值类型，则必须使用 “ 返回 ()” 方法返回对应的类
型数据。
如下图所示，返回值类型为整数，就必须返回一个整数类型，可以提供
变量，常量或者立即数，只要是整数类型就可以。

--- 第 167 页 ---
不提供返回值或者返回值类型不匹配都是错误的，如下图：
返回值是对象则需要返回对应对象实例，如下图：
如下图所示，如果返回值为父类，则可以提供对应的子类实例对象。

--- 第 168 页 ---
6.5 方法的嵌套调用
方法与方法之间的交互是通过参数和返回值来联系的，一个方法可以有
多个参数，参数值除了提供变量、常量、立即数外，如果指定方法有返
回值并且和方法参数类型匹配也可以把方法作为参数写入。
如下图所示：

--- 第 169 页 ---
运行结果如下图：

--- 第 170 页 ---
6.6 方法的递归调用
方法的调用一般情况下都是一个方法调用另外一个方法，如果方法自己
调用自己这种情况被称为递归调用，又称递归算法。需要注意的是，使
用递归算法时，必须要保证有一个结束条件，否则会陷入死循环中，导
致程序卡死闪退等问题。
例如：数学运算中的求阶乘问题就可以利用递归算法实现，下面来实现
一个简单的求阶乘的递归算法。
(1) 定义一个求阶乘的方法，提供一个要计算阶乘的正整数参数以及
长整数返回值。
(2) 在方法的语句内首先对参数进行判断是否大于 0 ，满足条件后在
进行递归调用，否则程序会陷入死循环导致软件异常卡死等问题。
(3) 满足条件后进行乘法计算，乘数为方法参数，被乘数为方法本
身，这样就满足了递归调用。
(4) 如果没有满足条件就让方法返回 1 ，方便最后与正整数参数相乘
得出最终结果。


--- 第 171 页 ---
在窗口被首次激活时调用一下这个方法，来计算一下 5 的阶乘。
最终成功拿到了计算结果，以上就是一个简单的递归算法实现的全部
过程。
 
6.7 定义静态方法
(1) 静态方法与通常方法的区别在于，设置静态方法后，可以省去定义
变量取调用方法的步骤，静态方法只需要通过 “ 类名 + 方法名 ” 的形式就
可以调用。
如下图所示：
凡是勾选静态的方法，都可以称呼为静态方法。

--- 第 172 页 ---
(2) 在静态方法内部，只能访问其所处类或者其所处类的基础类中的成
员常量或者静态成员变量。
如下图所示：
6.8 定义  支持以动态格式调用的静态方法
本方法其实也是静态方法的一种，如果静态方法所定义的第一个参数是
类本身，那么这样的方法就可以称为是 “ 支持以动态格式调用的静态方
法” 。
本方法有两种调用形式，既可以通过类名去访问这个方法，又可以定义
变量访问这个方法。
如下图所示：
在“ 测试类 ” 中定义了一个名为 “ 动态方法 ” 的静态方法，第一个参数提
供了“ 测试类 ” 自身，那么在程序中调用这个方法时，就会有两种形
式。
(1) 第一种方式是标准的静态方法访问方式。

--- 第 173 页 ---
(2) 第二种就是优化后的方式，其第一个参数被移动到方法访问对象
上，这种方式在编译时将被自动转换为第一种方式。
6.9 定义属性
在火山中的属性大致分为三个类别：可读属性，可写属性，可读写属
性。可读写属性又分为方法属性和变量属性。
6.9.1 定义可读属性
读属性用于读取当前类中的某些数据值进行返回，其格式必须满足以
下条件：
(1) 插入的方法必须公开，且类别需要选择 “ 属性读 ” 。
(2) 不能为静态方法 ( 实际上静态方法也可以用作定义属性，通常情况
下用不到，知道即可 ) 。
(3) 不可以提供参数。
(4) 必须提供一个返回值。
如下图所示，在 “ 测试类 ” 中定义了一个返回值为 “ 文本型 ” 的读属性方
法，并返回了一个成员变量。

--- 第 174 页 ---
需要注意的是 “ 属性读 ” 虽然是以方法的形式定义，但是在调用这个属
性的时候不能使用 “ 变量 1. 属性读 ()” 的形式访问，正确的访问如下图
所示，不需要提供括号。
6.9.2 定义可写属性
写属性用于设置当前类中的某些数据，其格式必须满足以下条件：
(1) 插入的方法必须公开，且类别需要选择 “ 属性写 ” 。
(2) 不能为静态方法 ( 实际上静态方法也可以用作定义属性，普通用户
无需掌握，知道即可 ) 。
(3) 必须提供一个参数，提供的这个参数被称为属性值。
(4) 不允许提供返回值。
如下图所示，在 “ 测试类 ” 中定义了一个属性值为 “ 文本型 ” 的写属性方
法，并将属性值赋值给了一个成员变量。


--- 第 175 页 ---
虽然“ 属性写 ” 也是以方法来定义，但是在调用这个属性的时候不
能使用 “ 变量 1. 属性写 ()” 的形式访问，正确的访问如下图所示，属
性名和属性值之间用等于号连接。
除上述访问方式外，写属性还可以直接在属性表中访问，如下图
所示：
写属性除了直接提供对应值外还支持备选列表，通过备选列表设置常
用属性值。
视窗平台设置如下图所示，在方法的属性栏使用 “@ 列表选择项 ”
属性值可打开编辑器进行设置。
多条备选值用换行分隔，如果属性值为文本型注意需要提供英文
状态下的双引号。

--- 第 176 页 ---
最终设置完成后如下所示，会自动添加 \r\n 换行，双引号也会自动
转义。
如果在安卓平台下，设置完成后会自动使用 \n 分隔。
无论是安卓还是视窗，最终在使用时效果是一样的，可以通过下
拉列表选择属性值，如下图所示：

--- 第 177 页 ---
属性表中的备选列表，除了上述的备选列表形式外，还支持 “ 常量类 ”
形式的备选列表。
“ 常量类 ” 与“@ 列表选择项 ” 不同之处在于，常量类的内容是固定的，
一旦设置常量类将不支持自定义内容（只能去常量类扩充，但软件需
要重新编译），而 “@ 列表选择项 ” 不受此限制。
常量类的定义如下图所示：
注：当前类设置 “@ 常量类 ” 属性后，当前类中只能提供常量，不
可以提供变量、方法。
常量类的使用：
(1) 写属性中使用常量类也很简单，首先需要将参数类型设置成对
应的常量类的类名。
(2) 然后通过参数名来判断是否为指定常量，从而进行相应的代码
操作。


--- 第 178 页 ---
(3) 调用本属性的时候就可以在属性栏下拉选择，如果通过代码设
置就需要通过 “ 类名 + 常量名 ” 的形式设置。
6.9.1 定义可读写属性
可读写属性分为 “ 方法读写属性 ” 和“ 变量读写属性 ” ，这两个的不同之
处在于，方法属性可以在方法中编写代码，对属性值进行一些其它操
作，而变量属性不支持。
(1) 方法读写属性
方法读写属性其实就是将 “ 属性写 ” 和“ 属性读 ” 两个方法配合使
用，从而实现同一个属性名既可以读又可以写的效果。
如下图所示，当读写属性配套使用时，方法名可以一致。
注意： 读写属性配套使用时，两者的名称必须完全一致，而且
读属性方法的返回值数据类型必须与写属性方法的参数数据类
型一致，如下图所示的写法是错误的：

--- 第 179 页 ---
只要读写属性按照规范编写，就可以如下图所示进行调用：
(1) 在窗口被首次激活时定义 “ 测试类 ” 变量。
(2) 定义后就可以在属性表中调用 “ 属性方法 ” 写属性用于设置属
性值。
(3) 写属性设置后就可以通过同名读属性取出设置的属性值。
当程序运行后，设置的属性内容可以被成功读取。

--- 第 180 页 ---
(2) 变量属性
变量属性即通过成员变量来当属性使用，如下图所示，只要在成
员变量的属性表中设置 “@ 属性变量 ” 属性值设置为 “ 真” ，就可以
在此类变量的属性表中使用这个成员变量设置数据。
当程序运行后，设置的属性内容可以被成功读取。

--- 第 181 页 ---
6.10 定义事件方法
事件方法是用来对外发送通知时使用。
例如：用作 “ 按钮 ” 的类在用户单击按钮时会向外部发送 “ 被单击 ” 事件，
用作“ 时钟 ” 的类会向外部定时发送 “ 时钟周期 ” 事件等等。
6.10.1  定义事件需要满足以下条件：
(1) 插入的方法 “ 类别 ” 必须设置为 “ 定义事件 ” 。
(2) 访问权限必须为公开。
(3) 不允许设置静态。
(4) 必须填写返回值，并且返回值只能是整数。
(5) 方法内不允许有任何代码。
(6) 事件方法的参数没有要求，根据自己的需求决定是否提供。
如下图所示，在 “ 测试类 ” 中定义了一个名为 “ 测试事件 ” 的事件。因为
事件不能平白无故触发，必须要有一个条件，因此这里还定义了一个
“ 触发事件 ” 的通常方法来调用这个事件。

--- 第 182 页 ---
6.10.2  自定义事件的调用与触发：
以火山视窗为例，在窗口类中定义 “ 测试类 ” 的成员变量，光标定位
“ 类型 ” 会出现一个小按钮，点击可出现事件列表选择后可添加添加
“ 测试事件 ” 的事件接收方法。
如下图所示，为对应 “ 接收事件 ” 添加完成后的效果。


--- 第 183 页 ---
当然也可以通过手动插入方法实现 “ 接收事件 ” 方法，只要满足以下要
求：
(1) 方法名必须为 “ 类名 _ 事件方法名字 ” 。
(2) 类别选择 “ 接收事件 ” 。
(3) 方法不允许设置静态。
(4) 返回值类型固定为整数
(5) 方法的第一个参数必须为固定的 “ 来源对象 ” 参数，其数据类型
为发送事件的类，用作提供具体是哪个对象发送过来的事件。
(6) 方法的第二个参数必须为固定的 “ 标记值 ” 参数，其数据类型为
整数，用作动态挂接事件时使用。
(7) 方法后续的参数表必须和 “ 事件定义方法 ” 的参数表一致，用于
获取传递过来的参数数据。
(8) 最后方法的返回值将被传递回在事件定义方法所处类中调用该
事件定义方法的调用方（如上述 6.10.1  所示，会传递给 “ 触发事
件” 方法中的 “ 测试事件 ” 的调用方）。
事件都是存在触发条件的，因此还需要如下图所示，手动调用 “ 变量
1. 触发事件 ()” 方法，才会触发 “ 测试类 _ 测试事件 ” 方法。
需要注意的是，由于同一类的同一事件均被发送到同一个事件接收方
法，因此需要使用 “ 来源对象 ” 和“ 标记值 ” 两个参数进行区分。
如下：利用 “ 来源对象 ” 参数来区分事件。

--- 第 184 页 ---
通过“ 标记值 ” 参数判断通常用于，对象是局部变量的情况，不过
因在火山视窗中局部变量用完会立刻释放导致事件无法触发，因
此在火山视窗中如果该对象存在事件则不建议设置为局部变量。
如下所示为火山安卓平台中，利用 “ 标记值 ” 来区分事件来源，需
要使用 “ 挂接事件 ()” 方法。
6.11 定义全局静态方法

--- 第 185 页 ---
所谓全局静态方法就是，此方法调用的时候不需要输入类名，也不用定
义类变量，直接输入方法名即可调用，并且可以无视包名，可以随意的
跨包调用。
定义方法如下图所示：
(1) 在方法所处类的属性栏设置 “@ 全局类 ” ，属性值设置为 “ 真” 。
(2) 插入的方法需要同时勾选公开和静态，对于返回值类型和参数表
没有特殊要求，根据自己的需求填写即可。
定义完成后，就可以在火山程序的任何方法下调用（定义事件方法除
外），如下图所示：


--- 第 186 页 ---
6.12 定义虚拟方法
6.12.1 什么是虚拟方法？
如果在火山中，某个类中的某个方法不能满足使用需求，但是我们又
不想重新定义一个方法来操作，这个时候就可以利用火山的 “ 虚拟方
法” 来实现对这个方法进行重写，这样的重写操作在火山中就称为虚
拟方法。
例如：一家销售公司每个人都有底薪 2000 元，每个人的业绩不同提
成也不同最终得到的工资也不是不同的。那么这个底薪 2000 元就可
以理解为是虚拟方法，员工 A 和员工 B 的提成不同，只需要重写这个
2000 元底薪加上各自的销售业绩就是实际工资，不需要额外建立员
工A 方法和员工 B 方法来单独计算。
6.12.2 虚拟方法的定义和调用
(1) 虚拟方法的定义
定义虚拟方法很简单，只需要在一个通常方法的属性名上填写 “@
虚拟方法 ” 属性值提供 “ 可覆盖 ” 即可。
(2) 虚拟方法的调用
光标定位类名会出现一个按钮，点击可添加基础类的虚拟方法。
添加完成后如下图所示：


--- 第 187 页 ---
6.12.3 虚拟方法实例
下面以火山视窗为例实现一个简单的虚拟方法的实际应用案例：
(1) 假设有一家销售公司，他们公司的工资都是底薪 + 提成的形式，
因此可以首先定义一个 “ 基本工资类 ” 并新增一个虚拟方法，将实际工
资计算出来并返回。
(2) 但是某些员工是新员工，假设为 “ 员工 A” ，他的工资需要在原薪
资的结构上单独计算，因此需要继承一下 “ 基本工资类 ” 并添加 “ 基本
工资” 虚拟方法。
(3) 假设财务忘记扣税，那么此时可以在此方法下重写本方法进行扣
税，并返回扣税后的薪资。也可以进行其它操作，譬如员工迟到从提
成里面扣除一些工资，这个就需要根据自己的需求来编写代码。
(4) 假设有一个十年的老员工，为 “ 员工 B” ，老员工的提成为双倍提
成，就可以在 “ 基本工资 ” 的虚拟方法下重写工资计算公式。

--- 第 188 页 ---
(5) 最后在窗口中插入一个 “ 工资计算 ” 方法用于计算最终工资，参数
提供“ 基本工资类 ” 和“ 提成 ” ，并返回实际工资。
(6) 在主窗口创建完毕事件下，对员工 A 、 B 的工资进行计算，因为
“ 员工 A 、 B” 都继承了基本工资类，因此其对象实例可以填写到 “ 工资
计算” 方法中。
(7) 最终可以得出两个员工的真正工资。

--- 第 189 页 ---
员工A 的实际工资为： 1000( 底薪 ) + 100( 提成 )-100( 税 ) = 1000 元
员工B 的实际工资为： 1000( 底薪 ) + 100*2( 提成 ) - 100( 税 ) = 1100
元
以上就是火山视窗中虚拟方法的实际应用案例， 安卓虚拟方法例程下
载 ， 视窗虚拟方法例程下载
 
7 、 方 法 语 句
7.1 表达式语句
在火山中所有的非嵌入式语句都可以称为表达式语句，表达式语句只能
在方法中使用，用作提供具体方法的实现代码。
表达式由使用操作符组合在一起的语句单元组成，分为以下几类 :
(1) 一元表达式，如 : - 变量 1 、  ( 长整数 )1
(2) 二元或多元表达式，如 : 变量 1 + 变量 2 、  变量 1 * 123 * 变量 2
(3) 命令或方法调用表达式，如 : 方法 1 (123) 、  如果  ( 变量 1)
(4) 表达式可以嵌套，如 : -( 变量 1 + 变量 2) 、  如果  ( 方法 1( 变量 1) ==
真)
表达式中的语句单元可以是 : 数据类型 / 变量 / 常量 / 参数 / 方法 / 名称类关键
字/ 立即数等。
注意：在火山中的代码语句生成的线条只是样式，并非流程线，火山程
序中只有子语句体的，即 :
(1) 任何程序语句都可以拥有一条或多条下属语句，这些下属语句称
为该语句的子语句体，该语句称为这些下属语句的父语句。
(2) 子语句体可以嵌套，也就是说子语句可以继续拥有子语句体。
如图:

--- 第 190 页 ---
语句行 12-16 是语句行 11 的子语句体 ;
语句行 15-16 是语句行 14 的子语句体 ;
语句行 19-26 是语句行 18 的子语句体 ;
语句行 22-23 是语句行 21 的子语句体 ;
语句行 25-26 是语句行 24 的子语句体 .
在使用虚线标注子语句体的时候，系统对 “ 如果 ” 和“ 否则 ” 语句进
行了特殊处理，将两者的子语句体线连接起来了，这样看起来结
构更清晰一些。
7.2 嵌入式语句
在火山视窗中以 @ 字符开始嵌入的 C++ 代码被称为嵌入式语句，详见 视
窗程序结构展示
在火山安卓中以 @ 字符开始嵌入的 java 代码被称为嵌入式语句，详见 安
卓程序结构展示
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 191 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 192 页 ---
四 、 火 山 软 件 开 发 平 台 中 的 符 号 介 绍
 
 
1 、 操 作 符
1.1 点
点即 〝 . 〞 此符号有两个作用，一是用于建立包 / 类的全名称，二是用来
作为分隔类 / 类对象与其成员名称。
如下图所示：
在输入句点时会激活火山代码提示，可以更方便的访问其成员名称。
1.2 方法符小括号
方法符即 〝 ( ) 〞 ，必须是英文状态下的小括号。其作用是提供调用方
法时所需要的参数表。

--- 第 193 页 ---
注：无论方法是否有参数表，都需要输入括号，如下所示。
1.3 参数分隔符
参数分隔符即 〝 , 〞 ，必须是英文状态下的逗号。本符号用于分隔参数
表中的各个参数。
如下图所示：
“ 通常方法 2” 存在三个参数就需要输入两个逗号。
参数分隔符也是可以省略的，假如最后一个参数存在默认值，如果你不
需要输入这个参数可以省略。
如下图所示：

--- 第 194 页 ---
“ 通常方法 2” 的第三个参数存在默认值，如果调用此方法时，不需要
输入这个参数，可以省略一个逗号的输入。
需要注意的是，如果被调用的方法是 “ 支持以动态格式调用的静态方
法” ，那么参数逗号数量则根据调用方式动态选择。
如下图所示：
通过变量调用需要输入三个参数，通过类名调用需要输入四个参数。
如果你不太确定到底需要输入几个逗号来分隔参数，可以如下图所示：

--- 第 195 页 ---
在方法中输入逗号时，注意观察参数名称的颜色变化，当参数名称颜
色非白色时，证明当前要输入的参数为此参数，从而可以判定要输入
几个逗号。
1.4 数组符号
数组符号即 〝 [] 〞 ，用于表示数组类型。
数组：即相同数据类型变量的一个集合，访问数组内的成员变量时，需
要使用 “ 数组名 [ 下标 ]” 的方式。
如下图所示，表示一个整数数组变量：
下标：即数组成员索引，索引值从 0 开始，有效范围为从 0 到数组成员
数-1 ，分别对应数组的第一个和最后一个成员。
如下图所示：
“ 数组变量 [0]” 最终值将为 “1” ，如果下标提供 1 则此数组变量的最终
值将返回 2 ，以此类推。
下标除了用于访问成员外还可以替换成员，如下所示：

--- 第 196 页 ---
数组符号中还可以提前设置数组成员数量，如下所示：
多维数组定义及赋值：
注：在火山视窗暂不支持参数和返回值使用数组。
1.5 注释符
注释符即 〝 // 〞 用于表达注释信息，注释后的代码在程序编译发布版时
不会被编译到程序中。它可用于类名、变量、常量、方法名、参数和方
法语句的注释。
如下图所示：

--- 第 197 页 ---
1.6 双引号
双引号即  〝 ”” 〞 ，必须是英文状态下的双引号。用于表达 字符串立即
数 ，可用于变量、常量的初始值以及变量的赋值中。
如下图所示：
字符串立即数中也支持 转义符 操作。
1.7 单引号
单引号即  〝 ” 〞 ，用于表达字符立即数，可用于变量、常量的初始值
以及变量的赋值中。
如下图所示：
字符立即数中支持 转义符 操作。

--- 第 198 页 ---
1.8 转义符
转义符即 〝 \ 〞 ，用于 转义文本 操作，例如： “\r\n”  用来表示常见的那
些不能显示的字符。
如下图所示：
字符串立即数表达需要使用英文状态下的双引号，如果需要在字符串
立即数中表达同样的双引号文本就需要进行转义操作，便于程序编译
器识别信息。
转义字符表：
转义符 解释
\b 退格符
\f 换页符
\r 回车符
\n 换行符
\t 水平制表符
' 单引号
" 双引号
\ 反斜杠
\x 后跟1-3 个十六进制字符 , 为所对应字符的代码值 .
 
2 、 运 算 符
2.1 四则运算符
四则运算符即 加(+) 、 减(-) 、 乘(*) 、 除(/) ，这四个符号和数学运算一致，
支持混合运算，并且也会按照数学运算规则：先算乘除后算加减，先算
括号内后算括号外。
在火山平台中只要是 数值类型 的数据都可以进行运算。
如下所示：

--- 第 199 页 ---
最终结果：
在上述计算中，最终值应当为 3 * 3 / 2 = 4.5 ，但是为什么显示为 4
呢？这是因为在火山平台中，其最终的计算结果数据类型由表达式中
参与运算的各个数值的最大精度决定，譬如计算过程中所有数值均为
整数，则最终结果值也将被剪切到整数 ( 不管计算结果是否存在小
数) ，如果表达式中存在一个是小数类型，则最终结果值将为小数。
因此上述计算公式想要得到正确的结果，只需要将其中任意一个数值
声明小数即可。
声明方式有两种分别如下：
可以直接将某个数值改成小数类型。
如果为整数变量，可以采取强制转换的方式，强制转换成小数。

--- 第 200 页 ---
最终正确结果如下：
对于加号符，除了进行数学运算外，还可以用于连接文本数据，如下所
示：
最终结果：

--- 第 201 页 ---
注： 除文本和 数值类型 数据外，其它类型均不支持相加。
2.2 取反运算符
算术取反操作符即 〝 - 〞 ，用作返回将指定数值进行符号翻转后的结
果值。
如下图所示：
2.3 强制类型转换符
强制类型转换符即 〝 () 〞 ，用作将数据强行转换到所指定的数据类
型。
调用格式为 : ( 欲强行转换到的数据类型 ) 欲转换类型的数据。
允许以下数据类型之间进行强制转换：
(1) “ 空对象 ” 可以强制转换到任何非常量类的类数据类型或文本
型：
(2) 数值数据类型之间可以强行转换。
注意: 当从容量大的数值数据类型强制转换到容量小的数值数据
类型时，其中数值精度将会存在被丢失的风险。譬如，将小数
数值强行转换到整数数值将丢失所有小数点后面的数值部分。

--- 第 202 页 ---
(3) 常量类可以强制转换到其所对应的基本数据类型 ( 普通用户知道
一下即可 , 无需过多了解 ) 。
(4) 类数据类型只能强制转换到其直接 / 间接基础类或继承类。
注意: 用户必须确保对象实例的运行时数据类型匹配该被强行转
换到的数据类型，否则将导致程序运行时出错。
2.4 求余运算符
求余运算符即 〝 % 〞 ，用于用于取出一个数和另一个数相除的余
数。
如下所示： 5 % 4 = 1

--- 第 203 页 ---
2.5 关系运算符且
且即 〝 && 〞 ，用于并且逻辑操作，当左侧参数和右侧参数均为逻辑
值真时，最终整个表达式的结果返回真。
如下图所示：
上述例子的最终运行结果并不会执行信息框，因变量 1 不等于 100
并且变量 2 也不等于 20 。
输入字：
除了直接输入字符外，还可以输入 “qie” 来输入此符号。

--- 第 204 页 ---
2.6 关系运算符或
或即 〝 || 〞 ，用于或者逻辑操作，当左侧参数或右侧参数其中任意
一个的逻辑值为真，最终整个表达式的结果返回真。
如下图所示：
上述例子的最终运行结果并不会执行信息框，因变量 1 不等于 100
也不等于 20 。
输入字：
除了直接输入字符外，还可以输入 “huo” 来输入此符号。
2.7 关系运算符小于等于
小于等于即 〝 <= 〞 ，当左侧参数小于等于右侧参数时返回真。
如下图所示：

--- 第 205 页 ---
上述例子的最终运行结果会执行信息框，因变量 1 默认值为 0 ，满
足小于等于 100 的条件。
2.8 关系运算符大于等于
大于等于即 〝 >= 〞 ，当左侧参数大于等于右侧参数时返回真。
如下图所示：
上述例子的最终运行结果不会执行信息框，因变量 1 默认值为 0 ，
不满足大于等于 100 的条件。
2.9 关系运算符小于
小于即 〝 < 〞 ，当左侧参数小于右侧参数时返回真。
如下图所示：

--- 第 206 页 ---
上述例子的最终运行结果会执行信息框，因变量 1 默认值为 0 ，满
足小于 100 的条件。
2.10 关系运算符大于
大于即 〝 > 〞 ，当左侧参数大于右侧参数时返回真。
如下图所示：
上述例子的最终运行结果不会执行信息框，因变量 1 默认值为 0 ，
不满足大于 100 的条件。
2.11 关系运算符不等号
不等号即 〝 != 〞 ，当左侧参数不等于右侧参数时返回真。
注意：
(1) 对于数组对象，唯一能够与其进行比较的是 “ 空对象 ” ；
(2) 对于文本数据，将比较两者实际文本内容是否相同 ( 区分字母大
小写) ，也可以将文本数据与 “ 空对象 ” 进行比较；

--- 第 207 页 ---
(3) 类对象比较仅比较两者是否指向同一个对象实例，而不会去对
比两者所指向对象实例中存放的数据内容是否相同 ( 火山安卓平台
比较两个对象是否参考到同一对象实例，火山视窗平台比较两个
对象的所处内存地址是否相同 ) 。
在火山视窗平台中：
(1) 如欲比较两个对象的数据内容是否相同，可以使用系统类库
中所提供的 “ 对象内容是否相同 ()” 全局静态方法；
(2) “ 字节集类 ” 是一个特例，该类的对象之间进行比较将比较两
者的实际数据内容是否相同。
如下图所示：
2.12 关系运算符双等号
双等号即 〝 == 〞 ，用于比较左侧参数与右侧参数是否相等。其使用
方式和注意事项与 “ 不等号 ” 相同，将上述图中的 “!=” 换成“==” 即
可。
2.13 赋值运算符
赋值符即 〝 = 〞 ，用于将右侧的参数值赋予给左侧参数内容，可用
于变量、写属性等。

--- 第 208 页 ---
如下图所示：
 
 
[ 上一章 ]    [ 下一章 ]
 
 

--- 第 209 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 210 页 ---
五 、 火 山 软 件 开 发 平 台 数 据 类 型 介 绍
 
 
1 、 数 据 类 型
1.1 了解数据类型
数据：是指能够输入到计算机中，并能够被计算机识别和加工处理
的符号的集合，是程序处理的最小对象。如： 数值、字符、图像 和 声音
等都是数据。数据在程序中通常以 变量 或 常量 的方式被引用，不同的数
据特点有不同的存储要求和处理方法。
在火山中数据类型可以分为两种：基本数据类型和对象类。
基本数据类型共有 10 种：  字节 、 短整数 、 整数 、 长整数 、 变整
数 、 小数 、 逻辑型 、 字符 、 文本型 、
其中 字节、短整数、字符、整数、长整数、小数、变整数 这七种类
型又统称为数值数据类型。
数值数据类型按照所能容纳数值范围的大小 ( 也称为精度 ) 从小到大
顺序排列为： 字节 < 短整数  < 字符  < 整数  < 长整数  < 小数
注：精度小的数值类型在需要时可以被自动转换为精度大的数值类
型，而精度大的数值类型必须使用 “ 强制转换 ” 操作符才能转换为精度小
的数值类型。
如下图所示：
对象类： 在火山中是所有类的最基础类 ( 父类 ) 。
1.2 数据类型的使用
1.2.1 使用方式
数据类型可以在类定义表的 “ 基础类 ” 中使用，也可以在变量、常量、
参数定义表的 “ 类型 ” 中和方法中的 “ 返回值类型 ” 一栏中使用，如下图
所示：
类型在填写时有以下注意事项：
1. 基础类中不允许提供基本数据类型。
2. 常量的类型只能为基本数据类型。

--- 第 211 页 ---
1.2.2 基本数据类型的输入字
在火山中基本数据类型除了使用全拼、首拼进行输入外，还提供了额
外的输入字，如下所示：
字节： sbyte ；
短整数： short ；
字符： wchar ；
整数： int ；
变整数： vint ；
长整数： long ；
小数： double ；
逻辑型： bool ；
文本型： string 。
如文本型的 “string” 输入“st” 就可以将文本型提示出来。
 
2 、 基 本 数 据 类 型
2.1 字节
字节( 有符号 ) 是二进制数据的单位，在火山中基本数据类型之一，有效
值范围从 -128 到 127 ，占用 1 个字节空间。
如下图所示写法是错误的：

--- 第 212 页 ---
如果按照上图所写进行调试程序，最终会在火山输出栏提示如下错
误：
2.2 短整数
短整数 用于表达较短的整数值，有效值范围从 -32768 到 32767 ，占用 2
个字节空间。
如果想要让短整数转换成整数或长整数，直接赋值即可，如下图：
2.3 整数
整数 的有效值范围从 -2147483648 到 2147483647 ，占用 4 个字节空间。
整数是处理和存储效率最高的数值数据类型，如果所欲处理的数值不包
含小数部分，一般都使用本数据类型。


--- 第 213 页 ---
如果想要让整数转换成短整数需要进行强制转换操作，需要注意整数值
的范围是否在短整数的范围之内，如下图所示：
整数想要转换成长整数，直接赋值即可：
2.4 长整数
长整数 有效值范围从 -9223372036854775808 到
9223372036854775807 ，占用 8 个字节空间。
在软件开发过程中，如果数值超过了整数范围，那就必须使用长整数类
型。如果在你不确定数值范围是否会超过整数，例如：两个较大整数的
相乘，结果可以使用 长整数 类型来表达。
长整数转换成整数或短整数需要进行强制转换，且必须保证在目标类型
的范围值之内，如下图所示：
2.5 变整数
变整数 主要提供给火山视窗平台使用，在编译 64 位程序时等效于长整数
类型，编译 32 位程序时等效于整数类型。在火山安卓平台中固定等效于
整数类型。

--- 第 214 页 ---
通常用作表达地址指针或句柄之类的本地数据，普通用户一般无需使
用。
如下图所示：
在视窗平台中 “ 取窗口句柄 ()” 方法会返回变整数。
然后就可以定义变整数变量，去使用这个类型。
2.6 小数
双精度小数 有效值范围从 2.2250738585072014e-308 到
1.7976931348623158e+308 （最长小数点后 15 位），占用 8 个字节空
间。
小数数值也可以通过强制转换，转换成整数、短整数或长整数，但是会
丢失精度，如下图所示：
将一个初始值为 1.6 小数变量强制转换成整数。

--- 第 215 页 ---
最终可以看到结果为 1 ，小数部分的内容会全部丢失。
2.7 逻辑型
逻辑型 是 逻辑立即数 的基本类型，也就是说有效值为 “ 真” 或“ 假”
在火山中，逻辑值也可以转换为文本格式，不同的平台表现方式不同，
但都是使用 “ 到文本 ()” 进行转换。
2.7.1 火山视窗平台
当逻辑值以文本格式展示时：其中 “1” 表示“ 真” ，“0” 表示“ 假” ，
如下图所示，使用 “ 到文本 ()” 方法转换：
运行结果：

--- 第 216 页 ---
如果想要重新转换为逻辑值，可以使用 “ 文本到逻辑值 ()” 方法转
换。
在“ 文本到逻辑值 ()” 方法的帮助页中可以看到，只要参数提供
“ 真” 、“true” 、“1” 结果值都会返回真，其它任意文本都会返回
假。
因此想要结果返回真，正确的方式就是从如下三个方法中选择
其中一个即可。
2.7.2 火山安卓平台
当逻辑值以文本格式展示时：其中 “true” 表示“ 真” ，“false” 表示
“ 假” ，如下图所示，使用 “ 到文本 ()” 方法转换：

--- 第 217 页 ---
运行结果：
如果想要重新转换为逻辑值，使用 “ 文本到逻辑值 ()” 方法转换，本
方法只能转换 “true” 为真，其它任意文本都会返回假。
如下图所示：
2.8 字符
宽字符有效值范围从 0 到65535 ，占用 2 个字节空间。字符主要指包括汉
字、英文字母、英文数字、运标点符号等。

--- 第 218 页 ---
在火山中想要表达立即数字符，需要使用单引号 ” 来操作，例
如：‘ 火’ 、‘ 山’ ，字符也支持转义符，譬如 ‘\n’ 。
注：火山平台使用 Unicode-16( 即双字节统一码 ) 字符编码格式。
2.8.1 字符转整数
无论安卓还是视窗，都可以通过强制转换实现将字符转换成对应的整
数值。
(1) 火山安卓平台
代码编写如下图：
运行结果如下图：

--- 第 219 页 ---
(2) 火山视窗平台
代码编写如下图：
运行结果如下图：

--- 第 220 页 ---
无论是视窗还是安卓平台的字符，它们的编码格式都是 Unicode-16
编码格式，因此转换成整数后都是一致的，不会存在任何差异问题。
2.8.2 整数转字符
当字符被转换成整数后，如果想要重新转换成字符也可通过强制转换
进行操作。
(1) 火山安卓平台
代码编写如下图：
运行结果如下图：

--- 第 221 页 ---
(2) 火山视窗平台
代码编写如下图：
运行结果如下图：

--- 第 222 页 ---
2.8.3 文本取字符
如果想要在一串文本中取出指定字符，火山安卓和火山视窗的处理方
案不同，但原理基本一致。
(1) 火山安卓平台
在安卓中处理这个问题需要使用两个方法 “ 文本到字符串 ()” 和“ 取
字符()” 。
帮助文档如下图：
文本到字符串方法可以将文本转换成 “ 字符串类 ” 对象。
转换后的字符串类对象中，会有一个方法叫 “ 取字符 ()” ，通过
此方法就可以将指定索引位置的文本取出转换成字符。
注意：字符位置从 0 开始， 0 代表第一个字符。
代码编写如下图：

--- 第 223 页 ---
因“ 文本到字符串 ()” 方法返回的就是字符串对象，而 “ 取字符 ()”
方法又是字符串类中的方法。
因此可以将这两个方法直接结合起来使用，在代码中调用 “ 文本
到字符串 (). 取字符 ()” 就可以取出文本中指定位置的字符。
运行结果如下图：
最终可以看到指定位置的字符被取出。

--- 第 224 页 ---
(2) 火山视窗平台
在火山视窗平台中就比较简单，直接调用 “ 取字符 ()” 方法就可以取
出一串文本中指定位置的字符。
帮助文档如下图：
方法中提供了两个参数。
参数1 ：用于提供要取字符的文本。
参数2 ：提供索引位置值即可，位置从 0 开始。
代码编写如下图：
直接调用本方法提供对应参数就可以获取指定位置字符。

--- 第 225 页 ---
运行结果如下图：
最终可以看到指定位置的字符被取出。
2.9 文本型
文本型 用作记录一段字符串文本，使用立即数表达时需要在文本的左右
两边使用英文双引号括起来。
如下图所示：
文本型中支持 \n 、\t 等转义符操作，具体可参考 “ 字符串立即数 ” 中的介
绍。
如果需要将数值型数据转换成文本型，可以直接使用 “ 到文本 ()” 方法即
可，重新转换会目标数值型则需要对应的 “ 文本到 XX()” 系列方法。
如下图所示：

--- 第 226 页 ---
2.10 模板类型 1~ 模板类型 8
注意: 本类型普通用户知道即可，无需深入了解。
模板数据类型，只能在模板基础类中使用。
模板数据类型本身并不是真实存在的数据类型，所对应的真实数据类型
需要由模板实现类来提供。
我们举个例子，假设我们需要开发一个数组操作类，用作支持对各种数
组类型进行操作，如果不使用模板类型，那么我们需要写很多类似的
类：
整数数组操作类、小数数组操作类、文本数组操作类等等 ……
而这些类的处理代码是完全一样的 , 唯一不同之处就是其所操作的数据
类型不同，使用模板类型，我们可以把所有代码都放到模板基础类里
面，然后定义对应的模板实现类即可。  如:
这样能大大减少工作量，也能让程序具有更好的可维护性 ( 只需维护一
处即可 ) 。

--- 第 227 页 ---
对于火山普通用户而言，不需要深入了解如何具体定义这些模板类型，
掌握如何使用已有模板类型即可。
假设有下面这段代码：
当你右键单击末语句行上的 “ 插入 ” 方法，然后选择查看其帮助菜单项
后，看到帮助页面中参数部分为以下内容：
你一定会感到困惑， “ 模板类型 1” 和“ 模板类型 2” 所对应的真实数据
类型到底是什么呢？
很简单，请继续单击该 “ 模板类型 1”/“ 模板类型 2” 链接，譬如点击前
者将看到如下页面：

--- 第 228 页 ---
根据“ 变量 1” 的当前数据类型 “ 整数到文本哈希表 ” ，就可以得知，
“ 模板类型 1” 当前所对应的真实数据类型为 “ 整数 ” ，这就是 “ 插入 ” 方
法第一个参数提供的真实数据类型。
利用同样的方法，可以得知 “ 插入 ” 方法的第二个参数的实际类型为
“ 文本型 ” 。
由此可得出如下正确的调用代码：
 
3 、 基 本 数 据 类 型 扩 展 类 与 对 象 类
3.1 字节集类与字节数组
“ 字节集类 ” 和“ 字节 []” 都是“ 字节 ” 基本数据类型的集合，用于表达二进
制数据，不同之处为前者用于火山视窗平台，是火山类库中提供的一个
数据类，后者用于火山安卓平台、是基本数据类型数组。
虽然名称不同，但本质上是一样的，例如将一个文件读入到火山程序
中：
火山安卓平台：

--- 第 229 页 ---
火山视窗平台：
需要注意的是，如果将文本数据转换成二进制数据需要注意文本编码问
题。
火山视窗中使用 “ 文本到字节集 ()” 转换出来的文本编码是 “UTF-16LE”
( 也就是常说的 Unicode 编码，万国码 ) ，火山安卓中使用 “ 文本到字节数
组()” 转换出来的文本编码则是 “UTF-8” 编码。
例如：你的程序需要让安卓平台和视窗平台进行通讯，这个时候就需要
注意文本编码问题，否则可能会乱码，如果没有特殊需求的话，推荐统
一使用 “UTF-8 编码 ” 。
即：
在 火山安卓平台 中，可以使用 “ 文本到字节数组 ()” 或“ 文本到指定编
码字节数组 ()” 转换成 UTF8 编码。
在 火山视窗平台 中，使用 “ 文本到 UTF8()” 方法即可，注意第二个参
数要设置为假。

--- 第 230 页 ---
如果想让火山安卓和视窗统一使用 Unicode 编码，可以如下操作：
在 火山安卓平台 中，可以使用 “ 文本到指定编码字节数组 ()” 转换，第
二个参数提供 “ 文本编码 . 小端 UTF16” 即可和火山视窗平台的默认编
码一致。
在 火山视窗平台 中，直接使用 “ 文本到字节集 ()” 方法即可。
常用字符集编码转换总结：
火山安卓平台：
1. 文本转换成字节数组：
(1) 文本到字节数组  (””) ，将文本转换成 UTF-8 编码的字节数
组。
(2) 文本到指定编码字节数组  (””, 文本编码 .GBK) ，将文本转换
成GBK 编码的字节数组。
(3) 文本到指定编码字节数组  (””, 文本编码 . 小端 UTF16) ，将文
本转换成 Unicode 编码的字节数组。
2. 字节数组转换成文本：
(1) 字节数组到文本  ( 数组内容 ) ，将 UTF-8 编码的字节数组重新
转换成文本。
(2) 指定编码字节数组到文本  ( 数组内容 , 文本编码 .GBK) ，将
GBK 编码的字节数组重新转换成文本，如果编码是 GB2312 ，
ANSI 等多字节编码都可以使用 GBK 进行转换。
(3) 指定编码字节数组到文本  ( 数组内容 , 文本编码 . 小端
UTF16) ，将 Unicode 编码的字节数组重新转换成文本。
火山视窗平台：
1. 文本转换成字节集类：
(1) 文本到 UTF8 (””, 假 ) ，将文本转换成 UTF-8 编码的字节集，
如果要和火山安卓通讯参数 2 要设置为假。
(2) 文本到多字节  (””) ，将文本转换成多字节编码字节集，常见
的GBK ， ANSI 编码等都是多字节编码。

--- 第 231 页 ---
(3) 文本到字节集  (””) ，将文本转换成 Unicode 编码的字节集。
2. 字节集类转换成文本：
(1) UTF8 到文本  ( 字节集内容 ) ，将 UTF-8 编码的字节集重新转
换成文本。
(2) 多字节到文本  ( 字节集内容 ) ，将多字节编码字节集重新转换
成文本。
(3) 字节集到文本  ( 字节集内容 ) ，将 Unicode 编码的字节集重新
转换成文本。
3.2 基本数据类型包装类
所有基本类型包装类如下：
1. 字节类；
2. 短整数类；
3. 整数类；
4. 长整数类；
5. 变整数类 ( 安卓平台无此类型 ) ；
6. 小数类；
7. 字符类；
8. 逻辑型类；
9. 文本型类 ( 视窗平台无此类型 ) ；
这些包装类，在火山安卓平台中主要提供一些常用的基本类型操作方
法，例如 “ 取文本左边 ()” 这个全局静态方法就是 “ 文本型类 ” 中的一个方
法。
在火山视窗平台中，基本数据类型数据不支持以 参考 的方式传递到方法
参数上，从而导致在被调用方法中不能以修改参数值的方式来对外返回

--- 第 232 页 ---
基本数据类型数据。
这些包装类的作用就是为了方便上述操作。
如下所示：
打开“ 整数类 ” 的帮助页，可以看到会存在一个名叫 “ 值” 的成员变量，
而这个变量的类型就是 “ 整数 ” 。
如果你使用的是 “ 长整数类 ” ，那么这个变量的类型就是 长整数 。
“Ctrl+D” 插入一个方法后，设置一个 “ 整数类 ” 的参数并赋值。
在窗口 “ 创建完毕 ” 事件下调用这个方法，定义 “ 整数类 ” 变量并传参，
最后取出整数类中的值。

--- 第 233 页 ---
最终可以看到值被取出，也就间接实现了基本数据类型参数返回数
据。
3.3 对象类
对象类是火山中所有类的最底层基础类，无论是自定义的类，还是火山
系统库中的类，都会继承对象类。
安卓平台和视窗平台不同之处为对象类中的方法不一样，具体可看火山
帮助页中的列出方法名称：
如下所示：
视窗平台：
安卓平台：

--- 第 234 页 ---
如果在实际开发过程中，遇到某个方法的参数是 “ 对象类 ” ，并且没有特
别的注释，就代表这个参数可以提供任意的对象类数据进去。
例如：在火山视窗平台 “ 对象数组类 ” 的“ 加入成员 ()” 方法就需要提供对
象类的数据，本类为最基本的对象类数组。
如下所示：
如果想从对象数组类中取出对象，取出的数据是对象类，需要使用强制
转换操作。
如下所示，必须保证强制转换的类型与添加时的类型一致：
 
 
[ 上一章 ]    [ 下一章 ]
 
 

--- 第 235 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 236 页 ---
六 、 火 山 软 件 开 发 平 台 关 键 字 和 常 用 方 法
 
 
1 、 名 称 关 键 字
1.1 返回
帮助提示如下：
通过“ 返回 ” 的帮助提示可知，调用后当前方法会执行结束，并且会返回
到调用语句处。如果有返回值，则会返回一个值到执行语句处。
也就是如下图所示，当 “ 测试方法 ()” 被“ 返回 ()” 方法返回后，会返回到
当前方法调用的位置，如果此位置定义了变量来接收返回值，则首先会
执行这个赋值操作，然后才会执行下一行的 “ 信息框 ()” 方法。
本方法的参数可以提供任意类型数据，但必须保证能够匹配 “ 返回值类型 ”
一栏中所提供的数据类型。
如下图所示：
如果某方法的没有提供返回值类型，也可以使用 “ 返回 ” ，此时的 “ 返回 ”
不需要输入括号。

--- 第 237 页 ---
一个方法只能拥有一个返回值，如果重复返回多次，则以一次的返回值为
主。
如下图所示：
最终程序运行后可看到返回了 “ 火山 ” 。
如果“ 返回 ” 写到 流程语句 或者 循环语句 中，则流程或循环会提前结束并返
回。
如下图所示：
流程语句：

--- 第 238 页 ---
循环语句：
返回 的额外输入字：
除了使用全、首拼输入外，还可以使用 “return” 来输入。
1.2 属于
本关键字是一种判断关键字，关键字的左侧参数提供实例对象、右侧参数
提供数据类名。用于返回左侧的对象是否为右侧类或者其直接 / 间接继承类
的实例对象。
最终判断结果会返回逻辑型，如果符合返回真，即表示左侧对象能安全转
换到右侧类数据类型。
注意: 左侧对象的数据类型必须为类，而且必须与右侧类之间存在继承 / 被
继承关系或者等于右侧类本身才会符合条件。
如下图所示：
利用“ 属于 ” 来判断 “ 测试 2 对象 ” 是否属于 “ 测试类 1” ，此处必然返回真。
因为“ 测试类 2” 继承了 “ 测试类 1” ，既然继承了测试类 1 ，那么必然存在
测试类 1 ，因此这个属于条件必然是成立的。

--- 第 239 页 ---
最终结果也证明 “ 测试 2 对象 ” 是属于 “ 测试类 1” 的。
除了继承关系相等外，如果类型相等本条件也会返回真。
如下图所示：
用“ 测试 2 对象 ” 和“ 测试类 1” 进行判断，其结果也必然是会返回真，因为
类型是完全一致的。

--- 第 240 页 ---
最终结果也证实了这一点。
全部比较结果如下图：

--- 第 241 页 ---
如果符合条件就可以进行强制转换操作，让左侧对象强制转换为右侧类
型。
如下图所示：
属于 的额外输入字：
除了使用全、首拼输入外，还可以使用 “instanceof” 来输入。

--- 第 242 页 ---
1.3 逻辑值
逻辑值只有 “ 真” 和“ 假” ，主要用于表示 逻辑型 。
例如：上述中的 “ 属于 ” 关键字，其判断结果就是逻辑型，就可以使用真或
假来判断其结果。
使用方式如下，用于变量、常量、赋值以及条件判断操作。
真/ 假 的额外输入字：
除了使用全、首拼输入外， “ 真” 还可以使用 “ture” 来输入， “ 假” 还可以
使用“false” 来输入。
1.4 空对象
用作代表空对象，可以匹配所有非常量类的类数据类型以及文本型。
需要注意的是，当对象实例为空对象时，这个对象将不能进行任何操作。
如下图所示：
假设某个方法提供了一个 “ 测试类 ” 的参数，并且默认值为空对象，此时
如果想要操作这个参数数据，首先需要判断其是否为空对象，然后在执

--- 第 243 页 ---
行相应的方法操作。
空对象除了用于判断之外，还可以用于赋值，传参如下图所示：
空对象 的额外输入字：
可以使用 “null” 输入空对象。
1.5 父对象
用于表示在类成员方法中代表所处类的父类 ( 基础类 ) 对象。
父对象主要是用作当基础类中存在与本类中相同名称的方法 ( 譬如虚拟方
法) 时强制调用基础类的方法。
如下图所示：

--- 第 244 页 ---
也可用于调用父类中的通常方法，如下图所示：
在“ 测试类 2” 的基础类为 “ 测试类 1” ，然后就可以通过 “ 父对象 ” 调用“ 方
法1()” 。
在窗口被创建完毕时调用 “ 测试类 2” 的通常方法。

--- 第 245 页 ---
最终会执行 “ 测试类 1” 中的“ 方法 1” ，并弹出一个信息框。
当然在实际开发过程中， “ 父类 ”( 基础类 ) 的方法支持直接输入调用，可以
省略“ 父对象 ” 的关键词。
如下图所示：
注意: 如果语句所处方法为静态方法，由于此时根本不存在当前类的实例
对象，所以不能使用本关键字。

--- 第 246 页 ---
如下图所示：
父对象 的额外输入字：
可以使用 “super” 输入父对象。
1.6 本对象
本对象表示当前代码语句所处类的对象本身。
如下图所示：
例如，在 “ 测试类 1” 中使用本对象就表示是 “ 测试类 1” 的对象本身。同
理，如果有一个类叫 “ 测试类 2” ，并且在测试类 2 中使用本对象，那么此
时的本对象就表示的是 “ 测试类 2” 的对象本身。


--- 第 247 页 ---
由此可以得出，如果某个方法的参数是当前类对象的时候就可以提供 “ 本
对象” 进行传递参数。
如下图所示：
火山视窗的通用对话框的 “ 打开 ()” 方法，需要提供一个 “ 窗口 ” 对象。
在使用这个方法时，如果当前类是 “ 窗口 ” 或者其基础类是 “ 窗口 ” 时都可
以使用 “ 本对象 ” 进行进行传递参数。
如果在其它类中调用这个 “ 通用对话框 ” 的“ 打开 ()” 方法，就不能使用 “ 本
对象” 进行传递参数。
如下图所示的写法是错误的：

--- 第 248 页 ---
正确的写法如下，可通过传递 “ 窗口 ” 参数来解决，其它类中使用的问
题。
需要注意的是，如果在使用本对象时当前方法是静态方法，则不支持使用
本对象关键字，因为静态方法中不存在当前对象实例。

--- 第 249 页 ---
本对象 的额外输入字：
可以使用 “this” 输入本对象。
 
2 、 方 法 关 键 字
2.1 事件方法
2.1.1 挂接事件
本方法用于动态挂接指定对象的事件，共有两个参数，如下：
参数1 ：提供要挂接的对象名称。
参数2 ：提供整数标记值，当多个类型相同的对象同时挂接时，可以
在事件接收方法的 “ 标记值 ” 参数中获取到此标记，从而用于区分对象
来源。
1. 如何挂接事件？
如果想要指定对象进行 “ 挂接事件 ” 操作，必须满足以下条件：
(1) 其对象必须拥有 “ 事件定义方法 ” 。
如下图所示的 “ 测试类 ” 想要进行挂接事件的写法是错误的，因
为“ 测试类 ” 中并没有任何事件。

--- 第 250 页 ---
(2) 使用本方法后必须添加指定对象的接收事件方法。
如下图所示，使用 “ 挂接事件 ()” 方法后，必须添加 “ 测试类 ” 的
接收事件方法，用于接收事件。
注意：如果存在多个相同数据类型的对象需要挂接事件，可以
通过填写挂接事件的参数 2 ，来判断事件来源。

--- 第 251 页 ---
2. 什么时候需要挂接事件？
安卓平台挂接事件：
(1) 当对象为非参考成员变量时会自动挂接事件，如下图所示：
注意：在使用火山系统库中的某个类时，即使是非参考成员变
量，可能也需要通过某个属性或方法来开启事件，名称中一般
包括“ 支持 / 允许 ” 之类的字样。

--- 第 252 页 ---
如下图所示，轮播图组件需要设置 “ 支持页面改变监听 ” 属性为
真，才可以触发 “ 页面被选择 ” 事件。
(2) 当对象为参考变量时需要挂接事件，如下图所示：
(3) 当对象为局部变量时需要挂接事件，如下图所示：

--- 第 253 页 ---
(4) 当对象事件需要发送到其它类中使用时，需要挂接事件。
如下所示 “ 组件布局类 ” 中的按钮组件事件想要在窗口中触发事
件，就需要进行挂接事件操作。
视窗平台挂接事件：

--- 第 254 页 ---
(1) 当对象为非参考成员变量时会自动挂接事件，如下图所示：
(2) 局部变量不可以进行挂接事件，因为其对象实例会立刻销毁，
因此如果某类中存在事件应定义为成员变量。
(3) 动态创建对象需要手动挂接事件。
如下图所示，动态创建一个按钮时需要挂接事件：
运行后可看到动态创建的按钮也可以正常点击：

--- 第 255 页 ---
(4) 当对象事件需要发送到其它类中使用时，需要挂接事件。
如下所示 “ 组件布局器 ” 中的按钮组件事件想要在窗口中触发事
件，就需要进行挂接事件操作。
2.1.2 取消事件挂接
不再将指定对象所支持的事件挂接到当前类对象中的对应事件接收方法
上。

--- 第 256 页 ---
无论是自动挂接事件的类成员对象变量，还是手动调用挂接事件关键字
挂接的对象，均可以调用本关键字取消其事件挂接。事件挂接一旦取
消，该对象的事件将不会再被接收到，谨慎使用。
如下图所示调用即可取消所有事件：
2.2 运算方法
2.2.1 取反
本方法可对逻辑值进行取反。
如下图 :
本方法只有一个逻辑型参数，如果参数中提供真，则返回值会返
回假，用于取出反转的逻辑值。
如下图进行调用即可：
本方法的参数可以提供逻辑立即数，变量，方法等，只要其数据
类型为逻辑型即可。


--- 第 257 页 ---
2.3 位运算方法
2.3.1 了解位运算
位运算是指对数值进行二进制的逐位运算。我们知道现代电子计算
机内部采用的都是二进制方式存储和处理数据的，输入到计算机的数
组、字母、汉字等信息都以二进制的形式存储。在计算机内部用 “ 比特
(bit)” 这个单位来表示一个二进制，其状态只有 0 或 1 两种，位运算命令
就是直接改变这些 “ 比特 ” 来达到改变数据的效果。想要了解位运算，首
先来需要简单了解一下计算机中的常用进制。
注意：在火山中所有的位运算都是针对 “ 整数 ” 类型操作，而整数的
长度固定为 4 个字节 =32 比特 ( 位 ) ，也就是一组 32 位长度的二进制数。
2.3.2 常用进制
在计算机内部运算中，常用的进制有四种。
(1) 二进制：逢 2 进 1 ，由数字 0 和1 组成，例如： 10101 10 ，数值都限
制在0 和 1 之间。
(2) 八进制：逢 8 进 1 ，由数字 0 到7 组成，例如： 21270 ，数值都限制
在0 到 7 之间。
(3) 十进制：逢 10 进 1 ，有数字 0 到9 组成，例如： 1230569 ，数值都
限制在 0 到 9 之间。
(4) 十六进制：逢 16 进 1 ，有数字 0 到9 和字母 A 到F 组成，例如：
309F7B ，其内容都限制在 0 到 9 和 A 到 F 之间。
所谓二进制就是 “ 逢2 进 1 、借 1 当 2” 为原则，对数值进行计数的进位制。
它和我们日常使用的十进制类似，只不过十进制是 “ 逢10 进 1 、借 1 当
10” 。
进制之间是可以相互转换的，可以使用一些第三方工具来进行操作：
https://tool.lu/hexconvert/
2.3.3 位取反
如下图：
本方法可以将一个整数值的二进制中的每一位进行取反，即 0 变 1 、 1
变0 ，返回反转后的结果值。
示例如下：
对5 进行位取反运算操作。

--- 第 258 页 ---
最终结果返回 -6 。
运算过程解析：
“5” 的二进制表达式为： 0000 0000 0000 0000 0000 0000 0000
0101 。
在执行位取反运算后，返回： 1111 1111 1111 1111 1111 1111
1111 1010 ，但是如果你直接用这个二进制去转换十进制是得不到
“-6” 这个结果的。
那么为什么结果最终是 -6 呢？那么首先需要了解负数的二进制表
达方式。
现在计算机普遍使用补码表示负数。知道一个数的补码，要求其
值的方法是：首先看符号位（最左一位），如果是 1 代表是负数 (-) 如
果是0 代表是正数 (+) ，然后对该值取反再 +1 ，得到其结果值。
例如本例中得到的  1111 1111 1111 1111 1111 1111 1111 1010 ，
其符号位（最左一位）是 1 ，表明它表示的是 负数 ，欲求其结果值，
需先对其取反，然后再加 1 ：0000 0000 0000 0000 0000 0000 0000
0101 + 1 = 0000 0000 0000 0000 0000 0000 0000 01 10 ，然后在得
到的结果值前加一个负号，即 -0000 0000 0000 0000 0000 0000
0000 01 10 = -6 。
由此可以总结出 “ 位取反 ()” 的计算结论是： 位取反 (n)=-(n+1) 。
例如本例中： 位取反 (5) = -(5+1) ，即 位取反 (5) = -6
2.3.4 位与
如下图：
本方法用于将两个整数数据的二进制值中的同比特位进行 “ 与” 运算，
返回运算后的结果值。

--- 第 259 页 ---
与运算： 如果两个数值的共同位均为 1 ，则返回值的对应位也为 1 ，
否则为 0 。
注：对多个整数值进行连续运算可以使用火山系统库中的 “ 连续位与
()” 方法。
例如：
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 0 。
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 0 。
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 0 。
示例如下：
对56 和 89 进行位与运算。
最终结果为 24 。

--- 第 260 页 ---
运算过程解析：
56 和 89 分别转换成二进制为： 0011 1000 和0101 1001 ，进行与的运
算后即会得出结果 0001 1000 转换成十进制即 “24” 。
2.3.5 位或
如下图：
本方法用于将两个整数数据的二进制值进行 “ 或” 运算，返回运算后的
结果值。
或运算： 如果两个数值的共同位中有一个为 1 ，则返回值的对应位也
为1 ，否则为 0 。
注：对多个整数值进行连续计算可以使用火山系统库中的 “ 连续位或
()” 方法。
例如：
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 0 。
示例如下：
对56 和 89 两位十进制整数进行位或运算。

--- 第 261 页 ---
最终结果为 121 。
运算过程解析：
56 和 89 分别转换成二进制为： 0011 1000 和0101 1001 ，进行与的运
算后即会得出结果 0111 1001 转换成十进制即 “121” 。
2.3.6 位异或
如下图：
本方法用于对二进制数值的共同比特位进行 “ 异或 ” 运算，返回运算后
的结果值。
异或运算： 如果两个数值的共同位相等（均为 0 或均为 1 ），则返回
值的对应位就是 0 ，否则为 1 。
注：对多个整数值进行连续计算可以使用火山系统库中的 “ 连续位异
或()” 方法。
例如：
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 0 。

--- 第 262 页 ---
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 1 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 1 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 1 。
一个二进制数的第四位为 0 ，另一个二进制数的第四位为 0 ，则返回
值的第四位为 0 。
示例如下：
对56 和 89 两位十进制整数进行位异或运算。
最终结果为 97 。
运算过程解析：
56 和 89 分别转换成二进制为： 0011 1000 和0101 1001 ，进行与的运
算后即会得出结果 0110 0001 转换成十进制即 “97” 。
如果一个数值连续异或两个相同的数值，将返回该数值本身。如： 连续
位异或  (1, 2, 2)  最终结果会返回最初的值 1 ，利用此特性可以进行简单
的数值加解密操作。
如下图所示：
将数值 2 作为用来 位异或 加密的密钥值，将数值 1 进行 位异或 加密，
在需要解密的时候对加密结果再次进行 位异或 即可恢复原值。

--- 第 263 页 ---
最终恢复原值：
2.3.7 位左移
如下图：
本方法用于将一个整数值的所有二进制比特位向左移动所指定位数，
最右侧使用 0 补位，最左侧被移出的比特位将被抛弃。
例如：
二进制 : 1010 0000 0000 0000 0000 0000 0000 1 111 ，向左移动两
位后返回  1000 0000 0000 0000 0000 0000 001 1 1100 ，最左侧的 10
将被抛弃，最右侧自动补 0 。
示例如下：
对80 十进制整数进行位左移 2 位运算。

--- 第 264 页 ---
最终结果为 320 。
运算过程解析：
80 转换成二进制为： 0101 0000 ，进行位左移两位后即会得出结果
0001 0100 0000 转换成十进制即 “320” 。
2.3.8 位右移
如下图：
本方法用于将一个整数值的所有二进制比特位向右移动所指定位数，
最左侧使用 0 补位，最右侧被移出的比特位将被抛弃。
例如：
二进制 : 1010 0000 0000 0000 0000 0000 0000 1 111 ，向右移动两
位后返回  0010 1000 0000 0000 0000 0000 0000 001 1 ，最左侧将会
补0 ，最右侧将被抛弃两位。
示例如下：
对80 十进制整数进行位右移 2 位运算。

--- 第 265 页 ---
最终结果为 20 。
运算过程解析：
80 转换成二进制为： 0101 0000 ，进行位右移两位后即会得出结果
0001 0100 转换成十进制即 “20” 。
 
3 、 常 用 基 础 方 法
3.1 赋值方法
3.1.1 连续赋值
本方法可用于同时对多个相同类型的变量进行赋值相同内容。
帮助页如下图所示：
参数1 ：可提供任意类型的数据，但必须保证和 参数2 提供的变量
的数据类型相匹配。
参数2 ：提供可写入的变量，该变量的类型必须保证和 参数1 提供
的类型匹配。

--- 第 266 页 ---
如下图进行调用即可：
其调用后的最终结果为， 变量1 和 变量2 同时会赋值 “ 火山 ” 。
3.1.2 连续清零
本方法可用于同时对多个相同数值型的变量进行赋值为 0 ，在火山视
窗中可以将逻辑型赋值为假（安卓中不支持逻辑型）。
本方法只提供了一个可扩展参数，直接提供要清零的变量即可。
火山安卓调用如下图：
直接提供要清零的数值类型的变量即可。

--- 第 267 页 ---
火山视窗调用如下图：
在火山视窗中支持逻辑型，逻辑值最终会设置为假。
3.1.3 连续清空
本方法可用于同时对多个文本型的变量进行赋值为空文本。
帮助页如下图所示：
本方法只有一个可扩展的文本型参数，用于清空所有的文本型变
量。
如下图进行调用即可：
其调用后的最终结果为，三个变量都会设置为空文本。

--- 第 268 页 ---
3.2 运算方法
3.2.1 选择
本方法又称为三目运算，其作用是根据 参数1 提供的逻辑值，从而
决定是返回 参数2 还是返回 参数3 。
帮助页如下图所示：
如果参数 1 提供真，则返回参数 2 ，否则返回参数 3 。
如下图进行调用即可：
示例中的 “ 文本变量 ” 其内容最终为 “ 文本 1” ，因为 “ 选择 ()” 方法
的参数 1 提供的逻辑值为真。
 
 
[ 上一章 ]    [ 下一章 ]
 
 

--- 第 269 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 270 页 ---
七 、 火 山 软 件 开 发 平 台 流 程 控 制 语 句 介 绍
 
 
1 、 概 述
流程控制语句是火山中非常重要的一类命令，可用于控制程序运行路
线，在满足条件时执行一些程序语句，不满足条件时执行另外一些程
序语句。
 
2 、 如 果 语 句
2.1 如果
本命令根据所提供的逻辑参数的值，来决定是否改变程序的执行
位置。如果所提供的逻辑参数值为真，则执行其下属子语句体中
的代码，为假则跳过本命令的子语句体。
在如果语句末尾位置按下回车键，会自动进入其子语句体中，如
下图：
示例：
利用如果语句比较两个整数变量是否相等，如果相等则执行信
息框提示相等，否则就会跳过这个信息框。

--- 第 271 页 ---
最终会显示信息框提示相等。
根据上述演示，还可以实现以下效果：
根据如果语句的判定结果来决定信息框最终显示的内容。


--- 第 272 页 ---
最终信息框的内容会显示 “ 软件 ” ，如果条件不满足，则最终结
果会显示 “ 火山 ” 。
注意：满足条件后执行的代码必须保证是位于子语句体中，如下
图所示是错误的。
可通过右键菜单 “ 块操作  -> 向外缩进 ” ，让要执行的代码重新回
到子语句体中。

--- 第 273 页 ---
2.2 如果否则
如果 语句后面可以跟 否则 语句，当 如果 语句的逻辑参数为 “ 假”
时，将执行 否则 语句的子语句体。
示例如下：
如果 语句后面可以跟多个 否则 语句，可用于判断多种可能的情
况。
使用时需要注意以下几点：
(1) 如果 语句后可以跟 N 个 否则 语句，但 否则 语句不能在 如果 语
句之前。
(2) 一旦其中任意一个语句执行结果为真，将执行其子语句体的
内容，剩余的所有 “ 否则 ” 语句将跳过。
示例如下：

--- 第 274 页 ---
如果判断两个相同的条件，则只会执行首次判断成功的条件。
示例如下：
只会执行第一个满足条件的子语句体，其它条件会跳过。
 
3 、 如 果 真 语 句
本语句同 如果 语句，本语句只能单独使用，无法配合 “ 否则 ” 语句来使
用。
如下图所示：

--- 第 275 页 ---
当满足条件后执行子语句体的内容，否则执行 “ 如果真 ” 语句之外
的其它代码。
 
4 、 分 支 判 断 语 句
4.1 分支判断与分支
用于判断一个整数值与一系列整数值中某个值是否相等。
这其中要判断的整数值位于 “ 分支判断 ” 语句的参数中，而这一系
列整数值则位于 “ 分支 ” 语句的参数中，每个值称为一个分支。
分支判断 帮助如下图：
本语句需要提供一个整数类型的数据，用于 “ 欲判断检查的
值” ，其要判断的值由 “ 分支 ” 语句提供。
注：本方法的子语句体内只能存在 分支 或 默认分支 ，并且至少
包含一个。

--- 第 276 页 ---
分支 帮助如下图：
本语句只能位于 “ 分支判断 ” 的子语句体内，用于检查 “ 分支判
断” 参数中提供的整数数据，是否等于本语句中的参数值。
如果相等，将去执行本语句的子语句体中的代码，并跳过后续
所有其它判断检查分支，否则将跳过本语句的子语句体转去检
查后续的下一分支是否满足要求。
注：本语句的参数只能提供立即数或常量。
示例如下：

--- 第 277 页 ---
(1) 分支判断 语句提供欲判断检查的值。
(2) 分支 语句提供欲检查是否相等的值。
如果分支判断语句的值和某个分支中的值相等，则执行对应分
支子语句体的代码。
上图中的 “ 变量 ” 的值为 1 ，则最终结果会弹出 “ 满足条件 1” 的信
息框。
4.2 默认分支
本语句需要在 “ 分支判断 ” 的子语句体中使用，用于指定 “ 默认分
支” ，如果所有的 “ 分支 ” 都不满足时则执行本语句下的子语句体的
内容。
示例如下：
最终结果会弹出 “ 默认分支 ” 下的信息框，因整数变量的初始值
为0 ，并不满足前两个分支。

--- 第 278 页 ---
4.3 跳出分支
本语句只能在 “ 分支 ” 或 “ 默认分支 ” 的直接 / 间接的子语句中使用，用
于跳出整个 “ 分支判断 ” 去执行下一条语句。
示例如下：

--- 第 279 页 ---
 
 
[ 上一章 ]    [ 下一章 ]
 
 

--- 第 280 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 281 页 ---
八 、 火 山 软 件 开 发 平 台 循 环 结 构 语 句 介 绍
 
 
1 、 概 述
如果想要同样的程序语句被执行多次，就需要使用循环结构语句。
在火山中提供了如下循环结构：
(1) 循环
(2) 计次循环
(3) 逆向计次循环
(4) 判断循环首 / 尾
(5) 判断循环
在循环结构执行时，有时需要提前结束循环。
火山提供了如下的循环控制语句：
(1) 跳出循环
(2) 到循环尾
 
2 、 循 环
本语句将利用变量对循环体 ( 本语句的子语句体 ) 内的命令进行循
环执行。
第一次执行此语句时将使用 “ 变量起始值 ” 参数初始化 “ 循环变量 ”
参数所指定的变量，每次 ( 包括第一次 ) 执行到此语句处都将判断循环
变量内的值是否已经到达 “ 变量目标值 ” 参数所指定的值，如已等于或
超过，则跳转到循环体的下一条语句处，否则进入循环体。
本语句共有四个参数，分别如下：
(1) 变量起始值：
定义循环变量的起始数值。
如果被省略， 默认为 0 。
(2) 变量目标值：
定义循环变量的目标数值，在循环首部如果发现 循环变量值 已
到达此目标值时 ( 递增值小于 0 时小于等于目标值，递增值大于 0
时大于等于目标值 ) 将跳出循环而不再进入循环体。
如果被省略， 默认值为 1 。
(3) 循环变量：

--- 第 282 页 ---
本整数型变量将用作控制循环执行次数，在循环尾部将自动递
增或递减该变量内的数值 ( 由 变量递增值 参数决定 ) ，在循环体
中的可以直接取用此变量中的值。
如果被省略，将自动使用内部临时变量。
(4) 变量递增值：
每次执行到循环尾部时都将把此值加入到循环变量中去，此值
可为正数或负数，如为正数则递增，为负数则递减。
如果被省略， 默认值为 1 。
注意: 必须为本参数提供非 0 整数立即值，以便编译器建立循环
结束条件。
实现正向循环计数，示例如下：
循环语句的参数 1 、 4 忽略、参数 2 提供要循环的数量、参数 3 提供
循环变量，然后在其子语句体内利用循环变量实现正向计数。
最终实现从 0 到 9 的计数。


--- 第 283 页 ---
实现逆向循环计数，示例如下：
循环语句的参数 1 提供要循环的数量、参数 2 提供 0 、参数 3 提供循
环变量、参数 4 提供 -1 ，然后在其子语句体内利用循环变量实现逆
向从10 到 1 进行输出。
最终实现了 10 到 1 的逆向计数。
利用其循环变量的特性，还可以实现循环正 / 逆向取出数组成员内
容，如下：
(1) 实现正向遍历数组成员，示例如下：
循环语句的参数 1 、 4 忽略、参数 2 提供数组成员数、参数 3 提供
循环变量，就可实现正向遍历输出数组成员。

--- 第 284 页 ---
最终数组所有成员将被输出到编辑框中显示。
(2) 实现逆向遍历数组成员，示例如下：
循环语句的参数 1 提供数组成员数、参数 2 提供 0 、参数 3 提供循
环变量、参数 4 提供 -1 ，就可实现逆向遍历输出数组成员。

--- 第 285 页 ---
最终数组所有成员将被逆向输出到编辑框中显示。
 
3 、 计 次 循 环
本语句只有一个参数，用于提供子语句体要循环的次数。
本语句相当于 “ 循环 ” 语句的精简版，但只提供正向循环，在本语句的
子语句体内利用 “ 取循环索引 ()” 方法就可以很方便的取出被循环的索
引值。

--- 第 286 页 ---
利用本语句循环 10 次，取出循环索引到编辑框中。
最终循环索引会依次显示在编辑框中。

--- 第 287 页 ---
注： 本语句在 火山安卓 中不支持嵌套使用，如下图所示：
 
4 、 逆 向 计 次 循 环
本语句只有一个参数，用于提供子语句体要循环的次数。
本语句相当于 “ 循环 ” 语句的精简版，但只提供逆向循环，在本语句的
子语句体内利用 “ 取循环索引 ()” 方法就可以很方便的取出被循环的索
引值。

--- 第 288 页 ---
利用本语句逆向循环 10 次，取出循环索引到编辑框中。
最终循环索引会逆向依次显示在编辑框中。


--- 第 289 页 ---
注： 本语句在 火山安卓 中不支持嵌套使用，如下图所示：
 
5 、 取 循 环 索 引
本方法只能用于 “ 计次循环 ” 或“ 逆向计次循环 ” 的子语句体中使用，用
于取出循环索引值。
注1 ： 务必保证本方法位于子语句体内，如下图所示是错误的：
注2 ： 如果有多层循环嵌套，本方法只能取出最近层循环的索引值，
无法取出其它循环层的循环索引。
如下图所示的嵌套循环，其中 “ 取循环索引 ()” 方法取出的索引值为
“ 计次循环 (2)” 的。

--- 第 290 页 ---
 
6 、 循 环 判 断 首 和 循 环 判 断 尾
“ 循环判断首 ” 和“ 循环判断尾 ” 语句必须配套使用，当 “ 循环判断首 ” 被
执行后，首先会执行其子语句体的内容，然后会根据 “ 循环判断尾 ” 所
提供的逻辑参数决定是否继续循环执行，如果参数为真则继续循环执
行，否则跳出循环。
注：因本循环语句的判断条件是在循环语句的尾部，所以本循环在使
用时会至少保证循环一次。
示例：
在本语句的子语句体内对 “ 计数 ” 变量进行累计 +1 ，并输出计数结
果，实现正向计数效果。
最终利用本语句实现了正向计数效果。

--- 第 291 页 ---
同理，也可以实现逆向计数如下所示：
最终实现了逆向计数。

--- 第 292 页 ---
 
7 、 判 断 循 环
本语句是先对其逻辑参数进行判断，根据其结果值（真或假）来决定
是否开始循环，和 “ 循环判断首 / 尾 ” 正好相反。
示例：
在本语句的子语句体内对 “ 计数 ” 变量进行累计 +1 ，并输出计数结
果，实现正向计数效果。
最终利用本语句实现了正向计数效果。

--- 第 293 页 ---
同理，也可以实现逆向计数如下所示：
最终实现了逆向计数。

--- 第 294 页 ---
 
8 、 跳 出 循 环
本命令转移当前程序执行位置到当前所处循环体尾部的下一条语句
处，可用于所有循环语句。
如下图所示，当循环索引为 5 时执行 跳出循环 。
最终循环提前结束。

--- 第 295 页 ---
 
9 、 到 循 环 尾
本命令转移当前程序执行位置到当前所处循环体的尾部。
示例：
因循环体内对 “ 整数变量 ” 进行了一次判断，并执行了一次 “ 到循环
尾” 相当于跳过了一个循环，所以最终会输出 2 、3 。

--- 第 296 页 ---
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 297 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 298 页 ---
九 、 火 山 软 件 开 发 平 台 类 库 方 法 的 识 别 与 调 用
 
 
1 、 概 述
在火山核心库中存在大量的类，每个类都有多个方法，这些方法在火山中
又进行了分类，不同类型的方法其调用方式也不一样。
本节的内容主要利用火山帮助页，正确的识别不同类型的方法，以及如何
正确的使用这些方法，从而快速掌握火山核心库的使用。
火山中的方法分类如下：
1. 通常方法
2. 静态方法
(1) 普通静态方法
(2) 支持动态方式调用的静态方法
(3) 全局静态方法
3. 属性写方法
4. 属性读方法
5. 事件方法
6. 虚拟方法
 
2 、 通 常 方 法 的 识 别 与 调 用
识别：
打开某类的帮助页，如果此类拥有 通常方法 就可以在帮助页中看到 “ 通
常方法 ” 的分类。
如下图所示为 “ 编辑框 ” 组件的部分通常方法：

--- 第 299 页 ---
点击帮助页中的某个方法，也可以在方法的 类别 处看到 “ 通常方法 ” 的关
键字。
调用：
通常方法调用时通常需要通过类对象来访问。
如下图所示，通过编辑框组件的名称，就可以调用当前组件中的通常方
法。
除了这种方式，如果某个方法返回一个类对象，也可以直接通过类对象
来调用，如 : 方法1 ().XX 方法  ()

--- 第 300 页 ---
 
3 、 静 态 方 法
在静态方法中，又分为 “ 普通静态方法 ” 、“ 支持动态格式调用的静态方法 ”
和“ 全局静态方法 ” ，其识别和调用方式均不相同，分别如下：
3.1 普通静态方法的识别与调用
识别：
打开某类的帮助页，如果此类拥有 静态方法 就可以在帮助页中看
到“ 静态方法 ” 的分类。
如下图所示为 “ 加解密类 ” 中的部分静态方法：
点击帮助页中的某个静态方法，也可以在方法的 类别 处看到 “ 静态
方法” 的关键字，访问权限为 “ 公开、静态 ” 。

--- 第 301 页 ---
调用：
静态方法调用时可直接通过类名访问。
如下图所示，通过 “ 加解密类 ” 就可以直接访问 “ 加密 _RC4” 方法。
 
3.2 支持动态格式调用的静态方法，如何识别与调用
识别：
本类型方法本质上也是静态方法，只是增加了 “ 支持动态格式调
用” 的特性。
在帮助页中会全部归类为 “ 静态方法 ” ，至于是否支持 “ 动态格式调
用” 则需要打开方法的帮助页进行查看。
如下图所示为 “JSON 对象类 ” 中的部分静态方法：

--- 第 302 页 ---
如果在方法的帮助页中没有看到 “ 支持以动态格式调用 ” 关键字，
就证明本方法为普通的静态方法。
调用：

--- 第 303 页 ---
本方法有两种调用方式：
(1) 通过类对象访问：其第一个参数被移动到方法访问对象上，
这种方式在编译时将被自动转换为第一种方式。
(2) 通过类名访问：标准的静态方法访问方式。
 
3.3 全局静态方法的识别与调用
识别：
打开某类的帮助页，如果此类拥有 全局静态方法 就可以在帮助页
中看到 “ 全局静态方法 ” 的分类。
如下图所示为 “ 文本类 ” 中的部分全局静态方法：
点击帮助页中的某个方法，也可以在方法的 类别 处看到 “ 全局静态
方法” 的关键字。

--- 第 304 页 ---
调用：
全局静态方法可以直接通过方法名进行访问。
如下图所示，不需要输入类名、也不需要定义变量就可以直接调
用“ 分割子文本 ()” 方法。
 
4 、 属 性 写 方 法 的 识 别 与 调 用
识别：
打开某类的帮助页，如果此类拥有 属性写方法 就可以在帮助页中看到
“ 属性写方法 ” 的分类。
如下图所示为 “ 编辑框 ” 组件中的部分属性写方法：

--- 第 305 页 ---
点击帮助页中的某个属性写方法，也可以在方法的 类别 处看到 “ 属性写
方法” 的关键字。
调用：
属性写方法有两种调用方式，如下图所示：
通过变量属性表或代码语句调用。
注：如果属性值为类数据类型 ( 常量类 除外) ，不支持在表格中调用。


--- 第 306 页 ---
 
5 、 属 性 读 方 法 的 识 别 与 调 用
识别：
打开某类的帮助页，如果此类拥有 属性读方法 就可以在帮助页中看到
“ 属性读方法 ” 的分类。
如下图所示为 “ 编辑框 ” 组件中的部分属性读方法：
点击帮助页中的某个属性读方法，也可以在方法的 类别 处看到 “ 属性读
方法” 的关键字。
调用：
通过类对象调用属性名即可。

--- 第 307 页 ---
 
6 、 事 件 方 法 的 识 别 与 调 用
5.1 识别与调用
识别：
打开某类的帮助页，如果此类拥有 事件方法 就可以在帮助页中看到
“ 事件定义方法 ” 的分类。
如下图所示为 “ 编辑框 ” 组件中的部分事件方法：
点击帮助页中的某个事件方法，也可以在方法的 类别 处看到 “ 事件定
义方法 ” 的关键字。

--- 第 308 页 ---
调用：
事件调用共有两种方式，如下：
(1) 通过变量 “ 类型 ” 的小按钮可以添加事件。
(2) 通过右键 “ 类型 ” 添加。

--- 第 309 页 ---
选择“ 添加 XX 的事件接受及虚拟方法 ” 菜单后，会弹出一个事件
选择窗口，选择自己要添加的事件进行添加即可。
5.2 事件不被触发时的处理方案
当事件不触发时可通过 “ 挂接事件 ” 解决。
 

--- 第 310 页 ---
7 、 虚 拟 方 法 的 识 别 与 调 用
识别：
打开某类的帮助页，如果此类拥有 虚拟方法 就可以在帮助页中看到 “ 虚
拟方法 ” 的分类。
如下图所示为 “ 窗口 ” 中的部分虚拟方法：
点击帮助页中的某个虚拟方法，也可以在方法的 类别 处看到 “ 虚拟方法 ”
的关键字。
调用：
虚拟方法调用共有两种方式，如下：
(1) 通过“ 类名 ” 的小按钮可以添加虚拟方法。
(2) 通过右键添加。

--- 第 311 页 ---
选择“ 添加 XX 的事件接受及虚拟方法 ” 菜单后，会弹出一个选择窗
口，选择自己要添加的虚拟方法进行添加即可。
虚拟方法的作用：

--- 第 312 页 ---
如果在火山中，某个类中的某个方法不能满足使用需求，但是我们又不
想重新定义一个方法来操作，这个时候就可以利用火山的 “ 虚拟方法 ” 来
实现对这个方法进行重写，这样的重写操作在火山中就称为虚拟方法。
具体可看 “ 定义虚拟方法 ” 中的示例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 313 页 ---
一、程序调试与异常处理
1. 程序调试
1.1 了解程序调试
1.2 程序调试命令
1.2.1 调试输出
1.2.2 调试输出当前语句位置
1.2.3 取当前语句位置
1.2.4 为调试版
1.2.5 调试检查
1.2.6 编译出错
1.3 调试器使用
2. 异常处理
二、编译发布版
1. 火山安卓
2. 火山视窗

--- 第 314 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 315 页 ---
一 、 火 山 软 件 开 发 平 台 程 序 调 试 与 异 常 处 理 介 绍
 
 
1 、 程 序 调 试
1.1 了解程序调试
(1) 概述
所谓程序调试，是在开发的程序投入实际使用前进行相关测试工作，修
正语法错误和逻辑错误的过程，这是保证程序正常执行必不可少的步
骤。
每一个程序几乎都需要经过反复调试、修改，才能最终完成。本节内容
将介绍火山平台是如何进行调试工作的。
(2) 如何调试？
使用快捷键 F5( 部分电脑需要 Fn + F5 ) 可以开始程序调试工作，也可以
点击火山平台上的绿色按钮进行调试。
注意：安卓平台调试需要使用安卓模拟器，使用手机调试需要打开 开发
者选项 、USB 调试 、USB 安装 等相关设置项。
(3) 程序错误分类
程序中的错误一般分为 “ 语法错误 ” 和“ 逻辑错误 ” 。
语法错误： 是指程序代码不符合火山语法规范，这种错误是最容易发现
并修改的。在程序调试时，火山平台会首先进行基本语法检查，如果出
现语法不规范的情况会立刻中断调试，并且光标会定位在错误位置并输
出相关的错误信息，根据错误提示进行修改即可。
如下图所示：

--- 第 316 页 ---
当给整数变量赋值文本数据，进行程序调试时火山平台会直接报错，
并告知错误位置和错误原因。
逻辑错误： 是指程序执行流程上的错误，一般情况下程序可以正常运
行，但是运行后的执行结果和预期不符，或者程序发生发生报错，闪退
等情况。这种错误火山无法通过语法检查主动发现，需要程序开发者利
用火山中相关的调试命令进行错误定位，最终解决这个问题。
 
1.2 程序调试命令
注：所有调试相关命令都会在编译程序发布版时被跳过。
1.2.1 调试输出
本命令用于在调试版中输出调试信息到火山平台的 “ 调试 ” 消息栏中，不
同平台下可调试输出的类型不同，如下所示：
安卓平台：
如下图所示，在安卓平台中调试输出只能用于输出文本型数据或格式
文本数据。
参数1 ：用于提供要输出的格式文本或普通文本。
参数2 ：当参数 1 提供格式文本时，本参数需要提供 格式替换符 对
应的数据类型。

--- 第 317 页 ---
常用格式替换符如下：
常用格式替换符 解释
%n 换行符
%% 百分号本身
%f 小数
%d 整数( 十进制 )
%o 整数( 八进制 )
%b 、 %B 逻辑型
%h 、 %H 散列码
%s 、 %S 文本型
%c 、 %C 字符
%x 、 %X 整数( 十六进制 )
%e 、 %E 指数型小数
%a 、 %A 十六进制小数型
%g 、 %G 通用小数型 ( 自动选择 %f 和 %e 类型中较短者 )
 
示例：
在窗口 “ 通知 _ 被创建 ” 虚拟方法下分别输出普通文本和格式文本信
息。

--- 第 318 页 ---
当程序进行调试时，就可以在火山软件的调试栏中看到程序的调
试信息。
注：因安卓系统的缘故，有时候调试信息可能会有延迟。
视窗平台：
如下图所示，在视窗平台中调试输出可输出多种数据类型，并且
可以同时输出多条数据。
示例：
在窗口 “ 创建完毕 ” 事件下输出各种类型数据。

--- 第 319 页 ---
当程序进行调试时，就可以在火山软件的调试栏中看到程序的
调试信息。
 
1.2.2 调试输出当前语句位置
本命令用于输出当前语句所处位置到火山软件的调试栏中，方便定位
错误位置。
位置信息依次为： < 所处源文件名 > 、所处源文件行号、  所处包名 .
所处类名、  所处方法名。

--- 第 320 页 ---
 
1.2.3 取当前语句位置
本命令可以直接取出当前语句位置文本，如下所示：
最终当软件进行调试时，会输出当前语句位置到信息框中。
 
1.2.4 为调试版
本命令用于判断当前软件是否为调试版，如果为调试版返回真。
本命令可用于在调试版时进行一些数据测试等操作。

--- 第 321 页 ---
当软件调试时会弹出信息框。
 
1.2.5 调试检查
本命令共有两个参数：
参数1 ：在调试版中，当此参数值为假时，程序将中断执行并报
错。
参数2 ：指定当检查失败时 ( 检查值参数为假 ) 所输出的信息，如果
被省略，则默认为空文本。
注：本关键字在增强程序可靠性方面非常有用，可以在程序中大量使
用本关键字语句检查相关处理数据的合法性，又不用担心编译程序的
发布版本时这些检查语句降低了程序执行效率。
如下图所示：
程序将会中断到当前语句的下一行位置，并在程序调试栏输出错
误信息。

--- 第 322 页 ---
 
1.2.6 编译出错
本命令仅在编译程序时起作用，编译器一旦编译到具有本关键字的语
句，就会报告发现了编译错误并停止编译。
本关键字普通用户无需深入了解。


--- 第 323 页 ---
 
1.3 调试器使用
调试器用于软件在调试时动态跟踪代码执行流程，可以进行查看、修
改、监视变量等行为，其功能位于 “ 调试 ” 菜单中。
调试菜单说明如下：
(1) 运行： 用于调试程序。
(2) 终止： 用于终止被调试的程序。
(3) 查看 / 修改变量： 在调试过程中，可以查看指定变量的值，并可以
加入变量到监视表中。
(4) 单步跟踪： 在程序现行运行位置单步执行一行程序，如果此程序
行调用了其它方法，系统不会跟踪到此方法中。
(5) 单步跟踪进入： 在程序现行运行位置单步执行一行程序，如果此
程序行调用了其它方法，系统会跟踪到此方法中。
(6) 跟踪返回： 在被调用的方法中设置断点，断点行被跟踪后，跳出
当前方法，系统跟踪至上级方法调用当前方法语句的下一行代码。
(7) 执行到光标处： 调试程序时会在光标位置所在行中断执行。
(8) 设置或清除断点： 手动的在程序某一行设置或清除断点，如果有
断点则清除，如果没有则会设置一个断点，程序执行到此位置时会中
断执行。
(9) 清除所有断点： 用于清除程序所有断点。
(10) 到现行执行位置： 跳转到现行执行位置。
下面介绍具体如何使用：
1.3.1 执行到光标处
如下图所示：
执行程序时，到光标所在行时会中断执行。
程序中断后会在程序行最左侧位置显示一个换色箭头，此时就可
以进行 “ 查看 / 修改变量 ” 或“ 单步跟踪 ” 等操作。

--- 第 324 页 ---
1.3.2 断点调试
除了通过快捷键 F9 设置/ 清除断点外，还可以通过鼠标点击代码行最
左侧空白位置设置 / 清除断点。
断点设置成功后会出现一个红色的实心圆。
注：只有方法的子语句体内可以设置断点。
当断点设置后，程序运行时会中断到断点位置 ( 会出现黄色箭头提
示) ，此时就可以进行 “ 查看 / 修改变量 ” 或“ 单步跟踪 ” 等操作。

--- 第 325 页 ---
1.3.3 查看变量
当程序被调试器中断后，可以通过鼠标悬浮变量名称查看变量值。
也可以通过光标定位变量名称，按 Shift + F9 进行查看变量值。

--- 第 326 页 ---
1.3.4 修改变量
在 查看/ 修改变量窗口 ，可以通过双击变量所在行，进行修改变量
值。
当变量被修改后也会影响程序最终执行结果，在实际程序调试过程中
可以利用此特性动态进行一些数据测试。

--- 第 327 页 ---
1.3.5 监视变量
在 查看/ 修改变量窗口 ，可以选择一个变量，并将其加入到监视表
中，可用于监视变量变化。
按F5 快捷键或点击运行按钮可继续执行程序，会发现被监视的变量
也一直在更新，将变量加入检视表后，方便动态查看变量的数据值。

--- 第 328 页 ---
1.3.6 单步跟踪
每次按一次 F8 都会向下执行一行并中断执行，直到整个程序执行结
束。
注：如果程序行存在方法调用，并不会跟踪到方法中。
1.3.7 单步跟踪进入
每次按一次 Shift + F8 都会向下执行一行并中断执行，直到整个程序
执行结束。

--- 第 329 页 ---
注：如果程序行存在方法调用，会跟踪到方法中进行中。
1.3.8 跟踪返回
执行跟踪返回，会跳出当前方法，系统跟踪至上级方法调用当前方法
语句的下一行代码。
如下图， 22 行位置被中断，会返回到 17 行的位置。
1.3.9 清除所有断点

--- 第 330 页 ---
如下图，用于清除所有断点。
 
2 、 异 常 处 理
2.1 异常概述
异常是指程序在运行时产生的一些错误，譬如：程序发生闪退，就属于
异常的一种。
异常发生的原因一般都是程序逻辑错误导致，很多异常也是可以避免
的，譬如：在安卓平台中打开一个不存在的文件就会产生异常，因此打
开文件之前可以首先判断文件是否存在，这样就可以避免打开文件时产
生的异常。
示例：

--- 第 331 页 ---
2.2 如何俘获异常
安卓平台：
如下图为火山安卓平台中的异常处理方法。
使用“ 开始俘获异常 ()” 方法并在其子语句体内提供要俘获异常的代码，
并配合 “ 俘获所有异常 ()” 方法就可以俘获程序运行时产生的异常。
示例如下：

--- 第 332 页 ---
在“ 开始俘获异常 ()” 的子语句体内模拟一个数组成员溢出的操作，并
在“ 俘获所有溢出 ()” 的子语句体内提供异常提示信息。
最终程序并不会因为数组成员溢出发生闪退，而会提示错误信息 ( 此
错误信息也可以不提供 ) 。

--- 第 333 页 ---
利用“ 取被俘获异常对象  (). 取异常文本  ()” 还可以取出 java 异常描述，
普通用户知道即可。
视窗平台：

--- 第 334 页 ---
如下图为火山视窗平台中的异常处理方法。
视窗中的使用方式和安卓中基本一致，除了使用 “ 开始俘获异常 ()” 和“ 俘
获所有异常 ()” 外，还需要配合 “ 抛出异常 ()” 方法使用。
示例如下：
利用“ 除法运算 ()” 方法模拟一个除以零的异常，在该方法中进行抛出
异常，只有抛出异常后才可以被 “ 俘获所有异常 ()” 方法进行俘获。

--- 第 335 页 ---
最终程序可以俘获到被除数为 0 的异常错误。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 336 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 337 页 ---
二 、 火 山 软 件 编 译 发 布 版
 
 
1 、 火 山 安 卓
(1) 填写程序包名
填写 包名 ，必须保证有一个小数点，并且保证唯一性，不能与其
它程序包名重复，以免造成无法安装的后果。
例如：腾讯 QQ 的包名为 “com.tencent.mobileqq” ，当前程序不
可填写同样的包名，会造成包名冲突，从而无法安装程序。
注意：确定程序包名后不能更改，如果程序内有多个 “.v” 火山源文
件，则每个文件都需要填写包名，包名可重复。
如下图所示：
(2) 建立密钥文件
在安卓系统中，安卓程序必须要拥有密钥文件才可以运行。
1. 选择“ 工具  -> 安卓密钥文件建立器 ” 。

--- 第 338 页 ---
2. 建立器中只有两个必填项，密钥名称和文件保存位置。
3. 打开的密钥文件保存窗口，默认会选择当前项目路径，直接
输入文件名点击保存即可。

--- 第 339 页 ---
4. 点击生成。
5. 最后会提示生成成功，如果失败可以尝试重新生成或者重启
电脑后尝试。

--- 第 340 页 ---
(3) 设置软件信息
使用快捷键 “Alt + F7” ，打开项目设置窗口。并依次设置 程序标
题、程序版本号、程序版本名称、程序图标、目标安卓平台 SDK
的API 级别 以及生成的 密钥文件 ，填写完毕后，点击 “ 确定 ” 即可。
注意：软件应用市场升级软件通常以 “ 程序版本号 ” 为准，在升级
软件时需修改 “ 程序版本号 ” 。

--- 第 341 页 ---
(4) 编译发布版
通过菜单 “ 生成  -> 生成活动项目 ” 或使用快捷键 F7 ，都可以编译当
前活动项目为发布版。
如果发生报错提示 XXX 不为有效的英文名称。

--- 第 342 页 ---
打开项目属性，设置 “ 所输出 APK 文件纯名称 ” 随便提供一个英
文字母名称即可。
最后编译成功后，可以看到发布版的 APK 文件路径。
编译完成后生成的 temp 文件夹可以删除。

--- 第 343 页 ---
 
2 、 火 山 视 窗
视窗项目编译发布版流程和安卓大致一样，都需要填写包名和软件信
息。
(1) 填写程序包名
视窗程序中的包名可随意填写，只要保证至少有一个小数点即
可。
(2) 填写程序信息
使用快捷键 “Alt + F7” ，打开项目属性设置程序相关信息，完成
后点击确定即可。

--- 第 344 页 ---
(3) 编译发布版
使用快捷键 “F7” 可以编译当前活动项目为发布版，编译完成后
可以看到程序输出路径。
编译完成后生成的 out 文件夹可以删除，不会影响软件运行。
如果软件使用了一些模块，则编译出来的程序可能会附带一些
DLL 动态链接库文件，程序给用户使用时需要将 dll 一起打包给
用户。
如下图为，编译视窗例程库中的 Curl 网络传输例程：

--- 第 345 页 ---
编译发布版也可通过右键选择。
发布此程序给用户使用时需要将这些 dll 文件一起打包发给用
户。
注： 如果不想依赖 dll 文件，可通过 项目属性 设置“ 火山模块
链接方式 ” 为静态编译，可解决部分模块附带 dll 的问题。
 
 

--- 第 346 页 ---
[ 上一章 ]    [ 下一章 ]
 
 

--- 第 347 页 ---
一、安卓项目
1. 你好祖国小程序
2. 简易计算器
二、视窗项目
1. 你好祖国小程序
2. 密码管理小程序
3. 飞机大战小游戏

--- 第 348 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 349 页 ---
一 、 火 山 安 卓 实 现 你 好 祖 国 小 程 序
 
 
1 、 程 序 分 析
在正式开发之前，首先需要对程序进行简单的分析。只有合理的分析
程序界面以及要实现的功能之外，才能更好的开发这个软件。
如下：
运行平台： 安卓平台，安卓 5.0 及以上系统。
界面设计： 在窗口正中心位置放置一个按钮，并起名 “ 你好祖
国！” ，因本程序界面并不复杂，可不用出效果图。
具体功能： 点击按钮后弹出一个信息框，内容显示 “ 你好祖
国！” 。
 
2 、 程 序 开 发
2.1 项目创建
利用快捷键 “Ctrl + Shift + N” 打开项目创建窗口，根据需求选择
一个安卓平台下具有窗口的项目模板。
项目创建完毕：

--- 第 350 页 ---
 
2.2 界面设计
使用快捷键 “Ctrl + U” 打开界面设计器，拖放一个按钮到界面中，
并选择启动类的界面布局，设置其 “ 内容横 / 纵向对齐 ” 模式为居
中。
最终就可以让 按钮1 居中对齐。


--- 第 351 页 ---
 
2.3 代码编写
(1) 首先填写程序必备的软件包名。
(2) 按照程序开发需求，设置按钮标题。
(3) 添加按钮被点击事件。
(4) 添加事件后，利用 如果语句 判断按钮来源，并在其子语句体内
输入“ 提示信息框 ()” 命令，用于显示一个内容为 “ 你好祖国！ ” 的信
息框。
至此，程序代码编写完毕。

--- 第 352 页 ---
 
2.4 调试运行
在程序正式 编译发布版 之前，首先需要对程序进行 调试 工作，验
证程序是否能够正常执行。
打开一个安卓模拟器 ( 推荐使用 雷电模拟器 ) ，在模拟器运行完毕
后，按下快捷键 “F5” 进行程序调试。

--- 第 353 页 ---
 
3 、 案 例 下 载
点击下载 当前教程案例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 354 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 355 页 ---
二 、 火 山 安 卓 开 发 简 易 计 算 器 软 件
 
 
1 、 程 序 分 析
在正式开发之前，首先需要对程序进行简单的分析。只有合理的分析程
序界面以及要实现的功能之外，才能更好的开发这个软件。
如下：
运行平台： 安卓平台，安卓 5.0 及以上系统。
界面设计： 共分两个区域，显示区域和计算区域，如下图所示：
显示区域：
在显示区域又分为上下两个部分，分别为 “ 公式区 ” 和“ 结果
区” ，用于分别显示计算公式和计算结果，可使用文本框组件显

--- 第 356 页 ---
示。
计算区域：
计算区域的布局为 4×5 的宫格布局，可使用 5 个线性布局器 和19
个文本框 ，并利用 权重布局 实现效果。
注：计算区最后一行只有三个内容，因此需要单独设置 权重布
局 。
具体功能： 按下数字键和运算符键后，最终能够实现简单的数学运
算。为防止在 公式区 出现无意义的计算公式，因此按下某键之前进行
相关的判断工作，譬如：按下某运算符键后，需要首先判断一下在 公
式区 是否已经输入了运算符，防止重复输入。
 
2 、 程 序 开 发
2.1 项目创建
利用快捷键 “Ctrl + Shift + N” 打开项目创建窗口，根据需求选择一个
安卓平台下具有窗口的项目模板。
项目创建完毕：

--- 第 357 页 ---
 
2.2 界面设计
使用快捷键 “Ctrl + U” 打开界面设计器，因界面较为复杂，需要进行
逐步设计。
(1) 在界面中拖放两个文本框和五个线性布局器组件，并按 “Ctrl” 键
依次将所有组件全部选中，并设置以下属性：
剩余空间权重： 10 ；
组件宽度类型：匹配父组件宽度；
组件高度类型：直接指定，并设置高度值为 0 ，只有设置高度为 0
后“ 剩余空间权重 ” 才会按照比例进行分配尺寸。

--- 第 358 页 ---
 
(2) 因所有组件已经将剩余空间权重设置为 10 ，为了能够让组件按照
比例平均分配，因此需要选中启动类布局，将 “ 剩余空间总权重 ” 设置
为70 ，这样所有组件就可以等比例的分配尺寸。
 

--- 第 359 页 ---
(3) 按“Ctrl” 键，选中两个文本框组件，并分别设置以下属性：
内容横向对齐：右对齐；
内容纵向对齐：居中；
文本颜色：黑色；
字体尺寸： 30 ，如果最终运行效果和软件效果图有偏差，可以自
行调整；
右内边距： 25 ；
 
(4) 单独选中 “ 文本框 2” 组件，本组件最终会存放计算结果，因此可
以将其文本尺寸修改大一些，方便和存放计算公式的文本框形成反差
效果。

--- 第 360 页 ---
 
(5) 因考虑到两个文本框都是居中对齐，最终可能会导致两个文本内
容直接间隙过大，因此可以选中 “ 文本框 1” 组件，将其内容调整为 “ 底
对齐” 。
那为什么不去调整 文本框 2 的对齐方式呢？
其实很简单，因为调整 文本框 2 的对齐方式，最终可能会导致 文本
框2 的内容和 计算区域 直接间隙过大，影响软件的整体美观效果。
 
(6) 按“Ctrl” 键选中所有的 线性布局器 ，将其布局方向设置为 “ 横向布
局” 。

--- 第 361 页 ---
 
(7) 在任意一个线性布局器内，拖放四个文本框组件，并按 “Ctrl” 键
全部选中，然后设置以下属性：
内容横向对齐：居中；
内容纵向对齐：居中；
文本颜色：黑色；
文本字体尺寸： 26 ；
剩余空间权重： 25 ；
组件宽度： 0 ；
组件高度：匹配父组件高度；

--- 第 362 页 ---
 
(8) 属性设置完毕后，选中四个文本框组件进行 右键 并选择 复制 。
 
(9) 复制后依次粘贴到其它线性布局器中，粘贴后的组件会自动拥有
被复制组件的属性。

--- 第 363 页 ---
 
(10) 因最后一个线性布局器只有三个内容，因此需要删除一个文本
框组件，并修改其中一个文本框的权重为 50 。
 
(11) 可以选中非数字区域的文本框，修改其颜色增加美观效果。

--- 第 364 页 ---
 
(12) 选中 文本框 3 、 4 ，因这两个文本框最终会存放汉字，在视觉上
会比 数字、运算符 看起来稍微大一些，为了整体视觉效果可以适当的
降低字体尺寸。
 
(13) 然后按照设计图效果，依次修改文本框名称设置文本框内容。

--- 第 365 页 ---
 
(14) 至此界面设计完毕，可以进行调试查看一下界面效果，效果不
满意可以根据自己的需求进行调整。

--- 第 366 页 ---
 
2.3 代码编写
(1) 首先将所有需要操作的文本框设置 “ 支持单击 ” 和“ 支持触摸 ” 属性
为真，如果不设置将无法进行单击和触摸。

--- 第 367 页 ---
(2) 任意找一个文本框组件，添加触摸事件。

--- 第 368 页 ---
(3) 在触摸事件下判断触摸动作类型，当按下时修改背景色为
0xCCCCCCCC ( 即半透明浅灰色 ) ，抬起后修改为透明色。
(4) 最终可以实现如下效果：

--- 第 369 页 ---
(5) 在正式开始实现计算功能之前，我们首先需要封装三个常用方法
出来，为后面的计算过程提供帮助。
是否为数值：
譬如：在按下 “ 加号 ” 键时，可用于验证 公式文本框 中，是否已
经输入了整数或小数，从而决定是否在 公式文本框 中添加 加号
符 。
其中本方法 “ 参数 2” 的作用，是用于在按下 小数点 时，验证 公式
文本框 中是否输入的为 整数 ，从而决定是否在 公式文本框 中添
加 小数点 。
注：正则表达式类需要配置 “ 正则表达式支持 ” 模块才能使用。
方法解析：
正则表达式类 . 是否完全匹配 ()
在本方法的作用，是用于验证提供的文本是否全部为数
字，如果全是数字则返回真。
文本到小数 ()

--- 第 370 页 ---
在本方法中判断不等于 0 ，用于验证提供的文本是否为数
值。
清除尾部 0 ：
因在计算过程中采用小数进行计算，即使最终结果值是整数，
最后也会以 “.0” 结尾，本方法用于清除尾部的 “.0” 。
计算公式结果：
利用 正则文本分割 () 方法，对 公式文本框 中的内容进行分割后
计算结果。
注：相减运算不能使用 正则文本分割 ，因为要考虑负数运算的
问题。

--- 第 371 页 ---
(6) 任意使用一个文本框添加文本框被单击事件。
(7) 添加事件后将需要操作的文本框，使用如果否则语句进行判断其
来源对象。
其中 加减乘除 运算符和所有的 数字键 统一进行判断。

--- 第 372 页 ---
(8) “ 文本框 _ 清零 ” 被单击：
直接将 公式文本框 设置为空文本， 结果文本框 设置为 0 即可。
(9) “ 文本框 _ 删除 ” 被单击：
当删除被单击时，首先验证 公式文本框 是否为空或其结尾文本为
等于号，如果满足条件就执行清零操作。
当不满足条件时，就利用 “ 取文本左边 ()” 方法对 公式文本框 的内容
进行删除一个字符，将删除后的内容重新赋值给 公式文本框 。
(10) “ 文本框 _ 百分比 ” 被单击：
在操作之前首先验证 公式文本框 的内容是否为空，当不等于空的
时候在进行百分比的处理。
85-88 行：
用于判断 公式文本框 是否只输入了数值，如果满足条件就进行
百分比处理，并修改 公式文本框 显示的内容后返回。
89-93 行：

--- 第 373 页 ---
用于验证当前是否已经进行过数学运算，如果满足条件则首先
判断 结果文本框 是否不等于 0 ，当条件满足时修改 公式文本框 的
显示内容并对 结果文本框 进行百分比处理。
将处理结果重新赋值给 结果文本框 显示，最后执行返回。
95-98 行：
当前面的两个条件都不满足时，证明输入了计算公式。
到这里可能会疑问，为什么没有判断是否存在运算符，就能
证明已经输入计算公式了呢？
原因很简单，这是因为已经在 “ 计算公式结果 ()” 方法中进行
了判断，因此无需额外的判断。
接下来将 公式文本框 的结果计算出来，并将结果显示在 公式文
本框 中。
然后对计算结果进行百分比处理，将处理后的内容赋值给 结果
文本框 显示。
(11) “ 文本框 _ 加 / 减 / 乘 / 除 ” 被单击
因运算符的处理都是相同的，所以可以放在一起进行判断，减少
代码重复使用。
100-103 行：
用于判断 公式文本框 内容为空时，如果被单击的运算符为减
号，则可以进行输入。
105-107 行：
如果 公式文本框 的内容为数值，则直接输入运算符。
108-1 10 行：
验证当前是否已经进行过计算，如果已经被计算过了，则将计
算结果显示在 公式文本框 中，并输入对应的运算符。
111-112 行：
当公式文本框以小数点结尾时，直接返回不输入任何运算符。

--- 第 374 页 ---
113-116 行：
如果前面的添加都不满足，则证明已经输入了计算公式，但是
还未进行计算。
首先取出计算结果，并将计算结果显示在 公式文本框 中，并输
入运算符，最后需要将 结果文本框 设置为 0 。
(12) “ 文本框 _ 等于 ” 被单击
当 公式文本框 不等于空时，取出最右侧的文本，并判断其是否不
等于任何符号。
如果满足条件则进行计算，将计算结果显示在 结果文本框 中。
注意给 公式文本框 添加等于号，方便其它文本框组件点击时验证
是否被计算过。
(13) “ 文本框 _ 点 ” 被单击
首先要判断 公式文本框 的内容不等于可空，当满足条件后再进行
相关处理。
126-138 行：
本段代码的作用，是用运算符对 公式文本框 的内容进行分割，
将分割的结果赋值给文本数组。
其作用是方便验证运算符右侧被运算的数值，是否为整数，从
而来决定是否在 公式文本框 中输入小数。
139-142 行：

--- 第 375 页 ---
如果任何运算符都没有找到，就证明还没有输入运算符，此时
就直接验证 公式文本框 的内容是否为整数，满足条件后就在 公
式文本框 中输入小数点，并返回。
143-146 行：
最后这段代码就是用于验证运算符右侧被运算的数值是否已经
输入过小数点，如果满足条件则输入小数点并返回。
(14) 数字键 被单击
在这里可能会有疑问，因为并没有写条件，怎么就一定是所有的
数字键？ “ 文本框 _ 公式 ” 被点击，会不会在这里被执行？
这点可以放心，在火山安卓中除了按钮类型的组件外，其它类型
的组件都需要设置 “ 支持单击 ” 属性为真，才可以触发被单击事
件。
因“ 文本框 _ 公式 ” 并没有设置支持单击属性，因此 “ 否则 ” 子语句体
中的代码只能是其它的所有数字键。
148-152 行：
当 公式文本框 的内容为空时，首先判断输入数字是否为 0 ，如果
为0 则自动补充小数点，否则直接输入数字。
154-156 行：
当 公式文本框 不为空时，验证一下当前输入的公式是否已经进
行过计算，如果被计算过，则直接将 公式文本框 的内容赋值为
要输入的数字。
157-158 行：
如果公式文本框的内容为 0 ，按下的数字键也为 0 时，不进行输
入直接返回。
159-166 行：

--- 第 376 页 ---
本段代码的作用是防止，譬如： 11+0 的情况下继续输入数字。
这里可能会有疑问，明明已经处理过对 0 自动补充小数，为什么
要需要验证？
这里不要忘记，计算器还提供有删除功能，所以这里依然需要
验证一下，其计算公式的结尾是否满足： 运算符  + 0 的情况，
如果满足条件则直接返回。
167-170 行：
用于验证计算公式的结尾是否为运算符，当结尾为运算符时，
判断点击的是否为数字键 0 ，如果为 0 则自动补充小数点。
171 行：
当公式文本框不为空时，且以上条件都不满足时，证明可以直
接输入对应数字。
至此整个简易计算器编写完毕，在开发过程中要额外注意全角符号和
半角符号的问题，譬如： “-” 、“ －” 是不同的。
在程序编写过程中要么全部使用半角，要么全部使用全角，为减少计
算过程中产生不必要的错误。
 
2.4 调试运行
在程序正式 编译发布版 之前，首先需要对程序进行 调试 工作。
打开一个安卓模拟器 ( 推荐使用 雷电模拟器 ) ，在模拟器运行完毕后，
按下快捷键 “F5” 进行程序调试。
调试时如果火山报以下错误，证明项目缺少模块， 配置模块 即可
解决。
第二条错误提示缺少返回值，是因为火山在预编译时，没有找到
正则表达式类 ，因此语句被忽略，从而会导致整个方法的返回语
句不完整。

--- 第 377 页 ---
因此，只要将项目模块配置完善，火山编译器能检查到 正则表达
式类 ，第二条错误也就解决了。
计算测试：
如果在调试过程中如果遇到程序闪退，或者输入的计算公式存在问题
的情况下，可以参考 《程序调试和异常处理》 章节中的内容，对程序
进行详细的调试，找到问题并解决问题。
 
3 、 案 例 下 载
点击下载 当前教程案例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 378 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 379 页 ---
一 、 火 山 视 窗 实 现 你 好 祖 国 小 程 序
 
 
1 、 程 序 分 析
在正式开发之前，首先需要对程序进行简单的分析。只有合理的分析
程序界面以及要实现的功能之外，才能更好的开发这个软件。
如下：
运行平台： 视窗平台， win7 及以上系统。
界面设计： 在窗口正中心位置放置一个按钮，并起名 “ 你好祖
国” ，因本程序界面并不复杂，可不用出效果图。
具体功能： 点击按钮后弹出一个信息框，内容显示 “ 你好祖
国！” 。
 
2 、 程 序 开 发
2.1 项目创建
利用快捷键 “Ctrl + Shift + N” 打开项目创建窗口，根据需求选择
一个视窗系统下具有窗口的项目模板。
项目创建完毕：

--- 第 380 页 ---
 
2.2 界面设计
使用快捷键 “Ctrl + U” 打开界面设计器，拖放一个按钮到界面中并
选中，利用工具条中的两个按钮实现居中对齐，并在右侧设置按
钮标题。
 
2.3 代码编写
(1) 添加按钮被点击事件。

--- 第 381 页 ---
(4) 添加事件后，利用 如果语句 判断按钮来源，并在其子语句体内
输入“ 信息框 ()” 命令，用于显示一个内容为 “ 你好祖国！ ” 的信息
框。
至此，程序代码编写完毕。
 
2.4 调试运行
在程序正式 编译发布版 之前，首先需要对程序进行 调试 工作，验
证程序是否能够正常执行。
按下快捷键 “F5” 进行程序调试。

--- 第 382 页 ---
 
3 、 案 例 下 载
点击下载 当前教程案例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 383 页 ---
 
[ 上一章 ]   [ 下一章 ]

--- 第 384 页 ---
二 、 火 山 视 窗 开 发 密 码 管 理 小 程 序
 
 
1 、 程 序 分 析
在正式开发之前，首先需要对程序进行简单的分析。只有合理的分析程
序界面以及要实现的功能之外，才能更好的开发这个软件。
如下：
应用场景： 随着互联网信息的高速发展，越来越多的网站诞生，每个
网站可能都需要注册账号密码才能登陆，如果使用了重复的密码无疑
是有风险的，但是使用不同的密码又会产生忘记密码的问题。因此根
据此场景可以开发一个简易的密码管理软件，这样既可以规避风险，
又能防止忘记密码。
运行平台： 视窗平台， win7 及以上系统。
界面设计： 可能需要用到三个窗口，后续软件需要升级，再根据需求
在决定是否增加或删除窗口。
分别如下所示：
主窗口：
主窗口由有四个按钮和一个超级列表框组成，超级列表框中用
于显示已经保存过的账号密码等信息。
添加修改窗口：
在点击主窗口中 “ 添加 ” 或“ 修改 ” 按钮后弹出的窗口，用于添加
或修改信息。

--- 第 385 页 ---
因这两个功能类似，因此可以使用同一个窗口来解决，无需单
独建立添加窗口和修改窗口。
至于按钮组件的标题，可通过载入窗口后，将其修改成 “ 添加 ”
或“ 修改 ” 。
查找窗口：
在点击主窗口中的 “ 查找 ” 按钮后弹出的窗口，根据 组合框 和 编
辑框 提供的条件信息，从而在已经保存的数据中搜索到想要的
内容。
功能分析：
(1) 软件启动后连接 SQLite 数据库并从数据库获取已经保存的密码
到超级列表框中显示。
(2) 点击 添加 按钮，弹出 添加修改窗口 ，输入相关信息后执行 sql 语
句添加数据到 SQlite 数据库中，并刷新列表框内容。
(3) 点击 查找 按钮，弹出 查找窗口 ，输入条件后，根据条件在超级
列表框中查询信息，并将查询结果高亮显示。
(4) 点击 修改 按钮之前，首先需要判断列表框有没有选中一个项
目，如果有选中，则弹出 添加修改窗口 ，并将列表框选中项的数
据填充到 添加修改窗口 中，便于修改操作。
(5) 点击 删除 按钮，同样也需要判断列表框是否有选中项目，如果
有的话取出唯一的 ID ，通过 ID 在 SQlite 数据库中删除数据。
 

--- 第 386 页 ---
2 、 程 序 开 发
2.1 项目创建
利用快捷键 “Ctrl + Shift + N” 打开项目创建窗口，根据需求选择一个
视窗平台下具有窗口的项目模板。
项目创建完毕：
注：如果已经在 “ 主窗口对象 ” 的属性栏中设置了窗口标题，则不
可以在 “ 我的主窗口 ” 类的属性栏中设置标题。

--- 第 387 页 ---
 
2.2 主窗口界面设计
使用快捷键 “Ctrl + U” 打开主窗口界面设计器。
(1) 拖放四个按钮到窗口上，并分别修改名称和标题，规范化的名称
可便于后续代码编写。
 
(2) 按钮如果分布不均匀，可以使用工具条中的 “ 水平平均分布 ” 进行
平均操作。

--- 第 388 页 ---
 
(3) 首先需要配置 “MFC 扩展界面支持类库 1” 模块，配置模块后才能看
到“ 超级列表框 ” 组件，将此组件拖放到窗口中设置一个合适的大小，
并调整以下属性：
类型：报表列表框；
整行选择：真；
 
(4) 点击“ 报表列 ” 属性按钮，会弹出一个窗口，在此窗口中设置报表
列数据：

--- 第 389 页 ---
 
(5) 最终界面效果
 
 
2.3 添加修改窗口界面设计
(1) 使用快捷键 “Ctrl + D” 新建一个类：
类名填写 “ 添加修改窗口 ” ，基础类填写 “ 窗口 ” ，并给此窗口设置
“ 标题 ” 属性。

--- 第 390 页 ---
 
(2) 使用快捷键 “Ctrl + U” 打开 添加修改窗口 的界面设计器。
按照需求拖放 标签 、 编辑框 和 按钮 组件实现如下效果。
除 标签 组件外，可以对其它组件进行名称修改，以便于后续的代
码编写。
备注编辑框可以额外设置一个 “ 是否允许多行 ” 属性为真。
注： 当程序运行时可能会遇到这样的问题，获得焦点的编辑框并
不是网站名称所处编辑框，而是其它的编辑框，这是因为编辑框
组件的焦点，会按照放置顺序进行操作。
譬如： 在界面设计时，如果首先放置的是备注编辑框，那么软件
运行后此编辑框会首先获得焦点，按下 Tab 键切换焦点，也是按组
件的放置顺序进行，如果放置的顺序不对，最终切换焦点的顺序
也会是错乱的。
想要让焦点顺序正常，可以通过 “ 布局内容 ” 进行拖动组件修改焦
点顺序。

--- 第 391 页 ---
 
 
2.4 查找窗口界面设计
(1) 使用快捷键 “Ctrl + D” 新建一个类：
类名填写 “ 查找窗口 ” ，基础类填写 “ 窗口 ” ，并给此窗口设置 “ 标
题” 属性。
 
(2) 使用快捷键 “Ctrl + U” 打开 查找窗口 的界面设计器。
按照需求拖放 标签 、 组合框 、 编辑框 和 按钮 组件实现如下效果。

--- 第 392 页 ---
 
(3) 选中组合框组件，并设置如下属性：
类型：不可编辑下拉式（因要筛选的类型数据都是固定的，并且
只有四个，所以不需要编辑）；
现行选中项： 0 ；
 
(4) 点击“ 列表项目 ” 的属性按钮会弹出一个项目设置窗口，插入四个
可选项目即可。

--- 第 393 页 ---
 
(5) 最终效果如下图：
 
 
2.5 SQlite 数据库表设计
SQlite 是一种轻量级的数据库，不需要服务器可以在任何设备上使
用，数据库内容存储在一个文件中，操作 SQlite 数据库实际上就是操
作一个文件，通常文件后缀名为 db 。
数据库文件可以通过代码动态创建，也可以使用第三方工具生成，为
了便于理解这里我们采用 Navicat for SQlite 软件来生成数据库文
件，然后将生成的文件交给火山视窗操作。

--- 第 394 页 ---
(1) 启动软件后，点击连接按钮。
 
(2) 填写一个名称，选择 SQLite3 版本，最后设置一下数据库文件保
存路径。

--- 第 395 页 ---
 
(3) 双击 密码管理 ，随后双击 main ，就可以点击 “ 新建表 ” 按钮。

--- 第 396 页 ---
 
(4) 如下图所示设置自增 ID 字段，其作用是为了保证数据库中存在唯
一值，方便后续删除，修改等操作。
注：数据库的字段名建议使用英文字母，因数据库中对中文字段
名支持不友好。
 
(5) 添加栏位 即添加新字段，添加后输入名称选择文本类型。

--- 第 397 页 ---
 
(6) 按照字段需求，重复的点击 “ 添加栏位 ” ，所有字段设置完毕后，
点击“ 保存 ” 按钮。
 
(7) 填写一个表名，随后点击确定，就可以关闭表设计窗口。
注：表名建议使用英文字母。

--- 第 398 页 ---
 
(8) 创建完毕后就可以打开此表，看到数据库字段信息。
至此数据库字段设置完毕，可以关闭本软件。
 
(9) 在保存位置会生成一个数据库文件，火山视窗操作的就是此文
件。
 
 
2.6 主窗口代码编写
(1) 首先在启动类的属性栏中使用 “@ 视窗 . 附属文件 ” 引用生成的数据
库文件，最终此文件会在程序调试或者编译发布版时，将文件输出到
软件目录中，从而方便程序调试和发布程序。

--- 第 399 页 ---
注意公开主窗口对象，便于在其它窗口中调用主窗口。
(2) 配置SQLite 数据库 模块，定义 “SQLite 数据库类 ” 并公开，便于在
其它窗口中调用数据库。
将另外两个窗口类也都定义成对象实例，便于后续创建窗口。
超级列表框组件也进行公开，便于在查找窗口中调用。
(3) 添加主窗口创建完毕事件，利用数据库对象打开程序运行目录下
的数据库，打开成功后就调用 “ 载入数据库内容 ()” 方法载入内容，失
败就弹出信息框并关闭窗口。
这里可能会有疑问，为什么要调用一个方法？而不是直接写载入
内容的代码？
其实原因也很简单，载入内容在多个地方会用到，因此封装起来
便于在操作。
方法解析：
数据库 . 打开 ()
顾名思义，就是打开一个数据库。

--- 第 400 页 ---
参数1 ：提供数据库文件路径 .
参数2 ：提供数据库打开方式，此处务必使用 SQLite 打开方
式. 读写打开 ，否则数据库将无法正常操作。
取运行目录 ()
本方法可以取出当前程序的运行目录，在 数据库 . 打开 () 方法
中使用，用于表示数据库文件的完整路径。
(4) 载入数据库内容 方法如下：
使用快捷键 “Ctrl+M” 新建方法，插入一个逻辑参数并公开此方
法，便于在其它窗口中调用本命令刷新。
其参数的作用，是用于首次打开时不进行提示没有查询到任何内
容。
27-28 行：
利用select 查询语句取出记录集对象。
记录集：即数据库内容集合。
SQL 语句解析：
SELECT * FROM mima ，查询名称为 “mima” 表下的所有字
段内容。
29-30 行：
判断记录集是否有效，如果记录集有效则执行列表框全部删除
命令。
31-38 行：
数据库中的数据都是一行一行的获取，没办法通过某个命令一
次性获取全部数据，在 SQLite 数据库中只能使用 “ 判断循环 ” 来
实现。。
利用“ 判断循环 ” 语句，判断其 “ 记录集 . 执行语句 ()” 的结果是否
为“SQLite 执行结果 . 下一行就绪 ” 。
注：“ 执行语句 ()” 的作用是执行 “ 取记录集 ()” 方法中提供的
SQL 语句。

--- 第 401 页 ---
如果满足条件就证明下一行数据被获取到，就可以在其子语句
体内向利用 记录集 的“ 读文本数据 ()” 方法读取数据填充到列表
框中。
列表框方法解析：
插入表项 ()
本方法共有 6 个参数，在此处只需要填写 参数2 ，提供要插
入的标题信息即可，返回当前插入的表项索引。
置标题 ()
本方法共有 3 个参数，分别提供表项索引，列索引，欲设
置标题即可。
其中 读文本数据 () 方法需要提供字段索引，从 0 开始。
0 ：表示 id 字段 ;
1 ：表示 name 字段 ;
2 ：表示 url 字段 ;
3 ：表示 user 字段 ;
4 ：表示 pw 字段 ;
5 ：表示 beizhu 字段。
39-41 行：
首先将记录集释放，并判断 “ 是否首次打开 ” 参数是否为假且列
表框的表项数是否为 0 ，如果都满足条件才提示没有查询到任何
内容。


--- 第 402 页 ---
(5) 添加主窗口将被销毁事件，并关闭数据库释放数据库资源。
(6) 添加按钮被单击事件，并实现如下效果：
因 删除 和 修改 按钮点击时需要判断有没有选中项，所以需要在判
断是否有选中项后再进行操作。
为什么要判断选中项？因为要取出列表框中显示的唯一 ID 值，根
据ID 值才能更加方便的删除或修改数据。
(7) 找到添加修改窗口，将其所有可能会被操作的组件进行公开，便
于接下来的代码编写。

--- 第 403 页 ---
(8) “ 按钮 _ 添加 ” 被单击：
弹出添加修改窗口后，并修改此窗口中的按钮标题为 “ 添加 ” ，
毕竟此窗口有两个作用，修改按钮标题后也便于识别当前窗口
是添加还是修改。
“ 按钮 _ 查找 ” 被单击：
利用“ 创建弹出子窗口 ()” 方法弹出查找窗口，参数填写本对象
即可。
(9) 当不满足 添加/ 查找 按钮点击时，执行如下代码：
首先判断列表框是否有选中项，如果没有选中项则弹出信息框提
示。
否则就取出列表框中现行选中项 “ID” 列的数据内容 ( 即数据库中的
唯一ID) ，便于删除或修改按钮的点击操作。
取标题 () 方法解析：
本方法共有两个参数，参数 1 提供要取标题的表项索引（此处提
供现行选中项即可），参数 2 提供列索引（从 0 开始）。

--- 第 404 页 ---
(10) “ 按钮 _ 删除 ” 被单击
调用“ 数据库 . 执行 SQL 语句 ()” 命令执行删除语句，其删除条件为
id= 自增 ID ，因为此值在数据库中是唯一值，因此不需要担心误删
其它数据。
SQL 语句解析：
DELETE FROM mima WHERE id = 自增 ID
删除名称为 “mima” 表下“id” 字段的值为 “ 自增 ID” 的数据。
当执行结果返回 0 表示删除成功，成功后删除列表框的现行选中
项，否则将错误原因取出并显示在信息框中。
执行SQL 语句 () 方法解析：
本方法共有两个参数，参数 1 提供要执行的 SQL 语句，参数 2 提
供一个文本型的变量，当执行错误时刻通过此变量取出错误原
因。
(11) “ 按钮 _ 修改 ” 被单击
弹出添加修改窗口后，修改按钮标题并给按钮的标记属性赋值 自
增ID ，以便于后续在此窗口中进行执行修改数据库数据。
随后取出列表框现行选中项的数据，依次赋值给此窗口中的编辑
框组件，便于识别修改的是哪条数据。

--- 第 405 页 ---
 
2.7 添加修改窗口代码编写
(1) 添加按钮被单击事件
因本窗口中只有一个按钮，因此可以不必判断来源对象参数。
因在弹出此窗口后都对按钮标题进行了修改，所以可通过判断按
钮标题，根据不同的标题来执行不同的操作代码。
(2) 按钮内容为 “ 添加 ” 时执行：
102-103 行：
首先判断所有编辑框的内容是否为空，如果为空就弹出信息
框，提示用户进行输入内容。
105-1 13 行：
106 行： 定义insert 插入语句，其格式为 “INSERT INT O 表名
( 字段名 1, 字段名 2,…) V ALUES (‘ 值 1’, ‘ 值 2’,….)”
SQL 语句解析：
在指定表的指定字段下，插入一行新的值。
108 行： 利用“ 取程序 ()” 命令可取出 启动类 对象，然后就可以调
用被公开的 主窗口对象 、调用 数据库 的执行 SQL 语句方法，执
行定义好的插入语句 .

--- 第 406 页 ---
如果执行结果返回 0 表示执行成功，继续利用 “ 取程序 ()” ，调用
主窗口中的 “ 载入数据内容 ()” 方法来刷新列表显示，并关闭当
前窗口。
当执行失败时，则取出错误原因。
(3) 按钮内容为 “ 修改 ” 时执行：
首先定义 update 更新语句，在更新语句中就利用到了赋值给按钮
组件“ 标记 ” 属性的 ID 值，取出 ID 值写到 sql 语句的 where 条件中。
SQL 语句解析：
UPDA TE 表名  SET 字段 1 = ‘ 值 1’, 字段 2 = ‘ 值 2’ WHERE 条件
字段 = ‘ 条件值 ’
根据条件自动提供的条件值，在指定表中进行筛选，筛选后将
“ 字段 1” 对应的值修改为 “ 值1” ，“ 字段 2” 对应的值修改为 “ 值
2” ，如果存在多个字段则以此类推，多个字段之间需要用半角
逗号分隔。
最后利用 “ 取程序 ()” 调用主窗口中数据库的执行 SQL 语句方法。
如果执行成功则调用 “ 载入数据库内容 ()” 方法来刷新列表框并关闭
当前窗口，否则提示错误原因。
 
2.8 查找窗口代码编写
(1) 添加查找窗口创建完毕事件，在此窗口下让编辑框获得输入焦
点。

--- 第 407 页 ---
(2) 添加按钮被单击事件，因本窗口中只有一个按钮，因此可以不判
断来源对象。
首先判断编辑框的内容是否为空，并提示用户输入内容。
如果不为空，则利用 “ 取程序 ()” 方法取出主窗口中的列表框组件进
行“ 查找表项 ()” 操作。
查找表项 () 方法解析：
本方法共有 4 个参数。
参数1 ：提供要查找的内容；
参数2 ：提供起始查找位置，默认为 0 ；
参数3 ：是否精确匹配，默认为真。
参数4 ：提供要查找的列索引。
当前情况下只需要填写参数 1 和参数 4 即可。
如果查找结果为 -1 ，则表示没有找到，此时应弹出提示告知用
户。
否则就让列表框组件获取焦点，并选中查找到的表项，最后关闭
当前窗口。

--- 第 408 页 ---
 
2.9 调试运行
在程序正式 编译发布版 之前，首先需要对程序进行 调试 工作。
添加测试：
查找测试：

--- 第 409 页 ---
修改测试：
删除测试：

--- 第 410 页 ---
在调试时，可能会遇到一个问题，就是当关闭调试的程序后，重新调
试时，会发现所有的数据都清空了？这是为什么？
其实很简单，这是因为 “@ 视窗 . 附属文件 ” 每次调试或编译发布版
时，都会重新将数据库文件输出，这就导致原有的数据库文件已经被
覆盖，所以重新调试时数据就没了，如果想要调试时保留数据也很简
单，首次调试后，将附属文件屏蔽掉即可。
 
3 、 案 例 下 载
点击下载 当前教程案例。
 
 
[ 上一章 ]   [ 下一章 ]
 
 

--- 第 411 页 ---
 
[ 上一章 ]  

--- 第 412 页 ---
三 、 火 山 视 窗 开 发 飞 机 大 战 小 游 戏
 
 
1 、 程 序 分 析
在正式开发之前，首先需要对程序进行简单的分析。只有合理的分析程序
界面以及要实现的功能之外，才能更好的开发这个软件。
如下：
运行平台：  win7 及以上系统。
素材准备：
需要准备以下图片素材：
背景图、操作飞机、敌机、子弹、爆炸效果。
需要准备以下声音素材：
子弹发射声、爆炸声。
这些素材可以自行在网上搜寻，或直接使用文章结尾飞机大战源码中
提供的素材。
游戏流程：
进入游戏后，首先显示一个名称为 “ 开始游戏 ” 的按钮，点击按钮后隐
藏鼠标后开始游戏。
背景图绘制：
背景图绘制时可以实时移动图片，实现简易的动画效果，让游戏
的整体效果可以好看一些。
操作飞机绘制：
操作飞机在绘制时，让其跟随鼠标位置进行移动，实现控制操作
飞机的目的，同时需要检测操作飞机是否与敌机发生碰撞，从而
结束游戏。
敌机绘制：
随机位置绘制敌机并实时移动其位置，实现敌机飞行效果。
子弹绘制：
当处于游戏状态时，点击鼠标左键开始绘制子弹，同时播放子弹
发射声音，并实时移动其位置检测是否与敌机发生碰撞，如果发
生碰撞就开始绘制爆炸效果并删除敌机，同时需要播放爆炸声
音。
当敌机被销毁后，在游戏的左上角绘制敌机销毁数量。
 
2 、 程 序 开 发
2.1 项目创建

--- 第 413 页 ---
利用快捷键 “Ctrl + Shift + N” 打开项目创建窗口，根据需求选择一个视
窗平台下具有窗口的项目模板。
项目创建完毕：
在项目创建完毕后，修改窗口标题包名等基本信息，随后将准备好的
图片和声音资源复制到项目目录中，以便于管理。
 
2.2 界面设计

--- 第 414 页 ---
使用快捷键 “Ctrl + U” 打开主窗口的界面设计器，进行界面设计后才能
开始编写游戏代码。
需要用到以下组件：两个画板和一个按钮，按钮用于控制游戏的开始，
两个画板是为了防止游戏绘制时产生的闪屏现象。
(1) 首先将窗口尺寸设置为宽度 400 、高度 640 。
 
(2) 在窗口上拖放一个画板组件，并设置其尺寸和位置起名 “ 备用画
板” ，所有的绘制操作均在此画板上进行。
注：其尺寸必须和窗口尺寸保持一致， 左边 属性值应设置为窗口宽
度。


--- 第 415 页 ---
 
(3) 重新拖放一个画板组件，并设置其尺寸和位置，起名 “ 主画板 ” 。
本画板用于 备用画板 绘制游戏完毕后，最终其内容全部绘制到此画板
上显示游戏界面，以规避快速绘制时画板产生的闪烁问题。
 
(4) 最后拖放一个按钮到窗口上，默认按钮会位于最底层，可通过快捷
键“Ctrl + T” 调整到顶层。
 
2.3 代码编写

--- 第 416 页 ---
1 、 首先将两个画板增加 “ 自动重画 ” 属性，并设置属性值为真，如果不
进行设置，画板可能会发生黑屏现象。
2 、 使用快捷键 “Ctrl+D” 新增一个类 ( 名称随意 ) ，此类用于存放准备的
素材，便于后期管理。
(1) 因素材都是固定不变的，定义 成员常量 来存放素材即可。
(2) 声音文件必须为 wav 格式，类型使用 “WAV 资源 ” 即可。
(3) 图片文件使用 “ 位图资源 ” 类型，支持主流的图片格式。
注：最后将所有常量公开，便于在程序代码中访问这些资源。
3 、 使用快捷键 “Ctrl+D” 新增一个类，设置成如下图效果，其中：
对象数组模板类：可以将 “@ 模板实现类 ” 对应的属性值中填写的类，
变成对象数组。
位置类：可用于存放坐标。
最终位置类将变成位置类数组，其中的每个成员都是位置类对象。
注：本类的作用，用于存放敌机坐标和操作飞机发射的子弹坐标。


--- 第 417 页 ---
4 、 在“ 我的主窗口 ” 中，新增一个方法，用于取出鼠标相对于主画板左
上角的位置。
(1) 首先利用 “ 取鼠标位置 ()” 方法取出鼠标相对于屏幕左上角所处的
位置。
(2) 然后利用 “ 主画板 . 用户区位置到屏幕 ()” 方法取出画板组件相对于
屏幕坐标。
(3) 最后将鼠标位置减去组件位置，得到的就是鼠标位置在画板组件
中的位置。
注：本方法主要用于操作飞机发射子弹时，计算坐标使用。
5 、 首先定义一个类型为 “ 位置类 ” 的成员变量，用于实时存储鼠标在画
板中的位置，以便于控制操作飞机。
添加画板组件的 “ 鼠标位置被移动 ” 事件，判断来源对象是否为 主画
板 ，如果为 主画板 则将坐标位置存储到 鼠标位置 对象中。
6 、 首先定义一个逻辑型的成员变量，用于控制游戏是否开始。
(1) 添加按钮被单击事件，因整个游戏窗口中只有一个按钮，可以不
用判断来源对象是否为开始游戏按钮。

--- 第 418 页 ---
(2) 在事件中首先将鼠标隐藏。
(3) 设置“ 是否开始游戏 ” 的逻辑变量为真。
(4) 隐藏开始游戏按钮组件。
(5) 最后调用 开始游戏 () 方法进入游戏。
7 、 使用快捷键 “Ctrl+M” 新建一个开始游戏方法，并在方法内将所有 位
图资源 全部转换成 位图对象类 ，以便于后续的绘制操作。
8 、绘制背景图
8.1 在 判断循环 子语句体内绘制背景图
(1) 首先在 判断循环 外定义一个局部变量，用于存储背景图顶边位
置，通过改变此变量值可以实现背景图移动动画。
(2) 利用 判断循环 语句判断 “ 是否开始游戏 ” 成员变量是否为真，如
果为真则开始游戏绘制。

--- 第 419 页 ---
(3) 调用 备用画板 的 画图片 方法，绘制两个处于不同位置的背景
图，以便于动画效果的实现。
(4) 将背景图顶边位置进行循环累加 10 像素距离，以实现背景图移
动效果，移动的距离，不建议太大，如果移动距离太大动画效果
会不流畅。
(5) 最后判断顶边距离是否即将超出屏幕画板尺寸，如果即将超出
就将背景图顶边位置设置为 0 ，从而实现循环播放动画。
画图片 () 方法解析：
本方法共有 6 个参数。
参数1 ：提供要绘制的位图对象；
参数2 ：提供左边画出位置；
参数3 ：提供右边画出位置；
参数4 ：提供要画出的宽度；
参数5 ：提供要画出的高度；
参数6 ：提供画出方法，可使用 “ 图像复制方法 ” 中的常量值，本
参数也可以为一个颜色值，用作指定图片中的透明色 ( 即具有此
颜色的像素  将不会被绘制 ) ，但必须使用其负值 . 如 : - 取颜色
(255, 255, 255) ，此参数  值即指定在画板上画出图片中除白色
外的所有颜色。
当前绘制背景图时，最后一个参数无需填写。
8.2 将备用画板的游戏界面显示在主画板上，因为是一次性将画好的
界面全部显示在主画板上，所以可以规避画板单独绘制时产生的闪烁
现象。
(1) 利用备用画板的取图片方法取出画好的位图对象。
(2) 将取出的位图对象，完整的绘制到主画板上。
(3) 最后将备用画板清除，并进行延时和处理事件操作。
注：因为我们是直接在主线程利用 “ 判断循环 ” 语句进行绘制的，
所以必须进行延时和处理事件操作，否则整个软件界面可能会卡
死。
取图片 () 方法解析：
本方法共有 3 个参数。

--- 第 420 页 ---
参数1 ：提供要保存的位图对象，画板图片被取出后将会保存在
此参数中；
参数2 ：提供输出宽度；
参数3 ：提供输出高度；
8.3 最后可以调试运行一下游戏，查看游戏背景图是否成功进行绘
制。

--- 第 421 页 ---
9 、 绘制操作飞机
9.1 在绘制背景图之后、主画板绘制之前，调用备用画板的 “ 画图片
()” 方法绘制操作飞机。
其中“ 鼠标位置 ” 是来源于 “ 画板 _ 鼠标位置被移动 ” 事件下提供的位
置信息，根据此位置信息就可以在鼠标位置处绘制操作飞机。
最后一个参数提供的负颜色值，其作用是用于不绘制指定颜色。
因提供的素材是具有白色背景，因此需要填写本参数，让其不绘
制白色。
如下，画图片方法帮助页中的注释：

--- 第 422 页 ---
9.2 最后调试游戏，移动鼠标即可实现控制操作飞机。
为什么移动鼠标时操作飞机也会进行移动？
(1) 主画板添加了 “ 鼠标位置被移动 ” 事件，只要鼠标位置在本组件
上发生移动，那么其坐标就会被记录在 “ 鼠标位置 ” 变量中。
(2) 开始游戏后，判断循环会一直循环执行，不停的从 “ 鼠标位置 ”
中获取最新的鼠标位置，用于绘制操作飞机，从而也就实现了移
动鼠标控制操作飞机的目的。

--- 第 423 页 ---
10 、绘制敌机
10.1 首先定义一个类型为 “ 位置数组类 ” 的成员变量，用于存放敌机
坐标。
10.2 可以在绘制操作飞机下方编写绘制敌机的相关代码。
53-54 行：

--- 第 424 页 ---
利用 取随机数 () 方法，创建一个生成敌机的条件，当生成的随
机数等于 19 时进行敌机生成（也可以是其它数字）。
为什么要进行这样的限制？
其实原因很简单，因为所有游戏绘制代码均在 判断循环 中执
行，其执行速度是非常快的，如果不限制敌机生成条件，那么
最终会生成非常多的敌机。
55-58 行：
当满足生成敌机的条件后，随机一个横坐标，纵坐标固定
为-50 ，使生成的敌机隐藏在游戏区域外，并将坐标赋值给位置
对象，最后将此位置对象加入到敌机位置数组中存储起来，便
于后续使用。
10.3 遍历敌机位置数组，开始绘制敌机
59-60 行：
将所有敌机数量取出，便于对敌机进行遍历。
61 行：
定义类型为整数的 计数 变量，用于对游戏区域内的敌机数量进
行计数。
62 行：
利用“ 计次循环 ” 对敌机数量进行循环，其目的是循环取出所有
坐标，并在指定的坐标位置绘制敌机。
63-65 行：
在正式绘制敌机之前，对计数进行累积 +1 的操作，并判断其数
量是否大于敌机位置数组数量，如果超出范围就跳出循环，防
止游戏出错。
66 行：
取出位置数组所有成员的坐标，并在此坐标位置进行绘制敌
机。
67 行：
绘制的同时移动敌机纵向位置坐标，实现敌机飞行效果。
68-71 行：

--- 第 425 页 ---
首先判断敌机位置是否超出显示范围，如果满足条件则在敌机
位置数组中删除敌机，并将计数进行 -1 ，防止因敌机数量问题
导致程序错误。
循环结束后，将 计数 赋值为 0 ，以便于下次使用。
10.4 调试游戏，最终可看到敌机被成功绘制。

--- 第 426 页 ---
11 、 绘制子弹
11.1
(1) 首先定义一个位置数组对象，用于存放子弹位置。
(2) 添加画板组件的 鼠标左键被按下 事件，判断其来源对象是否为
主画板，并且是否已经开始游戏。
(3) 如果两个条件都满足，则利用 “ 播放 WAV 资源 ()” 方法播放发射
声音。
(4) 取出主画板鼠标位置，并偏移一些像素，使子弹能够从 操作飞
机 的机头位置发射。
(5) 最后将此位置对象加入到 子弹位置数组 对象中存储起来。

--- 第 427 页 ---
11.2 在敌机计数归 0 后，开始编写子弹绘制代码。
72-74 行：
从子弹位置数组中取出子弹数量，并利用 “ 计次循环 ” 语句进行
循环。
75-77 行：
利用计数变量对游戏区域内显示的子弹进行计数，并判断其数
量是否超过所有子弹数量。
如果计数超过了所有子弹数量，则证明数据异常，执行跳出循
环操作。
78 行：
取出子弹位置数组中存储的子弹坐标，并开始绘制子弹。
79 行：
对子弹的纵向位置进行偏移，使子弹拥有移动效果。
80-83 行：
判断子弹位置是否超出屏幕显示区域，如果满足条件则在子弹
位置数组中，删除此子弹，并将计数累积 -1 。
最后计次循环结束，将计数归 0 ，以便于下次循环使用。

--- 第 428 页 ---
11.3 最终游戏运行后，点击鼠标左键可以进行发射子弹。
12 、子弹与敌机碰撞
想要实现子弹与敌机的碰撞检测，必然需要在绘制子弹时进行操作。

--- 第 429 页 ---
因此，这段代码可以编写在子弹绘制完毕后立刻进行碰撞检测（下图
黄框内）。
85 行：
定义一个 敌机索引 的整数变量，用于对敌机进行计数，同时也可
以利用本变量从 敌机位置数组 中取出此敌机的坐标。
86 行：
利用判断循环语句，判断敌机位置数组的成员数是否大于敌机索
引，如果大于则进入循环，用于循环取出所有敌机位置，并将其
位置和子弹位置进行对比，从而检测子弹是否与敌机发生碰撞。
87-88 行：
首先判断 计数 变量是否为 0 ，如果为 0 则跳出循环，防止从 子弹位
置数组 中获取子弹位置时产生错误。
89-92 行：
从子弹位置数组中取出子弹坐标，从敌机位置数组中取出敌机坐
标。
这里可能会产生疑问，为什么 敌机索引 不需要 -1 ？这是因为 敌机
索引 的累加是在循环末尾进行，首次循环时本变量值为 0 ，因此不
需要-1 。
93 行：
通过比对横向位置和纵向位置判断子弹是否已经进入敌机范围
内。
首先： 子弹位置 . 横向位置  >= 敌机位置 . 横向位置  && 子弹位置 . 横
向位置  <= 敌机位置 . 横向位置  + 40 ，用于验证子弹的横向位置是
否已经进入敌机的横向位置范围内，如果进入则开始判断纵向坐
标是否进入。
然后： 子弹位置 . 纵向位置  >= 敌机位置 . 纵向位置  && 子弹位置 . 纵
向位置  <= 敌机位置 . 纵向位置  + 50 ，判断子弹的纵向位置是否进
入敌机纵向位置范围内。
如果以上两个条件全部满足，则证明子弹和敌机发生了碰撞，然
后执行 如果真 子语句体的内容。
94-98 行：
首先播放爆炸声音，并在敌机位置绘制爆炸图片，随后删除敌机
和子弹，最后执行跳出循环。
99-100 行：
如果真语句结束后，对敌机索引进行累积 +1 。在判断循环语句结
束后，对敌机索引进行归 0 ，以便于下次循环使用。

--- 第 430 页 ---
运行测试：
最终可看到当子弹和敌机发生碰撞时，敌机和子弹会同时消失。
注：因 gif 截图工具的问题，导致爆炸效果没有被录制上。

--- 第 431 页 ---
13 、销毁敌机计数
(1) 想要实现计算敌机销毁数量，必然需要定义一个整数类型的成员
变量，并在开始游戏之前将其重置为 0 。
可能会有疑问，整数变量的默认值为 0 ，为什么还要重置为 0 ？
这是因为在游戏过程中，当敌机销毁时此变量会发生改变，为了
防止重新开始游戏时，累积上次的敌机销毁数量，因此在游戏开
始之前需要重置为 0 。

--- 第 432 页 ---
(2) 在子弹与敌机发生碰撞后，将 击毁数量 累积+1 。
(3) 最后在主画板绘制游戏界面后，在主画板的左上角位置绘制敌机
销毁数量。
(4) 最终可看到当游戏运行后，敌机销毁时可在左上角看到敌机销毁
数量。

--- 第 433 页 ---
14 、操作飞机与敌机碰撞
操作飞机与敌机的碰撞检测，其原理和子弹与敌机碰撞检测一致，都
是通过判断其横纵坐标位置来验证是否碰撞。
碰撞检测过程可以在敌机绘制完毕后进行操作，如下图黄框中的代
码。
70-71 行：
首先取出敌机坐标，便于接下来的坐标判断操作。
72 行：
通过比对鼠标位置 ( 即操作飞机坐标 ) 横向位置和纵向位置判断是否
已经进入敌机范围内。

--- 第 434 页 ---
首先： 鼠标位置 . 横向位置  >= 敌机位置 . 横向位置  && 鼠标位置 . 横
向位置  <= 敌机位置 . 横向位置  + 40 ，用于验证操作飞机的横向位
置是否已经进入敌机的横向位置范围内，如果进入则开始判断纵
向坐标是否进入。
然后： 鼠标位置 . 纵向位置  >= 敌机位置 . 纵向位置  && 鼠标位置 . 纵
向位置  <= 敌机位置 . 纵向位置  + 50 ，判断操作飞机的纵向位置是
否进入敌机纵向位置范围内。
如果以上两个条件全部满足，则证明操作飞机和敌机发生了碰
撞，然后执行 如果真 子语句体的内容。
73-75 行：
显示鼠标并弹出信息框，提示游戏结束以及被击毁的敌机数量。
76-80 行：
根据按钮返回类型，如果不继续游戏则清除两个画板，并将 是否
开始游戏 设置为假，同时将 开始游戏按钮 显示出来。
82 行：
如果继续游戏，则隐藏鼠标。
83-86 ：
无论是否继续游戏，将击毁数量设置为 0 ，并且删除所有敌机和子
弹，同时跳出循环。
最终可以看到，当操作飞机与敌机发生碰撞后会触发游戏结束，并提
示敌机销毁数量。

--- 第 435 页 ---
15 、程序收尾
添加我的主窗口 “ 窗口可否被关闭 ” 事件，此事件的结果返回 0 表示允
许关闭窗口，返回 1 表示不允许关闭窗口。
根据返回值特性，首先判断是否正在进行游戏，如果满足条件则显示
鼠标，并弹出信息框提示用户是否结束游戏，根据用户选择的结果从
而决定是接续游戏。
如果当前不处于游戏状态，则直接返回 0 ，关闭当前窗口。

--- 第 436 页 ---
运行效果：

--- 第 437 页 ---
 
3 、 案 例 下 载
点击下载 当前教程案例。
 
 
[ 上一章 ]  
 
 

--- 第 438 页 ---
关于本教程
联系方式

--- 第 439 页 ---
武汉递归软件开发有限公司
[ 官方网站 ]   [ 软件购买 ]   [ 用户论坛 ]
官方QQ 群① : 49603841 1
官方QQ 群② : 895033329
官方QQ 群③ : 1147071006
客服QQ: 378821858( 请注明事由 )
电子邮件 : service@voldp.com
微信公众号 : 
鄂ICP 备 18029190 号

--- 第 440 页 ---
 
  

