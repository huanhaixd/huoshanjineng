
## 火山"视窗项目"系统类库模块: Redis数据库

### 包: 火山.视窗.数据库

---

#### 火山.视窗.数据库.Redis数据库类

* **类型:** `类`
* **名称:** `Redis数据库类`
* **描述:** 提供对Redis数据库的操作支持.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main), [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis数据库类.连接

* **类型:** `方法`
* **名称:** `连接`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `地址` (`文本型`): 提供所欲连接数据库的地址/IP.
	* `端口` (`整数`, 默认值: `6379`): 提供所欲连接数据库的连接端口号.
	* `密码` (`文本型`, 默认值: `空对象`): 提供该库的授权密码,无密码请留空.
	* `库号` (`整数`, 默认值: `0`): 提供连接成功后所欲使用的库号索引,默认情况下有16个库,可提供0-15之间的索引号,如自己设置库数量请提供正确范围内的索引.
	* `超时` (`整数`, 默认值: `10`): 提供连接服务器的超时时间,单位:秒.
* **描述:** 开始连接到指定的Redis数据库,如果当前处于已连接的状态将会被断开.
* **返回值描述:** 返回连接结果.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis数据库类.启用心跳保活

* **类型:** `方法`
* **名称:** `启用心跳保活`
* **返回值数据类型:** `逻辑型`
* **描述:** 将当前数据库连接启用KeepAlive功能.

##### 火山.视窗.数据库.Redis数据库类.取错误内容

* **类型:** `方法`
* **名称:** `取错误内容`
* **返回值数据类型:** `文本型`
* **描述:** 获取错误内容.
* **返回值描述:** 无错误时返回空文本.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis数据库类.取错误码

* **类型:** `方法`
* **名称:** `取错误码`
* **返回值数据类型:** `整数`
* **描述:** 获取错误码.
* **返回值描述:** 无错误时返回0.

##### 火山.视窗.数据库.Redis数据库类.关闭

* **类型:** `方法`
* **名称:** `关闭`
* **描述:** 关闭并将当前已连接的数据库断开.

##### 火山.视窗.数据库.Redis数据库类.执行命令

* **类型:** `方法`
* **名称:** `执行命令`
* **返回值数据类型:** `Redis执行结果类`
* **参数:**
	* `命令内容` (`文本型`): 提供所欲执行完整命令内容,例如"SET key value".
* **描述:** 对当前已连接的数据库执行指定命令,如欲提供二进制数据或其他非文本型数据的命令执行,请使用"执行命令2".
* **返回值描述:** 返回执行该命令后服务器所返回的结果.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis数据库类.执行命令2

* **类型:** `方法`
* **名称:** `执行命令2`
* **返回值数据类型:** `Redis执行结果类`
* **参数:**
	* `命令类型` (`文本型`): 提供所欲执行的命令类型,例如"SET".
	* `参数内容` (`通用型`, `可扩展`): 提供所欲执行命令携带的所有参数,文本型的参数将会以多字节编码方式提交储存. 注意:除支持基本型外仅支持字节集类参数,提交其他类型参数将导致失败立即返回.
* **描述:** 对当前已连接的数据库执行指定命令.
* **返回值描述:** 返回执行该命令后服务器所返回的结果.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis数据库类.连续执行命令

* **类型:** `方法`
* **名称:** `连续执行命令`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `命令内容` (`文本型`): 提供所欲执行完整命令内容,例如"SET key value".
* **描述:** 加入一个命令到执行命令缓冲区中等待执行,适用于需要执行大量命令而不需要立即返回结果的场景下使用,如欲提供二进制数据或其他非文本型数据的命令执行,请使用"连续执行命令2".
* **返回值描述:** 返回是否加入命令成功
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis数据库类.连续执行命令2

* **类型:** `方法`
* **名称:** `连续执行命令2`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `命令类型` (`文本型`): 提供所欲执行的命令类型,例如"SET".
	* `参数内容` (`通用型`, `可扩展`): 提供所欲执行命令携带的所有参数,文本型的参数将会以多字节编码方式提交储存. 注意:除支持基本型外仅支持字节集类参数,提交其他类型参数将导致失败立即返回.
* **描述:** 加入一个命令到执行命令缓冲区中等待执行,适用于需要执行大量命令而不需要立即返回结果的场景下使用.
* **返回值描述:** 返回是否加入命令成功.

##### 火山.视窗.数据库.Redis数据库类.取连续执行结果

* **类型:** `方法`
* **名称:** `取连续执行结果`
* **返回值数据类型:** `Redis执行结果类`
* **描述:** 在使用了"连续执行命令"或"连续执行命令2"加入了多条命令后,使用本方法提交命令执行并且获取命令执行结果.
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis数据库类.取连接状态

* **类型:** `方法`
* **名称:** `取连接状态`
* **返回值数据类型:** `逻辑型`
* **描述:** 获取当前与服务器的连接状态
* **返回值描述:** 返回真表示与服务器连接正常,否则与服务器的连接已丢失.

---

#### 火山.视窗.数据库.Redis执行结果类

* **类型:** `类`
* **名称:** `Redis执行结果类`
* **描述:** 本类实例表示一个服务器的返回信息(命令执行后).
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main), [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis执行结果类.类型

* **类型:** `属性读方法`
* **名称:** `类型`
* **返回值数据类型:** `Redis结果类型`
* **描述:** 获取该结果中数据的类型.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis执行结果类.是否有效

* **类型:** `属性读方法`
* **名称:** `是否有效`
* **返回值数据类型:** `逻辑型`
* **描述:** 获取当前执行结果是否为有效状态
* **返回值描述:** 返回真表示有效,否则无效无法获取其任何数据.

##### 火山.视窗.数据库.Redis执行结果类.取文本内容

* **类型:** `方法`
* **名称:** `取文本内容`
* **返回值数据类型:** `文本型`
* **描述:** 以文本方式获取命令执行结果的内容.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main), [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis执行结果类.取字节集内容

* **类型:** `方法`
* **名称:** `取字节集内容`
* **返回值数据类型:** `字节集类`
* **描述:** 以字节集方式获取命令执行结果的内容.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis执行结果类.取整数内容

* **类型:** `方法`
* **名称:** `取整数内容`
* **返回值数据类型:** `长整数`
* **描述:** 获取该结果中的数值内容.

##### 火山.视窗.数据库.Redis执行结果类.取小数内容

* **类型:** `方法`
* **名称:** `取小数内容`
* **返回值数据类型:** `小数`
* **描述:** 获取该结果中的小数内容.

##### 火山.视窗.数据库.Redis执行结果类.取数组内容

* **类型:** `方法`
* **名称:** `取数组内容`
* **返回值数据类型:** `整数`
* **参数:**
	* `结果参数` (`Redis执行结果数组类`)
* **描述:** 获取该结果中的数组内容并将其写入到结果参数中
* **返回值描述:** 返回写入到结果参数数组中的成员数目
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

---

#### 火山.视窗.数据库.Redis结果类型

* **类型:** `类`
* **名称:** `Redis结果类型`
* **特性:**
	* `常量类`(对应数据类型: `整数`)
* **描述:** 表示Redis执行结果中信息的类型.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis结果类型.文本内容

* **类型:** `成员常量`
* **名称:** `文本内容`
* **数据类型:** `Redis结果类型`
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis结果类型.数组内容

* **类型:** `成员常量`
* **名称:** `数组内容`
* **数据类型:** `Redis结果类型`
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis结果类型.整型内容

* **类型:** `成员常量`
* **名称:** `整型内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.空内容

* **类型:** `成员常量`
* **名称:** `空内容`
* **数据类型:** `Redis结果类型`
* **描述:** 表示Nil,无任何内容.

##### 火山.视窗.数据库.Redis结果类型.状态内容

* **类型:** `成员常量`
* **名称:** `状态内容`
* **数据类型:** `Redis结果类型`
* **描述:** 表示本次回复的是一个状态,例如SET命令将数据成功置入将会返回该类型.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis结果类型.错误内容

* **类型:** `成员常量`
* **名称:** `错误内容`
* **数据类型:** `Redis结果类型`
* **描述:** 表示本次执行错误,可用取文本内容取出错误描述.
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

##### 火山.视窗.数据库.Redis结果类型.小数内容

* **类型:** `成员常量`
* **名称:** `小数内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.逻辑值内容

* **类型:** `成员常量`
* **名称:** `逻辑值内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.可变内容

* **类型:** `成员常量`
* **名称:** `可变内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.键值对内容

* **类型:** `成员常量`
* **名称:** `键值对内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.集合内容

* **类型:** `成员常量`
* **名称:** `集合内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.属性内容

* **类型:** `成员常量`
* **名称:** `属性内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.推送内容

* **类型:** `成员常量`
* **名称:** `推送内容`
* **数据类型:** `Redis结果类型`

##### 火山.视窗.数据库.Redis结果类型.大数内容

* **类型:** `成员常量`
* **名称:** `大数内容`
* **数据类型:** `Redis结果类型`

---

#### 火山.视窗.数据库.Redis执行结果数组类

* **类型:** `类`
* **名称:** `Redis执行结果数组类`
* **模板基础类:** `对象数组模板类`
* **特性:**
	* `模板实现类`. 其直接/间接继承的模板基础类中的模板数据类型将按下表进行替换: `模板类型1` -> `Redis执行结果类`
* **相关例程:** [vol-redis-redis-main](#vol-redis-redis-main)

---

#### 火山.视窗.数据库.Redis连接池类

* **类型:** `类`
* **名称:** `Redis连接池类`
* **描述:** 提供一个线程安全的Redis连接池.
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis连接池类.初始化

* **类型:** `方法`
* **名称:** `初始化`
* **返回值数据类型:** `整数`
* **参数:**
	* `地址` (`文本型`): 提供所欲连接数据库的地址/IP.
	* `端口` (`整数`, 默认值: `6379`): 提供所欲连接数据库的连接端口号.
	* `超时` (`整数`, 默认值: `10`): 提供连接服务器的超时时间,单位:秒.
	* `密码` (`文本型`, 默认值: `空对象`): 提供该库的授权密码,无密码请留空.
	* `库号` (`整数`, 默认值: `0`): 提供连接成功后所欲使用的库号索引,默认情况下有16个库,可提供0-15之间的索引号,如自己设置库数量请提供正确范围内的索引.
	* `最大连接数` (`整数`, 默认值: `50`): 连接池中所能创建的最大连接数量.
	* `初始连接数` (`整数`, 默认值: `10`): 初始化时所欲创建的可用连接数.
* **描述:** 初始化Redis连接池并连接至指定Redis服务器
* **返回值描述:** 返回该连接池中所创建成功的连接数
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis连接池类.取连接

* **类型:** `方法`
* **名称:** `取连接`
* **返回值数据类型:** `逻辑型`
* **参数:**
	* `结果连接` (`Redis数据库类`): 如果本方法成功,则所获得连接将填入此结果变量中.
	* `繁忙等待时间` (`整数`, 默认值: `10000`): 指定在所有连接都已用尽时所欲等待的时长,提供-1表示无限等待,0表示不等待.单位:毫秒.
* **描述:** 从Redis连接池中取出一个可用的连接,成功返回真,失败返回假. 如果当前连接池中暂无可用连接,将会新建一个连接,如果已达到最大连接数限制时将会等待指定时长,超时后将会返回假. 注意:取出的连接使用完毕后务必调用"释放连接"方法,否则所取出的连接将一直处于占用状态.
* **返回值描述:** 返回本次获取的连接是否有效.
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis连接池类.释放连接

* **类型:** `方法`
* **名称:** `释放连接`
* **参数:**
	* `连接对象` (`Redis数据库类`): 提供所欲释放的连接对象,必须确认此连接目前不再使用.
* **描述:** 释放从连接池中所取出的连接对象,使其在连接池中恢复空闲状态等待被获取. 注意:取出的连接使用完毕后务必调用本方法释放,否则所取出的连接将一直处于占用状态.
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis连接池类.释放所有连接

* **类型:** `方法`
* **名称:** `释放所有连接`
* **描述:** 释放连接池中所有的连接对象,使其在连接池中恢复空闲状态等待被获取. 调用本方法时必须确认所有连接目前不再使用.

##### 火山.视窗.数据库.Redis连接池类.销毁连接

* **类型:** `方法`
* **名称:** `销毁连接`
* **参数:**
	* `连接对象` (`Redis数据库类`): 提供所欲销毁的连接对象,必须确认此连接不再使用.
* **描述:** 销毁连接池中的指定连接,该连接将会从连接池中被移除并断开释放.

##### 火山.视窗.数据库.Redis连接池类.创建连接

* **类型:** `方法`
* **名称:** `创建连接`
* **返回值数据类型:** `逻辑型`
* **描述:** 在该连接池中新建一个连接,返回创建的结果.
* **返回值描述:** 如果当前连接池中连接已达最大连接数将会返回失败.

##### 火山.视窗.数据库.Redis连接池类.取空闲连接数

* **类型:** `方法`
* **名称:** `取空闲连接数`
* **返回值数据类型:** `整数`
* **描述:** 获取当前连接池中空闲的可用连接数.
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)

##### 火山.视窗.数据库.Redis连接池类.取连接数

* **类型:** `方法`
* **名称:** `取连接数`
* **返回值数据类型:** `整数`
* **描述:** 获取当前连接池中所有的可用连接数(包括所有空闲或正在执行任务的连接).
* **相关例程:** [vol-redis连接池-redisconnectpool-main](#vol-redis连接池-redisconnectpool-main)
